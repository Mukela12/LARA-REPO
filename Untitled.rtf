{\rtf1\ansi\ansicpg1252\cocoartf2821
\cocoatextscaling0\cocoaplatform0{\fonttbl\f0\fswiss\fcharset0 Helvetica;\f1\froman\fcharset0 TimesNewRomanPS-BoldMT;\f2\froman\fcharset0 TimesNewRomanPSMT;
\f3\froman\fcharset0 TimesNewRomanPS-ItalicMT;}
{\colortbl;\red255\green255\blue255;\red0\green0\blue0;\red155\green162\blue177;\red184\green93\blue213;
\red197\green136\blue83;\red81\green157\blue235;\red214\green85\blue98;\red136\green185\blue102;\red74\green80\blue93;
}
{\*\expandedcolortbl;;\cspthree\c0\c0\c0;\cspthree\c67557\c69711\c74420;\cspthree\c73393\c48491\c84431;
\cspthree\c78683\c61270\c43050;\cspthree\c45467\c67884\c91583;\cspthree\c82076\c44885\c46792;\cspthree\c63037\c75987\c50527;\cspthree\c36585\c38733\c43455;
}
\paperw11900\paperh16840\margl1440\margr1440\vieww28600\viewh18000\viewkind0
\pard\tx720\tx1440\tx2160\tx2880\tx3600\tx4320\tx5040\tx5760\tx6480\tx7200\tx7920\tx8640\pardirnatural\partightenfactor0

\f0\fs24 \cf0 so there was a discussion with the client they said there some things they needed to clearify on the          \
  system these are the final requirements i want you to review the discussion and the files shared i have       \
  provided the files here /Users/mukelakatungu/Downloads/Lara/LARA_Feedback_Principles 19122025.pdf,            \
  /Users/mukelakatungu/Downloads/Lara/guiding principles.pdf, .pdf here is       \
  the conversation to help you (once you have gone through the conversation you should begin review the         \
  current system to evaluate if it meets here expertations and if there is anything that needs to change if     \
  there is you should write them done with full instructions for your self so we can begin making changes       \
  keep in mind i want you to review the current system change if we are using a live database, check if         \
  everything is set up to perfext etc) :                                                                        \
  Renee Yeowell                                                                                                 \
  12:27 PM                                                                                                      \
  Hi Rahul, Sorry for the delay. I'm still with my family in Dubai and struggling to find time. We              \
  scattered my Mums ashes yesterday, so it is full on. I travel back to Brisbane on Monday and things will      \
  return to more normal for me after that. I've had a quick look at version 3 and my initial thinking is        \
  that we are moving to much closer alignment. Looking good Rahul. I'm still thinking through the 3 tiers       \
  and pricing / credits etc how we make appealing to teachers and additionally it sounds like the switch to     \
  Haiku will be helpful - provided it is fit for purpose. Thanks for your patience, Rahul - I have far          \
  from forgotten you! Renee                                                                                     \
                                                                                                                \
  Friday, Jan 16                                                                                                \
  Rahul Kumar                                                                                                   \
  3:07 AM                                                                                                       \
  No problem Renee, we will wait for you,Thank you                                                              \
                                                                                                                \
  Tuesday, Jan 20                                                                                               \
  Rahul Kumar                                                                                                   \
  3:47 PM                                                                                                       \
  Hi Renee,                                                                                                     \
                                                                                                                \
                                                                                                                \
                                                                                                                \
  I hope you\'92re doing well. I wanted to check if you have some free time so that we can discuss the             \
  project. Please let me know a time that works best for you.                                                   \
                                                                                                                \
                                                                                                                \
                                                                                                                \
  Looking forward to your response.                                                                             \
                                                                                                                \
                                                                                                                \
                                                                                                                \
  Best regards,                                                                                                 \
  Rahul Kumar                                                                                                   \
                                                                                                                \
  Wednesday, Jan 21                                                                                             \
  RY                                                                                                            \
  Renee Yeowell                                                                                                 \
  10:10 AM                                                                                                      \
  hI rAHUL,                                                                                                     \
                                                                                                                \
  Hi Rahul, I'm sorry for my tardiness. Thanks for V3, We are really getting close. Here you go. I\'92ve           \
  inserted it cleanly into the checklist message, no em dashes, no extra theory, and no new surfaces for        \
  debate.                                                                                                       \
                                                                                                                \
                                                                                                                \
                                                                                                                \
  Before we proceed to build, I want to lock down a small number of MVP1 non-negotiables so nothing gets        \
  lost or interpreted differently later. Please treat this as a checklist to confirm against the revised        \
  plan.                                                                                                         \
                                                                                                                \
                                                                                                                \
                                                                                                                \
  ---                                                                                                           \
                                                                                                                \
                                                                                                                \
                                                                                                                \
  ## MVP1 Core Rule                                                                                             \
                                                                                                                \
                                                                                                                \
                                                                                                                \
  \uc0\u9744  For MVP1, if the system can do something without a teacher clicking a button, that capability does not      \
  exist at all.                                                                                                 \
                                                                                                                \
                                                                                                                \
                                                                                                                \
  This means no enforcement, automation, or completion judgement present in the architecture, not present       \
  but disabled.                                                                                                 \
                                                                                                                \
                                                                                                                \
                                                                                                                \
  ---                                                                                                           \
                                                                                                                \
                                                                                                                \
                                                                                                                \
  ## Functional Checklist                                                                                       \
                                                                                                                \
                                                                                                                \
                                                                                                                \
  ### Feedback generation                                                                                       \
                                                                                                                \
                                                                                                                \
                                                                                                                \
  \uc0\u9744  Student submission does not automatically trigger AI feedback                                               \
  \uc0\u9744  Feedback is generated only when a teacher explicitly clicks Generate feedback (or equivalent)               \
  \uc0\u9744  No background or queued generation occurs without a teacher action                                          \
                                                                                                                \
                                                                                                                \
                                                                                                                \
  ---                                                                                                           \
                                                                                                                \
                                                                                                                \
                                                                                                                \
  ### Pedagogical validation                                                                                    \
                                                                                                                \
                                                                                                                \
                                                                                                                \
  \uc0\u9744  The system does not decide whether feedback meets pedagogical criteria                                      \
  \uc0\u9744  Pedagogical checks surface only as teacher-visible warnings or logs                                         \
  \uc0\u9744  Pedagogical checks never block feedback from being shown                                                    \
  \uc0\u9744  Pedagogical checks never trigger automatic regeneration                                                     \
                                                                                                                \
                                                                                                                \
                                                                                                                \
  ---                                                                                                           \
                                                                                                                \
                                                                                                                \
                                                                                                                \
  ### Completion detection                                                                                      \
                                                                                                                \
                                                                                                                \
                                                                                                                \
  \uc0\u9744  The system does not decide or signal whether a student has \'93completed\'94 a step                               \
  \uc0\u9744  No success or failure states are shown to students                                                          \
  \uc0\u9744  No ticks, warnings, or judgement-based indicators appear in the student UI                                  \
  \uc0\u9744  At most, neutral acknowledgement of activity is shown                                                       \
                                                                                                                \
                                                                                                                \
                                                                                                                \
  ---                                                                                                           \
                                                                                                                \
                                                                                                                \
                                                                                                                \
  ### AI usage and regeneration                                                                                 \
                                                                                                                \
                                                                                                                \
                                                                                                                \
  \uc0\u9744  No automatic AI calls occur on submission or validation                                                     \
  \uc0\u9744  No background calls, retries, or regeneration loops exist                                                   \
  \uc0\u9744  Every AI call maps 1:1 to a visible human action                                                            \
  \uc0\u9744  Allowed triggers are explicitly listed (for example: teacher clicks Generate or Regenerate, student         \
  clicks Request feedback on revision)                                                                          \
                                                                                                                \
                                                                                                                \
                                                                                                                \
  ---                                                                                                           \
                                                                                                                \
                                                                                                                \
                                                                                                                \
  ### AI usage visibility and pricing                                                                           \
                                                                                                                \
                                                                                                                \
                                                                                                                \
  \uc0\u9744  Teacher UI does not show dollar or token cost                                                               \
  \uc0\u9744  AI usage is shown only as feedback credits used versus remaining                                            \
  \uc0\u9744  Example teacher-facing language is credit-based, not cost-based                                             \
  \uc0\u9744  Dollar and token costs are tracked internally only                                                          \
  EG: Session: ABC123                                                                                           \
  Students: 12 joined, 7 submitted                                                                              \
  This session used 7 feedbacks.                                                                                \
  You have 193 feedbacks remaining this month.                                                                  \
  ---                                                                                                           \
                                                                                                                \
                                                                                                                \
                                                                                                                \
  ### Tier readiness                                                                                            \
                                                                                                                \
                                                                                                                \
                                                                                                                \
  \uc0\u9744  MVP1 is designed to support three future teacher usage tiers (for example: Starter, Classroom,              \
  Multi-Class), using credit-based limits and soft blocks                                                       \
  \uc0\u9744  Exact pricing and credit numbers will be finalised post-pilot and do not need to be exposed in MVP1         \
                                                                                                                \
                                                                                                                \
                                                                                                                \
  ---                                                                                                           \
                                                                                                                \
                                                                                                                \
                                                                                                                \
  ## MVP1 Infrastructure Foundations                                                                            \
                                                                                                                \
                                                                                                                \
                                                                                                                \
  Please also confirm your proposed approach for the following, keeping MVP1 deliberately simple and            \
  managed:                                                                                                      \
                                                                                                                \
                                                                                                                \
                                                                                                                \
  \uc0\u9744  Teacher authentication (managed auth rather than custom)                                                    \
  \uc0\u9744  Account storage (what teacher data is stored for MVP1, and where)                                           \
  \uc0\u9744  App hosting (frontend and backend approach)                                                                 \
  \uc0\u9744  Stripe integration (subscriptions, upgrades, cancellations, plan enforcement)                               \
                                                                                                                \
                                                                                                                \
                                                                                                                \
  ---                                                                                                           \
                                                                                                                \
                                                                                                                \
                                                                                                                \
  If meeting this checklist means removing or simplifying parts of the current plan, that is intentional.       \
  MVP1 is a reliability-first classroom pilot, not an end-state system.                                         \
                                                                                                                \
                                                                                                                \
                                                                                                                \
  Please confirm whether you are comfortable revising the plan so MVP1 meets the above checklist, or let me     \
  know if this is not how you would approach the build.                                                         \
                                                                                                                \
                                                                                                                \
                                                                                                                \
  Thanks,                                                                                                       \
  Renee                                                                                                         \
                                                                                                                \
  RY                                                                                                            \
  Renee Yeowell                                                                                                 \
  10:25 AM                                                                                                      \
  Hi Rahul, I'm just creating a Github account. May I have your email address please or username? Thanks        \
  Renee                                                                                                         \
                                                                                                                \
  Rahul Kumar                                                                                                   \
  10:28 AM                                                                                                      \
  Hi Renee thanks for your response.                                                                            \
  Username is rahulkumarhavit                                                                                   \
  Email is rahulkumarhavit@gmail.com                                                                            \
                                                                                                                \
  I will add these checklist to MVP 1. I will revise the MVP plan1.                                             \
                                                                                                                \
  RY                                                                                                            \
  Renee Yeowell                                                                                                 \
  Jan 21, 2026 | 10:14 AM                                                                                       \
  Hi Rahul, I'm sorry for my tardiness. Thanks for V3, We are really getting close. Here you go. I\'92ve           \
  inserted it cleanly into the checklist message, no em dashes, no extra theory, and no new surfaces for        \
  debate.                                                                                                       \
                                                                                                                \
                                                                                                                \
                                                                                                                \
  Before we proceed to build, I want to lock down a small number of MVP1 non-negotiables so nothing gets        \
  lost or interpreted differently later. Please treat this as a checklist to confirm against the revised        \
  plan.                                                                                                         \
                                                                                                                \
                                                                                                                \
                                                                                                                \
  ---                                                                                                           \
                                                                                                                \
                                                                                                                \
                                                                                                                \
  ## MVP1 Core Rule                                                                                             \
                                                                                                                \
                                                                                                                \
                                                                                                                \
  \uc0\u9744  For MVP1, if the system can do something without a teacher clicking a button, that capability does not      \
  exist at all.                                                                                                 \
                                                                                                                \
                                                                                                                \
                                                                                                                \
  This means no enforcement, automation, or completion judgement present in the architecture, not present       \
  but disabled.                                                                                                 \
                                                                                                                \
                                                                                                                \
                                                                                                                \
  ---                                                                                                           \
                                                                                                                \
                                                                                                                \
                                                                                                                \
  ## Functional Checklist                                                                                       \
                                                                                                                \
                                                                                                                \
                                                                                                                \
  ### Feedback generation                                                                                       \
                                                                                                                \
                                                                                                                \
                                                                                                                \
  \uc0\u9744  Student submission does not automatically trigger AI feedback                                               \
  \uc0\u9744  Feedback is generated only when a teacher explicitly clicks Generate feedback (or equivalent)               \
  \uc0\u9744  No background or queued generation occurs without a teacher action                                          \
                                                                                                                \
                                                                                                                \
                                                                                                                \
  ---                                                                                                           \
                                                                                                                \
                                                                                                                \
                                                                                                                \
  ### Pedagogical validation                                                                                    \
                                                                                                                \
                                                                                                                \
                                                                                                                \
  \uc0\u9744  The system does not decide whether feedback meets pedagogical criteria                                      \
  \uc0\u9744  Pedagogical checks surface only as teacher-visible warnings or logs                                         \
  \uc0\u9744  Pedagogical checks never block feedback from being shown                                                    \
  \uc0\u9744  Pedagogical checks never trigger automatic regeneration                                                     \
                                                                                                                \
                                                                                                                \
                                                                                                                \
  ---                                                                                                           \
                                                                                                                \
                                                                                                                \
                                                                                                                \
  ### Completion detection                                                                                      \
                                                                                                                \
                                                                                                                \
                                                                                                                \
  \uc0\u9744  The system does not decide or signal whether a student has \'93completed\'94 a step                               \
  \uc0\u9744  No success or failure states are shown to students                                                          \
  \uc0\u9744  No ticks, warnings, or judgement-based indicators appear in the student UI                                  \
  \uc0\u9744  At most, neutral acknowledgement of activity is shown                                                       \
                                                                                                                \
                                                                                                                \
                                                                                                                \
  ---                                                                                                           \
                                                                                                                \
                                                                                                                \
                                                                                                                \
  ### AI usage and regeneration                                                                                 \
                                                                                                                \
                                                                                                                \
                                                                                                                \
  \uc0\u9744  No automatic AI calls occur on submission or validation                                                     \
  \uc0\u9744  No background calls, retries, or regeneration loops exist                                                   \
  \uc0\u9744  Every AI call maps 1:1 to a visible human action                                                            \
  \uc0\u9744  Allowed triggers are explicitly listed (for example: teacher clicks Generate or Regenerate, student         \
  clicks Request feedback on revision)                                                                          \
                                                                                                                \
                                                                                                                \
                                                                                                                \
  ---                                                                                                           \
                                                                                                                \
                                                                                                                \
                                                                                                                \
  ### AI usage visibility and pricing                                                                           \
                                                                                                                \
                                                                                                                \
                                                                                                                \
  \uc0\u9744  Teacher UI does not show dollar or token cost                                                               \
  \uc0\u9744  AI usage is shown only as feedback credits used versus remaining                                            \
  \uc0\u9744  Example teacher-facing language is credit-based, not cost-based                                             \
  \uc0\u9744  Dollar and token costs are tracked internally only                                                          \
  EG: Session: ABC123                                                                                           \
  Students: 12 joined, 7 submitted                                                                              \
  This session used 7 feedbacks.                                                                                \
  You have 193 feedbacks remaining this month.                                                                  \
  ---                                                                                                           \
                                                                                                                \
                                                                                                                \
                                                                                                                \
  ### Tier readiness                                                                                            \
                                                                                                                \
                                                                                                                \
                                                                                                                \
  \uc0\u9744  MVP1 is designed to support three future teacher usage tiers (for example: Starter, Classroom,              \
  Multi-Class), using credit-based limits and soft blocks                                                       \
  \uc0\u9744  Exact pricing and credit numbers will be finalised post-pilot and do not need to be exposed in MVP1         \
                                                                                                                \
                                                                                                                \
                                                                                                                \
  ---                                                                                                           \
                                                                                                                \
                                                                                                                \
                                                                                                                \
  ## MVP1 Infrastructure Foundations                                                                            \
                                                                                                                \
                                                                                                                \
                                                                                                                \
  Please also confirm your proposed approach for the following, keeping MVP1 deliberately simple and            \
  managed:                                                                                                      \
                                                                                                                \
                                                                                                                \
                                                                                                                \
  \uc0\u9744  Teacher authentication (managed auth rather than custom)                                                    \
  \uc0\u9744  Account storage (what teacher data is stored for MVP1, and where)                                           \
  \uc0\u9744  App hosting (frontend and backend approach)                                                                 \
  \uc0\u9744  Stripe integration (subscriptions, upgrades, cancellations, plan enforcement)                               \
                                                                                                                \
                                                                                                                \
                                                                                                                \
  ---                                                                                                           \
                                                                                                                \
                                                                                                                \
                                                                                                                \
  If meeting this checklist means removing or simplifying parts of the current plan, that is intentional.       \
  MVP1 is a reliability-first classroom pilot, not an end-state system.                                         \
                                                                                                                \
                                                                                                                \
                                                                                                                \
  Please confirm whether you are comfortable revising the plan so MVP1 meets the above checklist, or let me     \
  know if this is not how you would approach the build.                                                         \
                                                                                                                \
                                                                                                                \
                                                                                                                \
  Thanks,                                                                                                       \
  Renee                                                                                                         \
                                                                                                                \
  Show less                                                                                                     \
  RY                                                                                                            \
  Renee Yeowell                                                                                                 \
  10:30 AM                                                                                                      \
  Thanks Rahul. I'm at home now. Holidays finished so I'll be more focussed!                                    \
                                                                                                                \
  Rahul Kumar                                                                                                   \
  10:31 AM                                                                                                      \
  Thank you Renee. I will send you plan after adding the checklist.                                             \
                                                                                                                \
  Thursday, Jan 22                                                                                              \
  Rahul Kumar                                                                                                   \
  8:15 AM                                                                                                       \
  Hii Renee , I change the plan according to your feedback. Thanks                                              \
                                                                                                                \
  LARA_Implementation_Plan_v3.1.md.pdf                                                                          \
  LARA_Implementation_Plan_v3.1.md.pdf                                                                          \
  2 MB                                                                                                          \
  RY                                                                                                            \
  Renee Yeowell                                                                                                 \
  9:07 AM                                                                                                       \
  Hi Rahul, Thanks for this. I'll have a look now.                                                              \
                                                                                                                \
  I've just created a API for Claude: sk-ant-api03-vIlV--fHktFiuWsLTBCX5FhIKTCv8v-NvU888f1HP0LXABBd1EpeX4Kx     \
  zkptZozEAGImbTUXjBzqaEboh76fDA-J5DHOQAA                                                                       \
                                                                                                                \
  Let me know if I need to do anything else with this - as it is completely out of my wheelhouse! Thanks        \
                                                                                                                \
  RY                                                                                                            \
  Renee Yeowell                                                                                                 \
  9:45 AM                                                                                                       \
  Hi Rahul,                                                                                                     \
                                                                                                                \
                                                                                                                \
                                                                                                                \
  I will add the next milestones in Upwork shortly so we can proceed.                                           \
                                                                                                                \
                                                                                                                \
                                                                                                                \
  Milestone 1: Core classroom learning loop working end to end, USD $1,100.                                     \
  Milestone 2: Revision flow and classroom reliability in place, USD $700.                                      \
                                                                                                                \
                                                                                                                \
                                                                                                                \
  Thank you for turning this around so quickly.                                                                 \
                                                                                                                \
                                                                                                                \
                                                                                                                \
  I\'92ve now reviewed v3.1 carefully against the MVP1 checklist I sent yesterday. I want to confirm clearly       \
  that the document is now aligned with the MVP1 non-negotiables, particularly:                                 \
                                                                                                                \
                                                                                                                \
                                                                                                                \
  \'95 All AI generation is explicitly teacher-initiated only                                                      \
  \'95 No background, automatic, or speculative AI calls exist in the architecture                                 \
  \'95 Validation is warn-and-log only, with no blocking or automatic regeneration                                 \
  \'95 No completion detection or judgement appears in the student UI                                              \
  \'95 AI usage is surfaced only as feedback credits, not dollars or tokens                                        \
  \'95 Tiering is backend-ready but not exposed in MVP1                                                            \
  \'95 MVP1 remains a reliability-first classroom pilot, not an end-state system                                   \
                                                                                                                \
                                                                                                                \
                                                                                                                \
  On that basis, I\'92m comfortable treating v3.1 as the locked MVP1 implementation plan.                          \
                                                                                                                \
                                                                                                                \
                                                                                                                \
  Please proceed on the assumption that the checklist language is authoritative if any ambiguity arises         \
  during build. If something cannot be implemented without violating the teacher click equals capability        \
  exists rule, it should be removed or simplified rather than engineered around.                                \
                                                                                                                \
                                                                                                                \
                                                                                                                \
  Next step from my side: I\'92m happy to formally lock Milestone 0 and move into build.                           \
                                                                                                                \
                                                                                                                \
                                                                                                                \
  Thanks again. This is in a good place now.                                                                    \
                                                                                                                \
                                                                                                                \
                                                                                                                \
  Renee                                                                                                         \
                                                                                                                \
  Renee Yeowell approved the milestone                                                                          \
                                                                                                                \
  9:45 AM                                                                                                       \
  Milestone 1: "Product-minded web developer for classroom MVP (teacher-led)"                                   \
                                                                                                                \
  View details                                                                                                  \
  RY                                                                                                            \
  Renee Yeowell updated the contract                                                                            \
                                                                                                                \
  9:55 AM                                                                                                       \
  ADDED:                                                                                                        \
                                                                                                                \
  Name: Milestone 1: Core classroom learning loop working end to end,                                           \
                                                                                                                \
  Amount: $1,100.00                                                                                             \
                                                                                                                \
  Order: Milestone 2                                                                                            \
                                                                                                                \
  ADDED:                                                                                                        \
                                                                                                                \
  Name: Milestone 2: Revision flow and classroom reliability in place,                                          \
                                                                                                                \
  Amount: $700.00                                                                                               \
                                                                                                                \
  Order: Milestone 3                                                                                            \
                                                                                                                \
  View Updated Contract                                                                                         \
  Renee Yeowell activated the milestone                                                                         \
                                                                                                                \
  9:56 AM                                                                                                       \
  Deliver a fully functioning MVP1 classroom learning loop that works end to end in real classroom              \
  conditions, aligned exactly to the locked MVP1 implementation plan.                                           \
                                                                                                                \
                                                                                                                \
                                                                                                                \
  This milestone focuses on reliability and correctness, not polish or extensibility.                           \
                                                                                                                \
                                                                                                                \
                                                                                                                \
  Included in scope                                                                                             \
                                                                                                                \
                                                                                                                \
                                                                                                                \
  Teacher authentication and account setup                                                                      \
                                                                                                                \
                                                                                                                \
                                                                                                                \
  Teacher creates a task with required success criteria                                                         \
                                                                                                                \
                                                                                                                \
                                                                                                                \
  Teacher starts a live session and generates a class code                                                      \
                                                                                                                \
                                                                                                                \
                                                                                                                \
  Students join using the code with no accounts                                                                 \
                                                                                                                \
                                                                                                                \
                                                                                                                \
  Students submit a written response                                                                            \
                                                                                                                \
                                                                                                                \
                                                                                                                \
  Student submissions are marked as ready for feedback with no AI triggered                                     \
                                                                                                                \
                                                                                                                \
                                                                                                                \
  Teacher explicitly initiates AI feedback generation via button click only                                     \
                                                                                                                \
                                                                                                                \
                                                                                                                \
  One AI call equals one feedback credit                                                                        \
                                                                                                                \
                                                                                                                \
                                                                                                                \
  Teacher reviews AI generated feedback with warnings visible                                                   \
                                                                                                                \
                                                                                                                \
                                                                                                                \
  Teacher can edit, approve, or regenerate feedback manually                                                    \
                                                                                                                \
                                                                                                                \
                                                                                                                \
  Approved feedback is released to students                                                                     \
                                                                                                                \
                                                                                                                \
                                                                                                                \
  Students view feedback in the three question structure                                                        \
                                                                                                                \
                                                                                                                \
                                                                                                                \
  Students select one next step before proceeding                                                               \
                                                                                                                \
                                                                                                                \
                                                                                                                \
  Students submit one revision                                                                                  \
                                                                                                                \
                                                                                                                \
                                                                                                                \
  Students see a neutral acknowledgement with no success or failure judgement                                   \
                                                                                                                \
                                                                                                                \
                                                                                                                \
  Session level feedback credit usage is visible to the teacher                                                 \
                                                                                                                \
                                                                                                                \
                                                                                                                \
  Session can be ended cleanly with a summary                                                                   \
                                                                                                                \
                                                                                                                \
                                                                                                                \
  Non negotiable constraints                                                                                    \
                                                                                                                \
                                                                                                                \
                                                                                                                \
  No AI calls occur without explicit teacher action                                                             \
                                                                                                                \
                                                                                                                \
                                                                                                                \
  No background or automatic AI behavior                                                                        \
                                                                                                                \
                                                                                                                \
                                                                                                                \
  Validation is warn and log only, never blocking                                                               \
                                                                                                                \
                                                                                                                \
                                                                                                                \
  No completion detection or judgement appears in the student UI                                                \
                                                                                                                \
                                                                                                                \
                                                                                                                \
  Student data is session scoped and ephemeral                                                                  \
                                                                                                                \
                                                                                                                \
                                                                                                                \
  Acceptance criteria                                                                                           \
                                                                                                                \
                                                                                                                \
                                                                                                                \
  A teacher can run a live session with approximately 20 to 25 students                                         \
                                                                                                                \
                                                                                                                \
                                                                                                                \
  The full learning loop works without manual intervention                                                      \
                                                                                                                \
                                                                                                                \
                                                                                                                \
  Behavior matches the locked MVP1 checklist exactly                                                            \
                                                                                                                \
                                                                                                                \
                                                                                                                \
  Classroom flow is stable and predictable                                                                      \
  Payment release conditions for Milestone 1                                                                    \
                                                                                                                \
                                                                                                                \
                                                                                                                \
  Payment for Milestone 1 will be released once all of the following are true:                                  \
                                                                                                                \
                                                                                                                \
                                                                                                                \
  The full classroom learning loop works end to end in a live test session                                      \
                                                                                                                \
                                                                                                                \
                                                                                                                \
  A teacher can run a session with approximately 20 to 25 students                                              \
                                                                                                                \
                                                                                                                \
                                                                                                                \
  No AI feedback is generated without an explicit teacher button click                                          \
                                                                                                                \
                                                                                                                \
                                                                                                                \
  Student submission alone never triggers AI feedback                                                           \
                                                                                                                \
                                                                                                                \
                                                                                                                \
  Validation surfaces only as warnings and never blocks feedback                                                \
                                                                                                                \
                                                                                                                \
                                                                                                                \
  No completion detection or judgement appears in the student interface                                         \
                                                                                                                \
                                                                                                                \
                                                                                                                \
  Feedback credits increment only when a teacher initiates generation                                           \
                                                                                                                \
                                                                                                                \
                                                                                                                \
  Student experience matches the locked MVP1 checklist and v3.1 plan                                            \
                                                                                                                \
                                                                                                                \
                                                                                                                \
  Any critical bugs identified during testing are resolved                                                      \
                                                                                                                \
                                                                                                                \
                                                                                                                \
  Milestone approval is based on observed behaviour in the running system, not partial implementation or        \
  code completion.                                                                                              \
                                                                                                                \
  Milestone 2: "Milestone 1: Core classroom learning loop working end to end,"                                  \
                                                                                                                \
  Amount: $1,100.00                                                                                             \
                                                                                                                \
  View details                                                                                                  \
  RY                                                                                                            \
  Renee Yeowell                                                                                                 \
  10:04 AM                                                                                                      \
  Hi Rahul, For MVP1, I\'92m only sharing the learning principles document. It\'92s not additional scope. It\'92s a      \
  decision guide to help resolve edge cases in a way that preserves learning integrity. Education is my         \
  bag, developing is yours (that's why we'll be a great team) so if you need me to open accounts, please        \
  let me know - and offer guidance. Best wishes, Renee                                                          \
                                                                                                                \
  2 files                                                                                                       \
  LARA_Feedback_Principles 19122025.pdf                                                                         \
  151 kB                                                                                                        \
  guiding principles.docx                                                                                       \
  26 kB                                                                                                         \
  Rahul Kumar                                                                                                   \
  10:45 AM                                                                                                      \
  Thanks Renee , I will check and get back to you soon.                                       this was the file Rahul sent before Renee         \
\pard\tx720\tx1440\tx2160\tx2880\tx3600\tx4320\tx5040\tx5760\tx6480\tx7200\tx7920\tx8640\pardirnatural\partightenfactor0
\cf0   sent the two files : 
\f1\b\fs33 \cf2 LARA Implementation Plan v3.1\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardirnatural\partightenfactor0

\fs24 \cf2 Complete Technical Specification\
Version:
\f2\b0  3.1\

\f1\b Date:
\f2\b0  January 2026\

\f1\b Status:
\f2\b0  MVP1 Pilot Specification - Reliability First\

\f1\b\fs27 Key Changes in v3.1 (from v3.0):\

\f0\b0\fs24 \uc0\u9989 
\f2  
\f1\b Credit-based UI
\f2\b0  - All teacher-facing displays now show "feedback credits" instead of dollar amounts\

\f0 \uc0\u9989 
\f2  
\f1\b No hard blocks
\f2\b0  - ALL validation (including unsafe content) surfaces as warnings only; teacher maintains\
full authority\

\f0 \uc0\u9989 
\f2  
\f1\b Infrastructure confirmed
\f2\b0  - Railway (backend/DB/Redis) + Netlify (frontend) + custom auth + Stripe\

\f1\b\fs27 Table of Contents\

\f2\b0\fs24 1. Executive Summary\
2. MVP1 Scope Boundary\
3. System Overview\
4. Core Principles & Non-Negotiable Requirements\
5. AI Usage Management as First-Class Design Constraint\
6. Architecture Design\
7. Validation Strategy: Warn & Log Only (No Blocks)\
8. Complete User Flows\
9. Classroom Flow & The 25-Student Rush Scenario\
10. Component Specifications\
11. API Design\
12. UI/UX Requirements\
13. Session Management\
14. Feedback Generation System\
15. Logging & Debuggability Strategy\
16. Success Criteria
\f1\b\fs33 1. Executive Summary\

\fs27 1.1 Project Purpose\

\f2\b0\fs24 LARA (Learning Assessment & Response Assistant) is a formative feedback assistant designed to support\
classroom-based writing assessment. The MVP1 version is a reliability-first pilot focused on a single, clear\
learning loop where students submit written responses, receive teacher-approved feedback, and complete one\
revision cycle.\

\f1\b MVP1 is explicitly NOT:\

\f2\b0 A complete or final system\
An optimized or feature-complete product\
A system with automatic AI behavior\

\f1\b MVP1 IS:\

\f2\b0 A safe classroom pilot for observing real teacher and student behavior\
A controlled environment for validating cost predictability\
A foundation for evidence-based refinement\

\f1\b\fs27 1.2 Core Value Proposition\

\fs24 LARA's "Three-Question Guarantee":\

\f2\b0 Every feedback screen must answer:\

\f1\b Where am I going?
\f2\b0  (goal/success criteria)\

\f1\b How am I going?
\f2\b0  (current performance)\

\f1\b Where to next?
\f2\b0  (specific next steps)\
This is the fundamental product differentiator and must be enforced in every feedback interaction.\

\f1\b\fs27 1.3 Key Design Constraints for MVP1\

\fs24 Session-Based Architecture:\

\f2\b0 No persistent student accounts\
All student data is session-scoped and ephemeral\
Teacher maintains external ID-to-name mapping\
Sessions are temporary classroom activities (like Kahoot or Mentimeter)
\f1\b Teacher Oversight & Control:\

\f2\b0 Teacher reviews and approves all feedback before students see it\
Teacher explicitly initiates ALL AI generation (no automatic triggers)\
Teacher can edit feedback with guided suggestions for improvement\
Teacher controls session lifecycle (start/end)\

\f1\b Pedagogical Integrity:\

\f2\b0 All feedback must be specific, descriptive, and improvement-focused\
Strong warnings for unsafe content (ability praise, peer comparison, invented criteria)\
Soft warnings for pedagogical quality (teacher decides)\
Mandatory next step selection before student can proceed\

\f1\b Teacher maintains full authority
\f2\b0  - system never blocks, only warns\

\f1\b AI Usage Transparency & Control:\

\f2\b0 Every AI call is the result of deliberate teacher action (no hidden/automatic spend)\
Teacher has visibility of usage in 
\f1\b credit-based format
\f2\b0  (not dollar amounts)\
System designed with configurable usage caps (tier-ready)\
Predictable, controllable usage that scales linearly with deliberate actions\

\f1\b Reliability First:\

\f2\b0 Simple, debuggable architecture\
Clear failure modes with graceful degradation\
Warn and log, 
\f1\b never block
\f2\b0  (teacher decides on all warnings)\
Evidence-based tightening after pilot observation\

\f1\b\fs33 2. MVP1 Scope Boundary\

\fs27 2.1 Philosophy\

\f2\b0\fs24 MVP1 is a reliability-first classroom pilot, not a complete system. The scope is intentionally constrained to:\
Reduce classroom risk\
Ensure cost predictabilityEnable observation of real teacher and student behavior\
Support evidence-based refinement\
Features are included in MVP1 only if they are essential for the core feedback loop to function safely in a live\
classroom.\

\f1\b\fs27 2.2 Explicitly IN SCOPE for MVP1\

\fs24 Core Feedback Loop (Minimum Viable):\

\f2\b0 Student joins session with 6-digit class code (session-scoped ID)\
Student submits written response (auto-save to browser only)\
Teacher clicks "Generate Feedback" button (deliberate action)\
AI generates feedback draft (Claude Haiku 4.5)\
Teacher reviews feedback (sees warnings, never blocked)\
Teacher approves or edits feedback (can dismiss all warnings)\
Student receives feedback (WebSocket notification)\
Student selects one next step (mandatory, cannot proceed without)\
Student submits one revision (no automatic feedback)\
Session complete (neutral acknowledgment message)\

\f1\b Teacher Functionality (Essential Only):\

\f2\b0 Create task with success criteria (minimum 1 required)\
One-click criteria selection + custom option\
Start session, generate class code with QR code\
View live student submission list (real-time via WebSocket)\
View student submissions marked "Ready for feedback"\
Click "Generate Feedback" for selected students (one at a time or batch)\
Review AI-generated feedback with 
\f1\b all warnings visible
\f2\b0  (none blocking)\
Edit feedback with vague comment detection and one-click suggestions\
Approve feedback (warnings can be dismissed)\

\f1\b View AI usage indicator at session level
\f2\b0  (credit-based: "7 feedbacks used this session")\
View one basic class summary: Most common next steps (simple frequency list)\
End session with 
\f1\b credit usage summary
\f2\b0  displayed\
Download simple CSV export (session IDs, responses, feedback, credits used per student)
\f1\b Student Functionality (Essential Only):\

\f2\b0 Join session (no account, session-scoped ID only)\
View task with fixed goal box (always visible)\
Submit response with auto-save to browser sessionStorage only\
Wait for feedback (clear, calm messaging)\
Receive feedback after teacher approval (WebSocket notification)\
See feedback in three-question format (goal always visible first)\
Select one next step (cannot proceed without selection)\
View optional model examples (generic, not student-specific)\
Submit one revision\
See neutral acknowledgment message (no success/failure language)\

\f1\b System Requirements (Essential Only):\

\f2\b0 Session-based architecture (Redis ephemeral storage)\
Teacher accounts and authentication (custom, not managed service)\

\f1\b Configurable usage caps in credits
\f2\b0  (tier-ready, not exposed in UI)\
AI usage tracking per teacher, per session (in credits)\

\f1\b All validation surfaces as warnings only
\f2\b0  (no blocks, teacher decides)\
Strong warnings for unsafe content (ability praise, peer comparison, invented criteria)\
Soft warnings for pedagogical quality (vague comments, missing types, low specificity)\
WebSocket real-time updates\
Mobile-responsive UI\
HTTPS, basic security\

\f1\b AI usage transparency
\f2\b0  (teacher-visible credit indicators)\
All AI calls logged with initiator (teacher name/ID)\

\f1\b\fs27 2.3 Explicitly OUT OF SCOPE / Deferred Post-MVP1\

\fs24 Automatic or Speculative AI Behavior:\

\f0\b0 \uc0\u10060 
\f2  Automatic AI generation on student submission (deferred - teacher-initiated only in MVP1)\

\f0 \uc0\u10060 
\f2  Automatic regeneration on validation failure (deferred - teacher-initiated only)\

\f0 \uc0\u10060 
\f2  Pre-generation or speculative feedback (never - violates cost principle)\

\f0 \uc0\u10060 
\f2  Background AI calls for analytics (never - violates cost principle)
\f0 \uc0\u10060 
\f2  AI-powered insights or pattern extraction (deferred)\

\f1\b Completion Detection & Evaluation:\

\f0\b0 \uc0\u10060 
\f2  Student-facing completion signals (success/failure, ticks, warnings)\

\f0 \uc0\u10060 
\f2  Evaluative language about student performance\

\f0 \uc0\u10060 
\f2  "You completed your next step!" messaging\

\f0 \uc0\u10060 
\f2  Progress bars, completion percentages\

\f0 \uc0\u10060 
\f2  Any system judgment of student work quality\

\f1\b Note:
\f2\b0  Completion detection may run internally for logging/analysis but must not appear in student UI\

\f1\b Advanced Validation & Enforcement:\

\f0\b0 \uc0\u10060 
\f2  
\f1\b Hard blocks for any reason
\f2\b0  (including pedagogical quality or unsafe content)\

\f0 \uc0\u10060 
\f2  Mandatory enforcement of task/process/self-reg balance\

\f0 \uc0\u10060 
\f2  Automatic retry loops on validation failure\

\f0 \uc0\u10060 
\f2  Complex heuristics for quality assessment\

\f1\b Note:
\f2\b0  All validation checks surface as warnings in MVP1; teacher decides on all\

\f1\b Multiple Revisions & Iterations:\

\f0\b0 \uc0\u10060 
\f2  Multiple revision cycles per session\

\f0 \uc0\u10060 
\f2  Automatic feedback on revisions (student can request, deferred)\

\f0 \uc0\u10060 
\f2  Iterative improvement loops\

\f0 \uc0\u10060 
\f2  Revision history tracking\

\f1\b Advanced Analytics & Reporting:\

\f0\b0 \uc0\u10060 
\f2  Rich dashboards with charts and visualizations\

\f0 \uc0\u10060 
\f2  AI-powered common misconceptions extraction\

\f0 \uc0\u10060 
\f2  Success criteria achievement percentages\

\f0 \uc0\u10060 
\f2  Student behavior patterns over time\

\f0 \uc0\u10060 
\f2  Predictive analytics or recommendations\

\f0 \uc0\u10060 
\f2  Downloadable reports beyond basic CSV\

\f1\b Alternative Learning Modes:\

\f0\b0 \uc0\u10060 
\f2  Peer feedback mode
\f0 \uc0\u10060 
\f2  Self-assessment mode\

\f0 \uc0\u10060 
\f2  Teacher-to-teacher feedback\

\f0 \uc0\u10060 
\f2  Collaborative writing\

\f1\b Cross-Session Features:\

\f0\b0 \uc0\u10060 
\f2  Student history across sessions\

\f0 \uc0\u10060 
\f2  Longitudinal tracking\

\f0 \uc0\u10060 
\f2  Portfolio mode\

\f0 \uc0\u10060 
\f2  Student accounts or profiles\

\f0 \uc0\u10060 
\f2  Learning pathways or progressions\

\f1\b Advanced AI Features:\

\f0\b0 \uc0\u10060 
\f2  Custom model fine-tuning\

\f0 \uc0\u10060 
\f2  Alternative AI providers or model switching\

\f0 \uc0\u10060 
\f2  User-configurable system prompts\

\f0 \uc0\u10060 
\f2  Dynamic model selection based on task complexity\

\f0 \uc0\u10060 
\f2  AI quality self-assessment\

\f1\b Pricing & Tier UI:\

\f0\b0 \uc0\u10060 
\f2  Exposed tier selection (Starter/Classroom/Multi-Class)\

\f0 \uc0\u10060 
\f2  In-app upgrade flows\

\f0 \uc0\u10060 
\f2  Billing management interface\

\f0 \uc0\u10060 
\f2  Payment processing UI\

\f0 \uc0\u10060 
\f2  Usage alerts or notifications\

\f1\b Note:
\f2\b0  Tier structure exists in backend but is not exposed in MVP1 UI\

\f1\b Advanced UI/UX:\

\f0\b0 \uc0\u10060 
\f2  Custom animations or transitions\

\f0 \uc0\u10060 
\f2  Pixel-perfect brand implementation\

\f0 \uc0\u10060 
\f2  Mobile app (MVP1 is web-only, mobile-responsive)\

\f0 \uc0\u10060 
\f2  Offline mode or PWA features\

\f0 \uc0\u10060 
\f2  Accessibility beyond WCAG AA baseline
\f1\b\fs27 2.4 Why This Scope?\

\fs24 What We're Learning in MVP1:\

\f2\b0 1. 2. 3. 4. 5. 6. 7. Does the core feedback loop work reliably in live classrooms?\
How do teachers use the "Generate Feedback" button (individually vs. batch)?\
What is actual AI cost under real classroom conditions?\
Which validation warnings do teachers find helpful vs. noisy?\
Do students engage with next step selection meaningfully?\
What breaks under stress (25 students, tight timing)?\
How long does teacher review actually take?\

\f1\b What We're NOT Ready to Learn Yet:\

\f2\b0 Optimal number of revision cycles (need MVP1 working first)\
Whether automatic generation is safe (violates cost control)\
Which advanced features teachers want (need core loop validated)\
Ideal analytics depth (need basic patterns observed)\
This scope keeps MVP1 
\f1\b simple, safe, observable, and refinable
\f2\b0 .\

\f1\b\fs33 3. System Overview\

\fs27 3.1 System Type\

\f2\b0\fs24 LARA is a web-based, real-time classroom activity platform for formative writing assessment.\

\f1\b Think of it as:
\f2\b0  Kahoot or Mentimeter, but for writing feedback instead of quizzes or polls.\

\f1\b Not:
\f2\b0  Video conferencing, homework platform, or persistent learning management system.\

\f1\b\fs27 3.2 Primary Users\

\fs24 Teachers:\

\f2\b0 Create writing tasks with success criteria\
Start classroom sessions with shareable class codes\
Monitor live student submissions\
Initiate AI feedback generation (deliberate button click)Review, edit, and approve AI-generated feedback\
Monitor AI usage in session (calm, credit-based indicator)\
View simple class-level patterns\
End sessions when activity concludes\

\f1\b Students:\

\f2\b0 Join sessions using 6-digit class codes (no account required)\
Submit written responses to assigned tasks\
Wait for teacher to approve feedback (clear messaging)\
Receive structured feedback (after teacher approval)\
Choose one next step for improvement\
Submit one revision\
Complete session (neutral acknowledgment, no evaluation)\

\f1\b\fs27 3.3 Core Workflow\

\f2\b0\fs21 \cf3 Teacher Creates Task \uc0\u8594  Starts Session \u8594  Generates Class Code\
\cf2 Teacher Creates Task \uc0\u8594  Starts Session \u8594  Generates Class Code\
\cf3 Students Join \uc0\u8594  Write Response \u8594  Submit \u8594  Marked "Ready for Feedback"\
\cf2 Students Join \uc0\u8594  Write Response \u8594  Submit \u8594  Marked "Ready for Feedback"\
\cf3 Teacher Clicks "Generate Feedback" (Deliberate Action)\
\cf2 Teacher Clicks "Generate Feedback" (Deliberate Action)\
\cf3 AI Generates Feedback \uc0\u8594  Teacher Reviews/Approves \u8594  Student Receives\
\cf2 AI Generates Feedback \uc0\u8594  Teacher Reviews/Approves \u8594  Student Receives\
Student Selects Next Step \uc0\u8594  Revises Response \u8594  Completes \cf3 Student Selects Next Step \uc0\u8594  Revises Response \u8594  Completes\
\cf2 \uc0\u8595  \cf3 \uc0\u8595 \
\cf2 \uc0\u8595  \cf3 \uc0\u8595 \
\cf2 \uc0\u8595  \cf3 \uc0\u8595 \
\cf2 \uc0\u8595  \cf3 \uc0\u8595 \
\cf2 \uc0\u8595  \cf3 \uc0\u8595 \
\cf2 Teacher Ends Session \uc0\u8594  Data Cleared (except summary for teacher) \cf3 Teacher Ends Session \uc0\u8594  Data Cleared (except summary for teacher)\

\f1\b\fs24 \cf2 Critical MVP1 Principle:
\f2\b0  AI is invoked only when teacher takes deliberate action (clicks "Generate Feedback"\
button). No automatic generation, no hidden spend.\

\f1\b\fs33 4. Core Principles & Non-Negotiable Requirements\

\fs27 4.1 LARA's 10 (+1) Feedback Principles\

\f2\b0\fs24 These principles guide every design decision:\

\f1\b Principle 1: Formative by design, not just comments
\f2\b0 Feedback must exist within a learning loop: clarifying goals, checking evidence of learning, and informing next\
actions.\

\f1\b Implementation Impact:\

\f2\b0 Goal must be visible before feedback appears\
Feedback must include actionable next steps\
Revision opportunity must be immediate\

\f1\b Principle 2: Always answer three questions\

\f2\b0 Every feedback output must clearly address:\

\f1\b Where am I going?
\f2\b0  (goal/success criteria)\

\f1\b How am I going?
\f2\b0  (current performance)\

\f1\b Where to next?
\f2\b0  (specific next steps)\

\f1\b Implementation Impact:\

\f2\b0 Non-collapsible goal box at top of feedback screen\
Structured strengths and growth areas\
Mandatory next steps with selection requirement\

\f1\b Principle 3: Focus on task, process, and self-regulation\

\f2\b0 Prioritize feedback about the work itself, strategies used, and how students manage learning. Avoid fixed-ability\
judgments.\

\f1\b Implementation Impact (MVP1 - Warnings Only):\

\f2\b0 Each feedback comment tagged with type (task/process/self_reg)\
Validation encourages at least one of each type (soft warning if missing, teacher can approve anyway)\

\f1\b Strong warning
\f2\b0  for ability praise (teacher can dismiss)\

\f1\b Principle 4: Be specific, descriptive, and improvement-focused\

\f2\b0 No vague "good job" or "add more detail". Every critique must point to concrete features and suggest\
improvement.\

\f1\b Implementation Impact (MVP1 - Warnings Only):\

\f2\b0 Specificity validation checks for content anchors (warning if low, teacher decides)\
Vague comment detection triggers teacher suggestions (teacher can dismiss)Growth areas should include: work reference + reason + direction (encouraged, not enforced)\

\f1\b Principle 5: Timely, concise, and usable now\

\f2\b0 Feedback designed to be given during or soon after learning, kept short, focused on 1-2 high-leverage priorities.\

\f1\b Implementation Impact:\

\f2\b0 Feedback generated in same session as submission (when teacher initiates)\
Mobile-optimized (CTA \uc0\u8804 30 characters)\
Focused on immediate revision, not future tasks\

\f1\b Principle 6: Build feedback literacy and student agency\

\f2\b0 Prompt students to interpret feedback, self-assess, choose actions, and reflect on next steps.\

\f1\b Implementation Impact:\

\f2\b0 Mandatory next step selection (student must choose)\
Model examples available (not rewrites)\
Reflection prompts in waiting states\

\f1\b Principle 7: Emotionally safe and motivational\

\f2\b0 Language is respectful, normalizes mistakes, balances strengths with improvements.\

\f1\b Implementation Impact:\
Strong warning
\f2\b0  for harsh criticism, ability judgments, peer comparisons (teacher can dismiss)\
Strengths always included (soft warning if missing)\
Growth-oriented framing\

\f1\b Principle 8: Tightly aligned to clear intentions and criteria\

\f2\b0 Every message explicitly connects to learning intentions and success criteria.\

\f1\b Implementation Impact:\

\f2\b0 Teacher-defined criteria displayed exactly as written\
Universal Learning Expectations when no criteria provided\

\f1\b Strong warning
\f2\b0  if AI invents content-specific goals (teacher can dismiss)\

\f1\b Principle 9: Support dialogue and multiple feedback roles\

\f2\b0 Outputs can be used for teacher\uc0\u8594 student, peer, and self-feedback. Help teachers adjust instruction.
\f1\b Implementation Impact:\

\f2\b0 Teacher review interface\
Simple class-level patterns (most common next steps)\
(Peer/self modes: post-MVP)\

\f1\b Principle 10: High impact, low workload\

\f2\b0 Target high-leverage feedback aspects, deliver short, high-quality guidance.\

\f1\b Implementation Impact:\

\f2\b0 Default to 2-4 targeted points\
One-click criteria selection for teachers\
Teacher-initiated feedback generation (deliberate, controlled)\

\f1\b Principle 11: LARA does not remember students. Teachers may.\

\f2\b0 Session-scoped IDs only. No PII storage. Teacher maintains external mapping.\

\f1\b Implementation Impact:\

\f2\b0 Ephemeral session storage\
Automatic data deletion after session end\
Teacher can export session summaries with session IDs\

\f1\b\fs27 4.2 Non-Negotiable Product Requirements\

\fs24 A. Start with the Goal (Where am I going?) - REQUIRED\
Rule:
\f2\b0  No feedback may be displayed unless a goal box is rendered first.\

\f1\b Goal Box Requirements:\

\f2\b0 Fixed position at top of screen (non-collapsible)\
Always visible during feedback review\
Must display either:\
Teacher's exact criteria (if provided), OR\
Universal Learning Expectations (if no teacher criteria)\

\f1\b Universal Learning Expectations (Default):Main text:
\f2\b0  "For this task, success means answering the question directly, explaining your ideas clearly with\
evidence, and signposting your thinking."\

\f1\b Expandable detail:
\f2\b0  "This means addressing what the question asks, using relevant examples, organising your\
ideas logically, and guiding the reader with clear topic sentences and linking words."\

\f1\b Critical Rules:\

\f2\b0 Teacher-defined criteria hold full authority (never override or expand)\
LARA must NOT guess, infer, or fabricate task-specific goals (
\f1\b strong warning
\f2\b0  if detected, teacher can\
dismiss)\
Universal expectations describe HOW to think/communicate, not WHAT content to include\

\f1\b B. Describe Current Performance (How am I going?) - Structured, Never Blob Text\
Rule:
\f2\b0  Feedback must appear in two structured cards, never as unstructured text.\

\f1\b Card 1: "What's working well"\

\f2\b0 Specific and descriptive (soft warning if vague)\
Tied to success criteria or universal expectations\
Focused on task and process, not ability\

\f1\b Card 2: "What needs attention"\

\f2\b0 Should identify specific part of student's work (soft warning if vague)\
Should explain why it needs attention\
Should guide toward improvement without rewriting\

\f1\b Forbidden Vague Phrases:\

\f2\b0 These trigger soft warnings with suggestions (teacher can dismiss):\
"Good job"\
"Add more detail"\
"Be clearer"\
"Explain more"\
"Work on your structure"\

\f1\b Encouraged Specific Versions:\

\f2\b0 "Add more detail about the environmental impact, using one concrete example."\
"Be clearer by defining the term 'migration' before you use it."
\f1\b C. Offer 1-3 Concrete Next Steps (Where to next?) - Mandatory Choice\
Rule:
\f2\b0  Student cannot exit feedback screen until one next step is selected.\

\f1\b Next Step Requirements:\

\f2\b0 Each next step should include (encouraged via soft warning, not enforced):\
1. Action verb (add, revise, define, explain, restructure, link, clarify, check)\
2. Specific target (paragraph, sentence, concept, signposting, evidence)\
3. Success indicator (brief statement of what will be better)\

\f1\b D. Balance Task/Process/Self-Regulation (Feedback Type Mix)\
Rule (Softened for MVP1):
\f2\b0  Feedback should ideally include a mix of all three types. Missing types trigger soft\
teacher warning with suggestion. Teacher can approve without all three.\

\f1\b Not Enforced in MVP1:
\f2\b0  Mandatory balance on every feedback instance.\

\f1\b E. Timely and Immediately Actionable\
CTA (Call-to-Action) Button:\

\f2\b0 Every feedback response must include at least one required action student can take NOW.\

\f1\b CTA Button Requirements:\

\f2\b0 Action-specific (includes action verb + specific target)\
Directly linked to a Next Step\
Mobile-optimized (\uc0\u8804 30 characters)\

\f1\b\fs33 5. AI Usage Management as First-Class Design Constraint\

\fs27 5.1 Design Philosophy\

\fs24 Core Principle:
\f2\b0  AI usage is a deliberate classroom resource under teacher control, not a hidden system cost.\
AI usage management is elevated to a first-class design constraint in LARA MVP1, with the same priority as\
pedagogical integrity and teacher oversight. This approach ensures:\
Predictable, controllable usage that teachers can understand\
No surprises or hidden spend\
Trust through transparencyFoundation for sustainable pricing model\
Teacher agency over when AI is invoked\

\f1\b NEW in v3.1:
\f2\b0  Teachers see usage in 
\f1\b credit-based format
\f2\b0  (not dollar amounts) to simplify decision-making and\
reduce cognitive load.\

\f1\b\fs27 5.2 Recommended Claude Model for MVP1\

\fs24 Recommended Model:
\f2\b0  Claude Haiku 4.5\

\f1\b Model String:
\f2\b0  
\fs21\fsmilli10800 claude-haiku-4-5-20251001\

\f1\b\fs24 Justification (Cost Predictability & Classroom Reliability First):\

\f2\b0 1. 
\f1\b Cost Predictability Under Burst Conditions:\

\f2\b0 Haiku 4.5: ~$0.50 per million input tokens, ~$2.00 per million output tokens\
Most stable token usage across different input lengths in Claude family\
Predictable response lengths = predictable per-student costs\
25-student burst scenario: If teacher generates all 25 feedbacks at once, cost is ~$0.30-0.35 total\
(predictable, not variable)\
Low variance means teachers can trust the usage indicator\
2. 
\f1\b Latency Stability in Live Classrooms:\

\f2\b0 Fastest response time in Claude family (~2-4 seconds average)\
Lowest timeout risk during peak classroom usage\
If teacher generates batch of 10 students, all complete within 30-40 seconds\
Reduces "waiting for feedback" friction during lessons\
3. 
\f1\b Cost Control Enables Iteration:\

\f2\b0 5x cheaper than Sonnet = 5x more pilot iterations for same budget\
Teachers can experiment with batch generation without cost anxiety\
Supports evidence-based refinement (try different prompts, observe results)\
Failure/retry costs remain manageable\
4. 
\f1\b Quality Sufficient for Teacher-Reviewed Feedback:\

\f2\b0 Haiku 4.5 handles structured feedback generation reliably\
Teacher review catches any quality gaps (approval required anyway)\
Pedagogy enforced through system prompt and validation, not model intelligence\
MVP1 priority is "safe and observable", not "perfect output"\
5. 
\f1\b Fallback/Downgrade Option:
\f2\b0 6. If Haiku proves insufficient during pilot (poor quality, too many teacher edits):\
Easy code swap to Sonnet 4.5 (same API, same JSON structure)\
Cost increase is known and acceptable (~5x)\
Decision based on evidence, not speculation\

\f1\b Alternative Considered (Not Recommended for MVP1):\
Claude Sonnet 4.5:
\f2\b0  Better quality but 5x cost, slower response, unnecessary for teacher-reviewed\
feedback in pilot\

\f1\b GPT-4 Turbo:
\f2\b0  Less reliable for structured JSON output, inconsistent pricing, higher vendor lock-in\
risk\

\f1\b Why This Choice Aligns with MVP1 Goals:\

\f2\b0 Prioritizes cost discipline over maximum capability\
Supports evidence-based decisions (affordable to iterate)\
Enables teacher trust (predictable costs, fast responses)\
Preserves upgrade path if pilot shows need\

\f1\b\fs27 5.3 No Hidden or Automatic Token Spend\

\fs24 Design Rule:
\f2\b0  Every AI API call must be the result of a deliberate teacher action.\

\f1\b What This Means in MVP1:\

\f0\b0 \uc0\u9989 
\f1\b  Allowed (Deliberate Teacher Actions):\

\f2\b0 1. Teacher clicks "Generate Feedback" button for one student \uc0\u8594  AI call\
2. Teacher clicks "Generate Feedback" button for multiple students (batch) \uc0\u8594  AI call per selected student\
3. Teacher clicks "Regenerate Feedback" button \uc0\u8594  New AI call for that student\
4. (Optional, Deferred) Student clicks "Request feedback on revision" \uc0\u8594  AI call only if teacher has enabled\
this feature\

\f0 \uc0\u10060 
\f1\b  Forbidden (Hidden/Automatic Spend):\

\f2\b0 Student submits response \uc0\u8594  Automatic AI generation \u8594  
\f1\b NO.
\f2\b0  Student submission marks as "Ready for\
feedback", waits for teacher\
Validation fails \uc0\u8594  Automatic regeneration \u8594  
\f1\b NO.
\f2\b0  Teacher sees warning, decides to regenerate or edit\
Teacher starts session \uc0\u8594  Pre-generate feedback for common responses \u8594  
\f1\b NO.
\f2\b0  Never.\
Background job \uc0\u8594  Extract common misconceptions \u8594  
\f1\b NO.
\f2\b0  Analytics use frequency analysis, not AIStudent opens revision editor \uc0\u8594  Speculatively prepare feedback \u8594  
\f1\b NO.
\f2\b0  Only on explicit teacher/student\
action\

\f1\b How This Works in Practice:\
Student Submission Flow:\

\f2\b0 1. Student clicks "Submit for Feedback"\
2. Response saved to Redis\
3. Student row in teacher dashboard updates: "Ready for feedback" (green badge)\
4. 
\f1\b No AI call made yet\

\f2\b0 5. Student sees: "Your response has been submitted. Your teacher will prepare feedback shortly."\

\f1\b Teacher Generation Flow:\

\f2\b0 1. Teacher sees list of students marked "Ready for feedback"\
2. Teacher has three options:\
Click "Generate" next to one student \uc0\u8594  AI call for that student only\
Select multiple students (checkboxes) \uc0\u8594  Click "Generate for Selected (5)" \u8594  AI calls for 5\
students\
Click "Generate All Ready (12)" \uc0\u8594  AI calls for all 12 marked students\
3. Each AI call increments usage counter (in credits)\
4. Teacher sees real-time updates: "Generating feedback... (3 of 5 complete)"\

\f1\b Why This Design:\

\f2\b0 Teacher controls when usage is incurred\
Teacher can pace AI usage during lesson (generate 5 now, 5 later)\
No surprise usage from automatic triggers\
Usage indicator accurately reflects teacher's deliberate choices\
Supports future tiered pricing (teacher knows exactly what counts toward limit)\

\f1\b Technical Implementation:\

\f2\b0 No event-driven workers that auto-trigger AI\
No cron jobs or scheduled AI calls\
Every AI call logged with: 
\fs21\fsmilli10800 initiator: "teacher"\
"regenerate\
feedback"\
_\

\fs24 , 
\fs21\fsmilli10800 teacher\
_\
id 
\fs24 , 
\fs21\fsmilli10800 action: "generate\
_\
feedback" |
\fs24 Audit trail shows 1:1 mapping between teacher actions and AI calls\

\f1\b Transparency Guarantee:\

\f2\b0 Teacher can view usage log and verify every AI call traces to their explicit button click.\

\f1\b\fs27 5.4 Teacher-Visible Usage Indicators (Credit-Based)\

\fs24 Design Principle:
\f2\b0  Surface AI usage clearly to teachers without inducing anxiety.\

\f1\b NEW in v3.1:
\f2\b0  All teacher-facing displays show 
\f1\b feedback credits used/remaining
\f2\b0  instead of dollar amounts.\

\f1\b Location 1: Session Dashboard Header (Always Visible)\
During Active Session:\

\f2\b0\fs21 \uc0\u9484 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9488  \cf3 \uc0\u9484 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9488 \
\cf2 \uc0\u9474  Session: ABC123 \u9474  \cf3 \uc0\u9474  Session: ABC123 \u9474 \
\cf2 \uc0\u9474  Students: 12 joined, 7 submitted \u9474  \cf3 \uc0\u9474  Students: 12 joined, 7 submitted \u9474 \
\cf2 \uc0\u9474  Feedbacks used this session: 7 \u9474  \cf3 \uc0\u9474  Feedbacks used this session: 7 \u9474 \
\uc0\u9474  Your plan: 193 of 800 feedbacks remaining \u9474 \
\cf2 \uc0\u9474  Your plan: 193 of 800 feedbacks remaining \u9474 \
\uc0\u9474  \u9474  \cf3 \uc0\u9474  \u9474 \
\cf2 \uc0\u9474  Ready for feedback: 5 students \u9474  \cf3 \uc0\u9474  Ready for feedback: 5 students \u9474 \
\cf2 \uc0\u9474  [Generate All 5] (uses 5 feedbacks) \u9474  \cf3 \uc0\u9474  [Generate All 5] (uses 5 feedbacks) \u9474 \
\cf2 \uc0\u9492 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9496  \cf3 \uc0\u9492 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9496 \

\f1\b\fs24 \cf2 After Session Ends:\

\f2\b0\fs21 \uc0\u9484 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9488  \cf3 \uc0\u9484 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9488 \
\cf2 \uc0\u9474  Session Summary \u9474  \cf3 \uc0\u9474  Session Summary \u9474 \
\cf2 \uc0\u9474  Students: 25 joined, 23 completed \u9474  \cf3 \uc0\u9474  Students: 25 joined, 23 completed \u9474 \
\cf2 \uc0\u9474  Feedbacks used: 23 \u9474  \cf3 \uc0\u9474  Feedbacks used: 23 \u9474 \
\uc0\u9474  Your plan: 165 of 800 feedbacks remaining \u9474 \
\cf2 \uc0\u9474  Your plan: 165 of 800 feedbacks remaining \u9474 \
\uc0\u9474  \u9474  \cf3 \uc0\u9474  \u9474 \
\uc0\u9474  [Download CSV] [View Timeline] \u9474 \
\cf2 \uc0\u9474  [Download CSV] [View Timeline] \u9474 \
\uc0\u9492 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9496  \cf3 \uc0\u9492 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9496 \

\f1\b\fs24 \cf2 Location 2: Weekly Summary Email (Optional)\

\f2\b0\fs21 \cf3 Subject: Your LARA Usage This Week\
\cf2 Subject: Your LARA Usage This Week\
Hi [Teacher Name], \cf3 Hi [Teacher Name],\
\cf2 This week you used LARA for 3 sessions: \cf3 This week you used LARA for 3 sessions:\cf2 - Monday (25 students): 25 feedbacks \cf3 - Monday (25 students): 25 feedbacks\
\cf2 - Wednesday (18 students): 18 feedbacks \cf3 - Wednesday (18 students): 18 feedbacks\
\cf2 - Friday (22 students): 22 feedbacks \cf3 - Friday (22 students): 22 feedbacks\
\cf2 Total this week: 65 feedbacks \cf3 Total this week: 65 feedbacks\
\cf2 Your plan: 735 of 800 feedbacks remaining this month \cf3 Your plan: 735 of 800 feedbacks remaining this month\
\cf2 Keep up the great work! \cf3 Keep up the great work!\

\f1\b\fs24 \cf2 Key UX Principles:\
Credit-based language
\f2\b0  ("feedbacks" not dollars or tokens)\

\f1\b Simple numbers
\f2\b0  (7 feedbacks, not 7.3 or fractional credits)\

\f1\b Calm, matter-of-fact tone
\f2\b0  (no warnings unless truly near limit)\

\f1\b Always contextualized:
\f2\b0  per session, per week, vs. plan limit\

\f1\b No red/yellow/green color coding
\f2\b0  (reduces anxiety, no judgment)\

\f1\b Shows usage alongside value
\f2\b0  (number of students helped)\

\f1\b When Usage Approaches Limit (80% threshold):\

\f0\b0\fs21 \uc0\u8505 
\f2  FYI: You've used about 640 of your 800 monthly feedbacks.
\f0 \cf3 \uc0\u8505 
\f2  FYI: You've used about 640 of your 800 monthly feedbacks.\
You can continue using LARA normally.\
\cf2 You can continue using LARA normally.\
We'll let you know before you reach the limit. \cf3 We'll let you know before you reach the limit.\

\f1\b\fs24 \cf2 When Usage Reaches Limit:\

\f2\b0\fs21 Your monthly limit has been reached (800 feedbacks). \cf3 Your monthly limit has been reached (800 feedbacks).\
\cf2 To generate more feedback this month: \cf3 To generate more feedback this month:\
\cf2 - Upgrade your plan, or \cf3 - Upgrade your plan, or\
\cf2 - Wait until next month (resets on [date])\cf3 - Wait until next month (resets on [date])\
You can still review and write feedback manually.\
\cf2 You can still review and write feedback manually.\
[View Plan Options] \cf3 [View Plan Options]\

\f1\b\fs24 \cf2 Location 3: Per-Student Feedback Cost (Optional Detail View)\
In feedback review modal footer:
\f2\b0\fs21 Feedback for Student 7 \cf3 Feedback for Student 7\
\cf2 This feedback used 1 credit \cf3 This feedback used 1 credit\
\cf2 [Approve] [Edit] [Regenerate (uses 1 credit)] \cf3 [Approve] [Edit] [Regenerate (uses 1 credit)]\

\f1\b\fs24 \cf2 Only shown if teacher has opted into "detailed usage view" in settings.
\f2\b0  Hidden by default to reduce clutter.\

\f1\b\fs27 5.5 Future Tier Support (Designed Now, Not Exposed Yet)\

\fs24 Design Principle:
\f2\b0  Build tier structure into architecture now so future pricing tiers require only config changes,\
not rework.\

\f1\b Proposed Tiers (Backend Ready, Not in MVP1 UI):\
Tier 1: Starter\

\f2\b0 Limit: 200 feedbacks/month (~8-10 sessions of 25 students)\
Use Case: Individual teachers piloting, small classes, occasional use\
Overage: Soft block (teacher can write manually), upgrade prompt\

\f1\b Tier 2: Classroom\

\f2\b0 Limit: 800 feedbacks/month (~30-35 sessions of 25 students)\
Use Case: Teachers using LARA regularly (3-4 times/week)\
Overage: Soft block, upgrade prompt\

\f1\b Tier 3: Multi-Class\

\f2\b0 Limit: 2400 feedbacks/month (~100 sessions of 25 students)\
Use Case: Teachers with multiple classes, department-wide use\
Overage: Soft block, contact sales for enterprise options\

\f1\b Technical Implementation:\
Backend Data Storage:\

\f2\b0 Each teacher account stores:\

\fs21\fsmilli10800 plan\
_\
tier 
\fs24 : 
\fs21\fsmilli10800 "starter" | "classroom" | "multi\
_\
class"\
monthly_\
feedback\
_\
limit 
\fs24 : number (based on tier)\

\fs21\fsmilli10800 feedbacks\
used\
this\
month 
\fs24 : number\

\fs21\fsmilli10800 _\
_\
_\
billing_\
cycle\
start\
_\
_\
date 
\fs24 : ISO date
\fs21\fsmilli10800 overage\
behavior 
\fs24 : 
\fs21\fsmilli10800 "soft\
_\
_\
block" 
\fs24 (always for MVP1)\

\f1\b Usage Limit Check:\

\f2\b0 Before teacher clicks "Generate Feedback":\
Check if 
\fs21\fsmilli10800 feedbacks\
used\
this\
_\
_\
_\
month < monthly_\
feedback\
_\
limit\

\fs24 If limit reached and plan uses 
\fs21\fsmilli10800 soft\
_\
block 
\fs24 behavior:\
Button shows disabled state with message: "Monthly limit reached. [Upgrade] or write manually."\
If under limit:\
Button works normally\
Usage is incremented\

\f1\b Configurable Caps (Backend):\

\f2\b0\fs18 javascript\

\fs21 const \cf4 const\cf2  TIER_CONFIGS \cf5 TIER_CONFIGS\cf2  = \cf6 =\cf2  \{ \cf3 \{\
\cf2 starter \cf7 starter\cf2 : \cf6 :\cf2  \{ \cf3 \{\
\cf2 monthly_limit \cf7 monthly_limit\cf2 : \cf6 :\cf2  200 \cf5 200\cf2 , \cf3 ,\
\cf2 overage_behavior \cf7 overage_behavior\cf2 : \cf6 :\cf2  'soft_block' \cf8 'soft_block'\
\cf2 \} \cf3 \}\cf2 , \cf3 ,\
\cf2 classroom \cf7 classroom\cf2 : \cf6 :\cf2  \{ \cf3 \{\
\cf2 monthly_limit \cf7 monthly_limit\cf2 : \cf6 :\cf2  800 \cf5 800\cf2 , \cf3 ,\
\cf2 overage_behavior \cf7 overage_behavior\cf2 : \cf6 :\cf2  'soft_block' \cf8 'soft_block'\
\cf2 \} \cf3 \}\cf2 , \cf3 ,\
\cf2 multi_class \cf7 multi_class\cf2 : \cf6 :\cf2  \{ \cf3 \{\
\cf2 monthly_limit \cf7 monthly_limit\cf2 : \cf6 :\cf2  2400 \cf5 2400\cf2 , \cf3 ,\
\cf2 overage_behavior \cf7 overage_behavior\cf2 : \cf6 :\cf2  'soft_block' \cf8 'soft_block'\
\cf2 \} \cf3 \}\
\cf2 \} \cf3 \}\

\f1\b\fs24 \cf2 Safe Failure Behavior (Tier-Agnostic):\

\f2\b0 Regardless of tier, when limit reached:\
1. "Generate Feedback" button becomes disabled\
2. Teacher sees clear message about limit\
3. Manual feedback option always available\
4. Student sees: "Your teacher is preparing your feedback" (no error)\
5. Session continues normally\
6. No broken UI, no student-facing errors
\f1\b Usage Indicator Adapts to Tier:\

\f2\b0 For Starter: "32 of 200 feedbacks remaining this month (16%)"\
For Classroom: "553 of 800 feedbacks remaining this month (69%)"\
For Multi-Class: "1195 of 2400 feedbacks remaining this month (50%)"\

\f1\b Why Build This Now:\

\f2\b0 Prevents rework later (tier changes = config update, not code rewrite)\
Usage tracking accurate from day one\
Teachers understand LARA is metered from start\
Foundation for sustainable business model\
Clean upgrade path when tiers are exposed post-MVP1\

\f1\b MVP1 Configuration:
\f2\b0  All pilot teachers assigned 
\f1\b "Classroom" tier
\f2\b0  (800 feedbacks/month). Tiers not exposed\
in UI. This gives room for experimentation without hitting limits.\

\f1\b\fs27 5.6 Usage-Driven Design Decisions in MVP1\

\fs24 Decisions Made Based on Usage Constraint:\

\f2\b0 1. 
\f1\b Teacher-Initiated Generation Only (Not Automatic)\

\f2\b0 Old approach: Student submits \uc0\u8594  Automatic AI call\
New approach: Student submits \uc0\u8594  Marked "Ready" \u8594  Teacher clicks "Generate"\

\f1\b Impact:
\f2\b0  Teacher controls pace and volume, no surprise bursts\

\f1\b Benefit:
\f2\b0  Predictable usage, teacher agency, supports tiered pricing\
2. 
\f1\b No Auto-Regeneration on Validation Warning\

\f2\b0 Old approach: Validation fails \uc0\u8594  Auto-regenerate (2-3x cost per student)\
New approach: Show warning to teacher, teacher decides to regenerate or edit\

\f1\b Savings:
\f2\b0  60-80% (most warnings addressable by edit, not regeneration)\
3. 
\f1\b No Background Analytics Generation\

\f2\b0 Old approach: AI-powered "common misconceptions" extraction\
New approach: Simple frequency analysis of next steps (no AI)\

\f1\b Savings:
\f2\b0  100% (analytics don't consume AI budget)\
4. 
\f1\b Optional Revision Feedback\

\f2\b0 Old approach: Auto-generate feedback on every revisionNew approach: Student or teacher can request revision feedback (not automatic)\

\f1\b Savings:
\f2\b0  50-70% (many students just want to finish)\
Deferred to post-MVP1\
5. 
\f1\b No Pre-Generation or Speculation\

\f2\b0 Old approach: Generate feedback speculatively while student is writing\
New approach: Generate only when teacher clicks button\

\f1\b Savings:
\f2\b0  100% for abandoned drafts or students who don't submit\
6. 
\f1\b Haiku Over Sonnet\

\f2\b0 Old consideration: Use Sonnet for best quality\
MVP1 choice: Use Haiku for cost predictability\

\f1\b Savings:
\f2\b0  80% per generation (~$0.0013 vs ~$0.0065)\
Quality sufficient for teacher-reviewed feedback\

\f1\b Total Impact:\

\f2\b0 These decisions keep average cost at ~$0.012 per student instead of ~$0.05+ per student (4x savings) while\
maintaining teacher control and pedagogical quality.\

\f1\b Internal Cost Tracking (Backend Only):\

\f2\b0 While teachers see credit-based UI, the backend tracks:\
Actual dollar cost per feedback\
Token counts (input/output)\
Model used\
Latency per generation\
This data is used for:\
Business intelligence\
Tier pricing decisions\
Model selection optimization\
Post-pilot analysis\

\f1\b Teachers never see these technical details
\f2\b0  - they only see simple credit counts.
\f1\b\fs33 6. Architecture Design\

\fs27 6.1 High-Level System Architecture\

\f2\b0\fs21 \uc0\u9484 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9488  \cf3 \uc0\u9484 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9488 \
\cf2 \uc0\u9474  LARA MVP1 System \u9474  \cf3 \uc0\u9474  LARA MVP1 System \u9474 \
\uc0\u9474  (Teacher-Initiated AI Only, Credit-Based UI) \u9474 \
\cf2 \uc0\u9474  (Teacher-Initiated AI Only, Credit-Based UI) \u9474 \
\uc0\u9500 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9508  \cf3 \uc0\u9500 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9508 \
\cf2 \uc0\u9474  \u9474  \cf3 \uc0\u9474  \u9474 \
\cf2 \uc0\u9474  \u9484 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9488  \u9484 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9488  \u9474  \cf3 \uc0\u9474  \u9484 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9488  \u9484 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9488  \u9474 \
\uc0\u9474  \u9474  Teacher Client \u9474  \u9474  Student Client \u9474  \u9474 \
\cf2 \uc0\u9474  \u9474  Teacher Client \u9474  \u9474  Student Client \u9474  \u9474 \
\uc0\u9474  \u9474  (React/Netlify) \u9474  \u9474  (React/Netlify) \u9474  \u9474  \cf3 \uc0\u9474  \u9474  (React/Netlify) \u9474  \u9474  (React/Netlify) \u9474  \u9474 \
\cf2 \uc0\u9474  \u9492 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9516 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9496  \u9492 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9516 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9496  \u9474  \cf3 \uc0\u9474  \u9492 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9516 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9496  \u9492 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9516 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9496  \u9474 \
\cf2 \uc0\u9474  \u9474  \u9474  \u9474  \cf3 \uc0\u9474  \u9474  \u9474  \u9474 \
\cf2 \uc0\u9474  \u9492 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9516 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9496  \u9474  \cf3 \uc0\u9474  \u9492 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9516 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9496  \u9474 \
\cf2 \uc0\u9474  \u9474  \u9474  \cf3 \uc0\u9474  \u9474  \u9474 \
\cf2 \uc0\u9474  \u9484 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9660 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9488  \u9474  \cf3 \uc0\u9474  \u9484 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9660 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9488  \u9474 \
\cf2 \uc0\u9474  \u9474  API Gateway \u9474  \u9474  \cf3 \uc0\u9474  \u9474  API Gateway \u9474  \u9474 \
\uc0\u9474  \u9474  (REST + WS) \u9474  \u9474 \
\cf2 \uc0\u9474  \u9474  (REST + WS) \u9474  \u9474 \
\uc0\u9474  \u9474  (Railway) \u9474  \u9474  \cf3 \uc0\u9474  \u9474  (Railway) \u9474  \u9474 \
\cf2 \uc0\u9474  \u9492 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9516 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9496  \u9474  \cf3 \uc0\u9474  \u9492 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9516 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9496  \u9474 \
\cf2 \uc0\u9474  \u9474  \u9474  \cf3 \uc0\u9474  \u9474  \u9474 \
\cf2 \uc0\u9474  \u9484 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9532 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9488  \u9474  \cf3 \uc0\u9474  \u9484 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9532 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9488  \u9474 \
\cf2 \uc0\u9474  \u9474  \u9474  \u9474  \u9474  \cf3 \uc0\u9474  \u9474  \u9474  \u9474  \u9474 \
\cf2 \uc0\u9474  \u9484 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9660 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9488  \u9484 \u9472 \u9472 \u9472 \u9472 \u9472 \u9660 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9488  \u9484 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9660 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9488  \u9474  \cf3 \uc0\u9474  \u9484 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9660 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9488  \u9484 \u9472 \u9472 \u9472 \u9472 \u9472 \u9660 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9488  \u9484 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9660 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9488  \u9474 \
\uc0\u9474  \u9474  Session \u9474  \u9474  Feedback \u9474  \u9474  Validation \u9474  \u9474 \
\cf2 \uc0\u9474  \u9474  Session \u9474  \u9474  Feedback \u9474  \u9474  Validation \u9474  \u9474 \
\uc0\u9474  \u9474  Manager \u9474  \u9474  Generator \u9474  \u9474  Engine \u9474  \u9474  \cf3 \uc0\u9474  \u9474  Manager \u9474  \u9474  Generator \u9474  \u9474  Engine \u9474  \u9474 \
\uc0\u9474  \u9474  \u9474  \u9474  (Teacher- \u9474  \u9474  (Warn Only) \u9474  \u9474 \
\cf2 \uc0\u9474  \u9474  \u9474  \u9474  (Teacher- \u9474  \u9474  (Warn Only) \u9474  \u9474 \
\uc0\u9474  \u9474  \u9474  \u9474  Initiated) \u9474  \u9474  \u9474  \u9474  \cf3 \uc0\u9474  \u9474  \u9474  \u9474  Initiated) \u9474  \u9474  \u9474  \u9474 \
\cf2 \uc0\u9474  \u9492 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9516 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9496  \u9492 \u9472 \u9472 \u9472 \u9472 \u9472 \u9516 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9496  \u9492 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9516 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9496  \u9474  \cf3 \uc0\u9474  \u9492 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9516 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9496  \u9492 \u9472 \u9472 \u9472 \u9472 \u9472 \u9516 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9496  \u9492 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9516 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9496  \u9474 \
\cf2 \uc0\u9474  \u9474  \u9474  \u9474  \u9474  \cf3 \uc0\u9474  \u9474  \u9474  \u9474  \u9474 \
\cf2 \uc0\u9474  \u9474  \u9484 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9660 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9660 \u9472 \u9472 \u9472 \u9472 \u9472 \u9488  \u9474  \cf3 \uc0\u9474  \u9474  \u9484 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9660 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9660 \u9472 \u9472 \u9472 \u9472 \u9472 \u9488  \u9474 \
\cf2 \uc0\u9474  \u9474  \u9474  AI Usage Controller \u9474  \u9474  \cf3 \uc0\u9474  \u9474  \u9474  AI Usage Controller \u9474  \u9474 \
\uc0\u9474  \u9474  \u9474  - Teacher Action Validation \u9474  \u9474 \
\cf2 \uc0\u9474  \u9474  \u9474  - Teacher Action Validation \u9474  \u9474 \
\uc0\u9474  \u9474  \u9474  - Credit/Cap Check \u9474  \u9474  \cf3 \uc0\u9474  \u9474  \u9474  - Credit/Cap Check \u9474  \u9474 \
\uc0\u9474  \u9474  \u9474  - Usage Tracking (Credits) \u9474  \u9474 \
\cf2 \uc0\u9474  \u9474  \u9474  - Usage Tracking (Credits) \u9474  \u9474 \
\uc0\u9474  \u9474  \u9474  - Cost Calculation (Backend Only) \u9474  \u9474  \cf3 \uc0\u9474  \u9474  \u9474  - Cost Calculation (Backend Only) \u9474  \u9474 \
\cf2 \uc0\u9474  \u9474  \u9492 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9516 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9496  \u9474  \cf3 \uc0\u9474  \u9474  \u9492 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9516 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9496  \u9474 \
\cf2 \uc0\u9474  \u9474  \u9474  \u9474  \cf3 \uc0\u9474  \u9474  \u9474  \u9474 \
\cf2 \uc0\u9474  \u9474  \u9484 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9660 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9488  \u9474  \cf3 \uc0\u9474  \u9474  \u9484 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9660 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9488  \u9474 \
\cf2 \uc0\u9474  \u9474  \u9474  AI Model Integration \u9474  \u9474  \cf3 \uc0\u9474  \u9474  \u9474  AI Model Integration \u9474  \u9474 \
\cf2 \uc0\u9474  \u9474  \u9474  (Anthropic Claude Haiku 4.5) \u9474  \u9474  \cf3 \uc0\u9474  \u9474  \u9474  (Anthropic Claude Haiku 4.5) \u9474  \u9474 \
\uc0\u9474  \u9474  \u9474  - Teacher-Initiated Only \u9474  \u9474 \cf2 \uc0\u9474  \u9474  \u9474  - Teacher-Initiated Only \u9474  \u9474 \cf3 \uc0\u9474  \u9474  \u9474  - No Automatic Triggers \u9474  \u9474 \
\cf2 \uc0\u9474  \u9474  \u9474  - No Automatic Triggers \u9474  \u9474 \
\uc0\u9474  \u9474  \u9492 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9496  \u9474  \cf3 \uc0\u9474  \u9474  \u9492 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9496  \u9474 \
\cf2 \uc0\u9474  \u9474  \u9474  \cf3 \uc0\u9474  \u9474  \u9474 \
\cf2 \uc0\u9474  \u9484 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9660 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9488  \u9474  \cf3 \uc0\u9474  \u9484 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9660 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9488  \u9474 \
\cf2 \uc0\u9474  \u9474  Session Storage (Redis / Railway) \u9474  \u9474  \cf3 \uc0\u9474  \u9474  Session Storage (Redis / Railway) \u9474  \u9474 \
\cf2 \uc0\u9474  \u9474  - Active Sessions \u9474  \u9474  \cf3 \uc0\u9474  \u9474  - Active Sessions \u9474  \u9474 \
\cf2 \uc0\u9474  \u9474  - Session-Scoped Student IDs \u9474  \u9474  \cf3 \uc0\u9474  \u9474  - Session-Scoped Student IDs \u9474  \u9474 \
\cf2 \uc0\u9474  \u9474  - Student Responses (Ephemeral) \u9474  \u9474  \cf3 \uc0\u9474  \u9474  - Student Responses (Ephemeral) \u9474  \u9474 \
\cf2 \uc0\u9474  \u9474  - "Ready for Feedback" Queue \u9474  \u9474  \cf3 \uc0\u9474  \u9474  - "Ready for Feedback" Queue \u9474  \u9474 \
\uc0\u9474  \u9474  - Teacher-Approved Feedback \u9474  \u9474 \
\cf2 \uc0\u9474  \u9474  - Teacher-Approved Feedback \u9474  \u9474 \
\uc0\u9474  \u9492 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9496  \u9474  \cf3 \uc0\u9474  \u9492 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9496  \u9474 \
\cf2 \uc0\u9474  \u9474  \cf3 \uc0\u9474  \u9474 \
\cf2 \uc0\u9474  \u9484 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9488  \u9474  \cf3 \uc0\u9474  \u9484 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9488  \u9474 \
\cf2 \uc0\u9474  \u9474  Persistent Storage (PostgreSQL / Railway) \u9474  \u9474  \cf3 \uc0\u9474  \u9474  Persistent Storage (PostgreSQL / Railway) \u9474  \u9474 \
\uc0\u9474  \u9474  - Teacher Accounts & Custom Auth \cf2 \uc0\u9474  \u9474  - Teacher Accounts & Custom Auth \cf3 \uc0\u9474  \u9474 \
\cf2 \uc0\u9474  \u9474 \
\cf3 \uc0\u9474  \u9474  - Plan Tiers & Credit Limits \cf2 \uc0\u9474  \u9474  - Plan Tiers & Credit Limits \cf3 \uc0\u9474  \u9474 \
\cf2 \uc0\u9474  \u9474 \
\cf3 \uc0\u9474  \u9474  - Task Definitions & Success Criteria \u9474  \u9474 \
\cf2 \uc0\u9474  \u9474  - Task Definitions & Success Criteria \u9474  \u9474 \
\uc0\u9474  \u9474  - Session Summaries (Teacher Reference) \u9474  \u9474  \u9474  - AI Usage Logs (Credits + Internal Cost) \u9474  \u9474  \cf3 \uc0\u9474  \u9474  - Session Summaries (Teacher Reference) \u9474  \u9474 \
\cf2 \uc0\u9474  \cf3 \uc0\u9474  \u9474  - AI Usage Logs (Credits + Internal Cost) \u9474  \u9474 \
\uc0\u9474  \u9474  - Teacher Action Logs \u9474  \u9474 \
\cf2 \uc0\u9474  \u9474  - Teacher Action Logs \u9474  \u9474 \
\uc0\u9474  \u9492 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9496  \u9474  \cf3 \uc0\u9474  \u9492 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9496  \u9474 \
\cf2 \uc0\u9474  \u9474  \cf3 \uc0\u9474  \u9474 \
\cf2 \uc0\u9474  \u9484 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9488  \u9474  \cf3 \uc0\u9474  \u9484 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9488  \u9474 \
\cf2 \uc0\u9474  \u9474  Stripe Integration \u9474  \u9474  \cf3 \uc0\u9474  \u9474  Stripe Integration \u9474  \u9474 \
\cf2 \uc0\u9474  \u9474  - Subscription Management \u9474  \u9474  \cf3 \uc0\u9474  \u9474  - Subscription Management \u9474  \u9474 \
\cf2 \uc0\u9474  \u9474  - Plan Upgrades/Downgrades \u9474  \u9474  \cf3 \uc0\u9474  \u9474  - Plan Upgrades/Downgrades \u9474  \u9474 \
\uc0\u9474  \u9474  - Webhooks \u8594  Update Credit Limits \cf2 \uc0\u9474  \u9474  - Webhooks \u8594  Update Credit Limits \cf3 \uc0\u9474  \u9474 \
\cf2 \uc0\u9474  \u9474 \
\uc0\u9474  \u9492 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9496  \u9474  \cf3 \uc0\u9474  \u9492 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9496  \u9474 \
\cf2 \uc0\u9474  \u9474  \cf3 \uc0\u9474  \u9474 \
\cf2 \uc0\u9492 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9496  \cf3 \uc0\u9492 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9496 \

\f1\b\fs27 \cf2 6.2 Key Architectural Decisions\

\fs24 Session-Based, No Student Persistence:\

\f2\b0 Student data exists ONLY during active sessions\
Session-scoped IDs generated on join (e.g., "Student 1", "Student 2")\
Automatic data deletion after session ends (with grace period for recovery)\

\f1\b Teacher-Centric Data Model:\

\f2\b0 All persistent data tied to teacher accounts\
Teachers own tasks, sessions, and summariesStudents are anonymous participants with no cross-session identity\

\f1\b Teacher-Initiated AI Invocation (Critical for MVP1):\

\f2\b0 AI calls happen ONLY when teacher clicks "Generate Feedback" button\
No event-driven triggers, no background jobs\
Every AI call logged with teacher ID and action type\
Usage tracked per teacher, per session (in credits)\

\f1\b Credit-Based Usage Tracking (NEW in v3.1):\

\f2\b0 Teacher accounts have 
\fs21\fsmilli10800 monthly_\
feedback\
_\
limit 
\fs24 field (in credits)\
System checks limit before allowing "Generate" action\
Credits are simple: 1 feedback generation = 1 credit used\
Backend also tracks actual dollar cost (for business intelligence, not shown to teachers)\

\f1\b Validation Pipeline - Warn Only (NEW in v3.1):\
All validation surfaces as warnings
\f2\b0  (no blocks, even for unsafe content)\
Pre-Flight Validation: Before AI call (checks input validity)\
Post-Generation Validation: After AI call (checks output quality, logs warnings)\
Teacher Review: Final human check with all warnings visible\

\f1\b Teacher decides on every warning
\f2\b0  (can approve, edit, or regenerate)\

\f1\b Mobile-First UI:\

\f2\b0 Responsive design from ground up\
CTA character limits (\uc0\u8804 30 chars) enforced\
Fixed goal box optimized for small screens\
Touch-friendly next step selection\

\f1\b\fs27 6.3 Technology Stack (Confirmed)\

\fs24 Backend:\
Language:
\f2\b0  Node.js 18+ (LTS version with async/await support)\

\f1\b API Framework:
\f2\b0  Express.js with TypeScript\

\f1\b Hosting:
\f2\b0  Railway
\f1\b Database:
\f2\b0  PostgreSQL 15 (Railway) - ACID compliance for teacher data, usage tracking, tier configs\

\f1\b Session Storage:
\f2\b0  Redis (Railway) - high-performance ephemeral storage\

\f1\b AI Integration:
\f2\b0  Anthropic TypeScript SDK (Claude Haiku 4.5)\

\f1\b WebSockets:
\f2\b0  Socket.io (for real-time updates)\

\f1\b Authentication:
\f2\b0  Custom (not managed service) - handle password reset, email verification manually\

\f1\b Payments:
\f2\b0  Stripe - subscriptions, webhooks for plan updates\

\f1\b Frontend:\
Framework:
\f2\b0  React 18 with TypeScript\

\f1\b Hosting:
\f2\b0  Netlify\

\f1\b State Management:
\f2\b0  Zustand or React Context (lightweight)\

\f1\b Routing:
\f2\b0  React Router v6\

\f1\b UI Library:
\f2\b0  Tailwind CSS + Headless UI (accessible components)\

\f1\b Form Handling:
\f2\b0  React Hook Form + Zod (validation)\

\f1\b Real-Time:
\f2\b0  Socket.io client library\

\f1\b Infrastructure:\
Backend/DB/Redis:
\f2\b0  Railway (all backend services)\

\f1\b Frontend:
\f2\b0  Netlify (React SPA)\

\f1\b CDN:
\f2\b0  Netlify Edge (automatic)\

\f1\b Monitoring:
\f2\b0  Sentry (errors) + Railway metrics\

\f1\b CI/CD:
\f2\b0  GitHub Actions\

\f1\b Development Tools:\
Version Control:
\f2\b0  Git + GitHub\

\f1\b API Documentation:
\f2\b0  OpenAPI/Swagger (auto-generated)\

\f1\b Communication:\

\f2\b0 Railway backend \uc0\u8596  Netlify frontend: REST APIs + WebSocket connections\
Stripe webhooks \uc0\u8594  Railway backend (plan updates)
\f1\b\fs33 7. Validation Strategy: Warn & Log Only (No Blocks)\

\fs27 7.1 Philosophy for MVP1\

\fs24 Core Principle:
\f2\b0  Validation serves as an observer and support system, not a gatekeeper.\

\f1\b NEW in v3.1:
\f2\b0  The system 
\f1\b never blocks
\f2\b0  feedback from being shown. All validation - including detection of\
unsafe content - surfaces as 
\f1\b warnings that teachers can dismiss
\f2\b0 .\
For MVP1 classroom pilots, validation is designed to:\

\f1\b Warn
\f2\b0  teachers about potential quality or safety issues\

\f1\b Log
\f2\b0  patterns for post-session analysis\

\f1\b Support
\f2\b0  teacher judgment, not replace it\

\f1\b Avoid
\f2\b0  mid-lesson friction or complexity\

\f1\b Respect
\f2\b0  teacher authority on all decisions\

\f1\b Tightening Happens Post-MVP1:\

\f2\b0 After observing 5-10 real classroom sessions, we'll have evidence about:\
Which warnings teachers find helpful vs. noisy\
False positive rates for heuristics\
Which quality issues actually matter in practice\
Whether teachers want any warnings promoted to blocks (unlikely, but possible)\

\f1\b MVP1 Enforcement Spectrum:\

\f2\b0\fs21 \cf3 ALL WARNINGS SILENT LOGGING\
\cf2 ALL WARNINGS SILENT LOGGING\
(Teacher Decides) (Analysis Only) \cf3 (Teacher Decides) (Analysis Only)\
\cf2 | | \cf3 | |\
\cf2 | | \cf3 | |\
Unsafe content Word overlap\
\cf2 Unsafe content Word overlap\
Vague comments Response length \cf3 Vague comments Response length\
Missing types Token usage\
\cf2 Missing types Token usage\
Low specificity Latency metrics \cf3 Low specificity Latency metrics\
\cf2 Invented criteria \cf3 Invented criteria\

\f1\b\fs24 \cf2 Critical Change from v3.0:
\f2\b0  There are 
\f1\b no hard blocks
\f2\b0  in MVP1. Everything is a warning.
\f1\b\fs27 7.2 Strong Warnings (Unsafe Content)\

\f2\b0\fs24 These validation rules flag 
\f1\b potentially unsafe content
\f2\b0  but 
\f1\b do not prevent
\f2\b0  teacher from approving:\

\f1\b 1. Ability Praise\
Examples:\

\f2\b0 "You're smart"\
"You're talented"\
"You're a brilliant writer"\
"You're gifted at math"\

\f1\b Teacher Warning:\

\f0\b0\fs21 \uc0\u9888 
\f2  WARNING: Ability Praise Detected
\f0 \cf3 \uc0\u9888 
\f2  WARNING: Ability Praise Detected\
\cf2 This feedback contains language that praises innate ability \cf3 This feedback contains language that praises innate ability\
\cf2 ("you're smart"), which research shows can create fixed mindset \cf3 ("you're smart"), which research shows can create fixed mindset\
\cf2 beliefs and reduce student resilience. \cf3 beliefs and reduce student resilience.\
\cf2 Suggested alternatives: \cf3 Suggested alternatives:\

\f0 \uc0\u9744 
\f2  "Your explanation shows clear logical thinking"\

\f0 \cf2 \uc0\u9744 
\f2  "Your explanation shows clear logical thinking"\

\f0 \cf3 \uc0\u9744 
\f2  "You've improved your structure significantly"\

\f0 \cf2 \uc0\u9744 
\f2  "You've improved your structure significantly"\

\f0 \uc0\u9744 
\f2  [Edit manually] 
\f0 \cf3 \uc0\u9744 
\f2  [Edit manually]\
\cf2 [Use suggestion] [Edit] [Regenerate] [Approve anyway] \cf3 [Use suggestion] [Edit] [Regenerate] [Approve anyway]\

\f1\b\fs24 \cf2 Logged:
\f2\b0  Yes - to analyze how often this occurs and how teachers respond\

\f1\b Why Warning (Not Block):
\f2\b0  Teacher may have context (e.g., student needs confidence boost in this specific\
situation)\

\f1\b 2. Peer Comparison\
Examples:\

\f2\b0 "Better than most of the class"\
"Top student in this group"\
"Not as good as others"\
"Compared to your peers, you're ahead/behind"\

\f1\b Teacher Warning:
\f0\b0\fs21 \uc0\u9888 
\f2  WARNING: Peer Comparison Detected
\f0 \cf3 \uc0\u9888 
\f2  WARNING: Peer Comparison Detected\
\cf2 This feedback compares the student to their peers, which creates \cf3 This feedback compares the student to their peers, which creates\
\cf2 competitive rather than growth-oriented learning environments. \cf3 competitive rather than growth-oriented learning environments.\
\cf2 This violates formative feedback principles. \cf3 This violates formative feedback principles.\
\cf2 [Edit] [Regenerate] [Approve anyway] \cf3 [Edit] [Regenerate] [Approve anyway]\

\f1\b\fs24 \cf2 Logged:
\f2\b0  Yes\

\f1\b Why Warning (Not Block):
\f2\b0  Teacher maintains authority; system educates but doesn't prevent\

\f1\b 3. Invented Content-Specific Criteria\
Examples:\

\f2\b0 AI adds "Compare two political systems" when teacher only said "Writing/structure"\
AI adds "Describe causes of World War I" when teacher provided no content criteria\

\f1\b Teacher Warning:\

\f0\b0\fs21 \uc0\u9888 
\f2  WARNING: AI May Have Invented Content Goals
\f0 \cf3 \uc0\u9888 
\f2  WARNING: AI May Have Invented Content Goals\
\cf2 The feedback appears to reference content-specific criteria \cf3 The feedback appears to reference content-specific criteria\
\cf2 that you did not provide. LARA should not guess what content \cf3 that you did not provide. LARA should not guess what content\
\cf2 you're teaching. \cf3 you're teaching.\
\cf2 Review carefully before approving. \cf3 Review carefully before approving.\
\cf2 [Edit] [Regenerate] [Approve anyway] \cf3 [Edit] [Regenerate] [Approve anyway]\

\f1\b\fs24 \cf2 Logged:
\f2\b0  Yes\

\f1\b Why Warning (Not Block):
\f2\b0  AI detection may have false positives; teacher can verify\

\f1\b 4. Structurally Incomplete Feedback\
Examples:\

\f2\b0 Zero strengths\
Zero growth areas\
Zero next steps\
Empty goal box
\f1\b Teacher Warning:\

\f0\b0\fs21 \uc0\u9888 
\f2  WARNING: Incomplete Feedback Structure
\f0 \cf3 \uc0\u9888 
\f2  WARNING: Incomplete Feedback Structure\
\cf2 This feedback is missing required components: \cf3 This feedback is missing required components:\
\cf2 - No strengths listed \cf3 - No strengths listed\
\cf2 - No next steps provided \cf3 - No next steps provided\
\cf2 This violates the three-question structure. \cf3 This violates the three-question structure.\
\cf2 [Regenerate] [Write manually] \cf3 [Regenerate] [Write manually]\

\f1\b\fs24 \cf2 Logged:
\f2\b0  Yes - likely AI generation failure\

\f1\b Why Warning (Not Block):
\f2\b0  Teacher can manually fix or regenerate\

\f1\b\fs27 7.3 Soft Warnings (Quality Issues)\

\f2\b0\fs24 These validation checks flag potential quality issues with 
\f1\b suggestions for improvement
\f2\b0 :\

\f1\b 1. Vague Comments Without Specifics\
Detection Logic:\

\f2\b0 Scan comment for vague phrases without specific references:\
"Add more detail" (without specifying where or what kind)\
"Be clearer" (without explaining how)\
"Good job" (without specific evidence)\
"Explain more" (without direction)\
"Work on structure" (without identifying which structural element)\

\f1\b Teacher Warning:
\f0\b0\fs21 \uc0\u9888 
\f2  This comment may be too general
\f0 \cf3 \uc0\u9888 
\f2  This comment may be too general\
\cf2 "Add more detail" \cf3 "Add more detail"\
\cf2 Consider making it more specific: \cf3 Consider making it more specific:\

\f0 \cf2 \uc0\u9744 
\f2  "Add more detail about environmental impact with one example" 
\f0 \cf3 \uc0\u9744 
\f2  "Add more detail about environmental impact with one example"\

\f0 \cf2 \uc0\u9744 
\f2  "Add more detail to paragraph 2 by including evidence from the text" 
\f0 \cf3 \uc0\u9744 
\f2  "Add more detail to paragraph 2 by including evidence from the text"\

\f0 \cf2 \uc0\u9744 
\f2  [Edit manually] 
\f0 \cf3 \uc0\u9744 
\f2  [Edit manually]\
\cf2 [Use suggestion] [Keep as is] \cf3 [Use suggestion] [Keep as is]\

\f1\b\fs24 \cf2 Action:
\f2\b0  Show warning with one-click suggestions, allow teacher override\

\f1\b Logged:
\f2\b0  Yes - to analyze which warnings teachers dismiss vs. use\

\f1\b Why Soft:
\f2\b0  Teacher might intentionally want broad comment for student autonomy, but usually specificity is\
better\

\f1\b 2. Missing Feedback Type (Task/Process/Self-Reg)\
Detection Logic:\

\f2\b0 Check if feedback includes at least one comment tagged as:\
Task feedback (about the work itself)\
Process feedback (about strategies used)\
Self-regulation feedback (about managing learning)\

\f1\b Teacher Warning (If One Type Missing):\

\f0\b0\fs21 \uc0\u8505 
\f2  This feedback focuses mainly on task and process
\f0 \cf3 \uc0\u8505 
\f2  This feedback focuses mainly on task and process\
\cf2 Consider adding a self-regulation comment: \cf3 Consider adding a self-regulation comment:\

\f0 \cf2 \uc0\u9744 
\f2  "Before submitting, read the question again and check each paragraph answers it" 
\f0 \cf3 \uc0\u9744 
\f2  "Before submitting, read the question again and check each paragraph answers it"\

\f0 \cf2 \uc0\u9744 
\f2  "Re-read your work out loud to notice where links between ideas are missing" 
\f0 \cf3 \uc0\u9744 
\f2  "Re-read your work out loud to notice where links between ideas are missing"\

\f0 \cf2 \uc0\u9744 
\f2  [Add manually] 
\f0 \cf3 \uc0\u9744 
\f2  [Add manually]\
\cf2 [Add suggestion] [Approve as is] \cf3 [Add suggestion] [Approve as is]\

\f1\b\fs24 \cf2 Action:
\f2\b0  Show gentle reminder with suggestions, allow approval without change\

\f1\b Logged:
\f2\b0  Yes\

\f1\b Why Soft:
\f2\b0  Type balance is ideal but not always necessary (some tasks are primarily task-focused), teacher\
knows context
\f1\b 3. Low Specificity (Content Anchor Check)\
Detection Logic:\

\f2\b0 Check if growth area comment contains at least one content anchor:\
Paragraph reference ("paragraph 2", "your opening", "final section")\
Quoted student text or term\
Concept from student's response\
Structural reference ("when you explained X...", "in your argument about Y...")\

\f1\b Teacher Warning (If No Anchors Detected):\

\f0\b0\fs21 \uc0\u9888 
\f2  This comment may not reference student's specific work
\f0 \cf3 \uc0\u9888 
\f2  This comment may not reference student's specific work\
\cf2 "You should explain your reasoning more clearly" \cf3 "You should explain your reasoning more clearly"\
\cf2 Consider adding a specific reference: \cf3 Consider adding a specific reference:\

\f0 \cf2 \uc0\u9744 
\f2  "In paragraph 2, explain why coastal erosion leads to habitat loss\'97add one sentence" 
\f0 \cf3 \uc0\u9744 
\f2  "In paragraph 2, explain why coastal erosion leads to habitat loss\'97add one sentence"\

\f0 \cf2 \uc0\u9744 
\f2  "When you mentioned 'impact', add an example (e.g., what happens to wildlife)" 
\f0 \cf3 \uc0\u9744 
\f2  "When you mentioned 'impact', add an example (e.g., what happens to wildlife)"\

\f0 \cf2 \uc0\u9744 
\f2  [Edit manually] 
\f0 \cf3 \uc0\u9744 
\f2  [Edit manually]\
\cf2 [Use suggestion] [Keep as is] \cf3 [Use suggestion] [Keep as is]\

\f1\b\fs24 \cf2 Action:
\f2\b0  Show warning with suggestions, allow override\

\f1\b Logged:
\f2\b0  Yes\

\f1\b Why Soft:
\f2\b0  Heuristic may produce false positives, teacher knows full context of student's work\

\f1\b 4. ATQ or Signposting Issue Not Addressed\
Detection Logic:\

\f2\b0 If growth area mentions "didn't answer question" or "ATQ" \uc0\u8594  check if at least one next step addresses\
answering the question\
If growth area mentions "signposting" or "linking" or "flow" \uc0\u8594  check if at least one next step addresses\
signposting\

\f1\b Teacher Warning (If Mismatch Detected):
\f0\b0\fs21 \uc0\u8505 
\f2  Growth area mentions answering the question, but no next step addresses this
\f0 \cf3 \uc0\u8505 
\f2  Growth area mentions answering the question, but no next step addresses this\
\cf2 Consider adding: \cf3 Consider adding:\

\f0 \cf2 \uc0\u9744 
\f2  "Check paragraph 1: Does it answer 'what' and 'why'?" 
\f0 \cf3 \uc0\u9744 
\f2  "Check paragraph 1: Does it answer 'what' and 'why'?"\

\f0 \cf2 \uc0\u9744 
\f2  "Add a sentence at the start of paragraph 2 showing how this answers the question" 
\f0 \cf3 \uc0\u9744 
\f2  "Add a sentence at the start of paragraph 2 showing how this answers the question"\

\f0 \cf2 \uc0\u9744 
\f2  [Add manually] 
\f0 \cf3 \uc0\u9744 
\f2  [Add manually]\
\cf2 [Add suggestion] [Approve as is] \cf3 [Add suggestion] [Approve as is]\

\f1\b\fs24 \cf2 Action:
\f2\b0  Show reminder, allow approval\

\f1\b Logged:
\f2\b0  Yes\

\f1\b Why Soft:
\f2\b0  Teacher might address this verbally in class, or growth area phrasing might be interpretable\
differently\

\f1\b\fs27 7.4 Silent Logging (No Teacher Interruption)\

\f2\b0\fs24 These checks 
\f1\b run in background
\f2\b0  for post-session analysis only:\

\f1\b 1. Word Overlap Heuristic\
Logic:
\f2\b0  Count overlapping content words between comment and student response\

\f1\b Action:
\f2\b0  Log overlap score, no teacher warning\

\f1\b Why Silent:
\f2\b0  Too noisy for MVP1, false positives likely, want data before deciding if useful\

\f1\b 2. Response Length vs Feedback Length\
Logic:
\f2\b0  Track if feedback length is proportional to student response length\

\f1\b Action:
\f2\b0  Log ratio, no warning\

\f1\b Why Silent:
\f2\b0  No clear threshold yet, want evidence before creating rule\

\f1\b 3. CTA Length Compliance\
Logic:
\f2\b0  Check if CTA is \uc0\u8804 30 characters\

\f1\b Action:
\f2\b0  If >30 characters \uc0\u8594  log warning, attempt auto-truncation, show original + truncated to teacher in\
review\

\f1\b Why Logged:
\f2\b0  Character limit important for mobile, but teacher should verify truncation didn't change meaning\

\f1\b\fs27 7.5 No Automatic Regeneration in MVP1\

\fs24 Critical Change from v2:Old Approach (v2):\

\f2\b0 Validation fails \uc0\u8594  Auto-regenerate (up to 2 retries)\
Teacher sees result after regeneration attempts\

\f1\b New Approach (MVP1):\

\f2\b0 Validation runs after generation\
If 
\f1\b strong warning
\f2\b0  (unsafe content) \uc0\u8594  Teacher sees warning with clear explanation, can approve, edit, or\
regenerate\
If 
\f1\b soft warnings
\f2\b0  \uc0\u8594  Teacher sees feedback WITH warning badges, can approve as-is, edit, or regenerate\
Regeneration is ALWAYS teacher-initiated, never automatic\

\f1\b Why This Change:\

\f2\b0 Respects teacher agency (teacher decides if warning matters)\
Reduces AI usage (no automatic retry loops)\
Supports learning (teacher sees what AI produced, can teach from it)\
Aligns with "warn and log, not block" philosophy\

\f1\b Teacher Workflow:\

\f2\b0 1. Teacher clicks "Generate Feedback" for Student 7\
2. AI generates feedback\
3. Validation runs:\
Strong warning found \uc0\u8594  Show warning with clear explanation and suggestions\
Soft warnings found \uc0\u8594  Show feedback with 
\f0 \uc0\u9888 
\f2  badges next to flagged comments\
No issues \uc0\u8594  Show feedback normally\
4. Teacher reviews, sees warnings, chooses:\
"Approve as is" (dismisses warnings)\
"Edit" (fixes warnings manually)\
"Regenerate" (triggers new AI call, uses 1 credit)\

\f1\b\fs27 7.6 Validation Logging\

\f2\b0\fs24 Every validation run is logged with:
\f1\b What Gets Logged:\

\f2\b0 Each validation check records:\

\fs21\fsmilli10800 logging_\
tier 
\fs24 : 
\fs21\fsmilli10800 "validation\
results"\
_\
timestamp\
session\
id 
\fs24 , 
\fs21\fsmilli10800 student\
_\
_\
id\
strong_\
warnings\
_\
triggered 
\fs24 : array (ability praise, peer comparison, invented criteria, incomplete structure)\

\fs21\fsmilli10800 soft\
_\
warnings\
_\
shown 
\fs24 : array (vague comments, missing types, low specificity, ATQ mismatch)\

\fs21\fsmilli10800 silent\
_\
observations 
\fs24 : object (word overlap scores, text lengths)\

\fs21\fsmilli10800 teacher\
_\
action 
\fs24 : 
\fs21\fsmilli10800 "approved\
with\
_\
_\
warnings" | "edited" | "regenerated" | "dismissed\
all\
_\
_\
warnings"\
warnings\
_\
dismissed 
\fs24 : array (which specific warnings teacher dismissed)\

\f1\b Post-Session Analysis:\

\f2\b0 After 5-10 pilot sessions, review logs to answer:\
How often did strong warnings trigger?\
How often did teachers approve with warnings vs. edit vs. regenerate?\
How often did teachers dismiss warnings?\
False positive rate for specificity checks?\
Did incomplete structure warnings indicate AI quality issues?\
Which warnings led to teacher edits vs. dismissals?\

\f1\b Actions Based on Data:\

\f2\b0 If specificity warning dismissed 80%+ \uc0\u8594  Remove or refine heuristic\
If type balance warning helpful 70%+ \uc0\u8594  Keep, consider promoting post-MVP1\
If ATQ/signposting warnings rarely useful \uc0\u8594  Remove\
If teachers consistently edit vague comments \uc0\u8594  Keep warning, improve suggestions\
If ability praise warnings frequently dismissed \uc0\u8594  Investigate why (teacher context? false positives?)\

\f1\b Evidence-Based Tightening:\

\f2\b0 Don't guess what to enforce. Let classroom data decide. Tighten only what teachers find valuable.\

\f1\b Important:
\f2\b0  Even if teachers consistently approve a warning, that doesn't mean remove it - it might be valuable\
as 
\f1\b education/reminder
\f2\b0  rather than enforcement.
\f1\b\fs33 8. Complete User Flows\

\fs27 8.1 Teacher Flow - Detailed Steps\

\fs24 Phase 1: Task Creation\
Steps 1-6:
\f2\b0  (Same as previous versions, no changes)\
1. Create task\
2. Enter title (optional), task prompt (required)\
3. Select focus areas (optional)\
4. Choose success criteria (minimum 1 required)\
5. Validate (\uc0\u8805 1 criterion required)\
6. Save task\

\f1\b Phase 2: Start Session\
Steps 1-2:
\f2\b0  (Same as previous versions, no changes)\
1. Start session\
2. Generate class code, show dashboard with usage indicator:\

\fs21 Feedbacks used this session: 0 \cf3 Feedbacks used this session: 0\
\cf2 Your plan: 800 of 800 feedbacks remaining \cf3 Your plan: 800 of 800 feedbacks remaining\

\f1\b\fs24 \cf2 Phase 3: Monitor & Generate Feedback (UPDATED FOR V3.1)\
Step 1: Student Submissions\

\f2\b0 When student submits, row appears in dashboard\
Student row shows: "Student 1 | Response submitted | Ready for feedback" (green badge)\

\f1\b No AI call made yet
\f2\b0  (critical change)\

\f1\b Step 2: Teacher Decides When to Generate\

\f2\b0 Teacher sees list of students with "Ready for feedback" status.\
Teacher has options:\

\f1\b Option A:
\f2\b0  Click "Generate" button next to one student \uc0\u8594  AI call for that student only (uses 1 credit)\

\f1\b Option B:
\f2\b0  Select multiple students with checkboxes \uc0\u8594  Click "Generate for Selected (5)" \u8594  AI calls for\
5 students in sequence (uses 5 credits)
\f1\b Option C:
\f2\b0  Click "Generate All Ready (12)" \uc0\u8594  AI calls for all 12 marked students (uses 12 credits)\
Usage indicator updates in real-time:\

\fs21 Generating... (3 of 5 complete) \cf3 Generating... (3 of 5 complete)\
\cf2 Feedbacks used this session: 3 \cf3 Feedbacks used this session: 3\
\cf2 Your plan: 797 of 800 feedbacks remaining \cf3 Your plan: 797 of 800 feedbacks remaining\

\f1\b\fs24 \cf2 Step 3: AI Generation Per Student\

\f2\b0 System checks teacher's plan credit limit\
If under limit \uc0\u8594  Make AI call (Haiku 4.5)\
Update usage counter (credits, not dollars)\
Generate feedback\
Run validation (all warnings, no blocks)\
Save feedback as draft with validation results\
Update student row: "Feedback ready for review"\

\f1\b Step 4: Review Feedback\

\f2\b0 Teacher clicks student row. Feedback review modal opens showing:\
Goal box (read-only)\
Strengths (may have 
\f0 \uc0\u9888 
\f2  badges if warnings)\
Growth areas (may have 
\f0 \uc0\u9888 
\f2  badges if warnings)\
Next steps (editable)\
Footer shows: "This feedback used 1 credit"\
If warnings present: badges visible next to comments\

\f1\b Step 5: Handle Warnings (If Present)\

\f2\b0 Teacher sees 
\f0 \uc0\u9888 
\f2  badge next to flagged comment.\
Click badge \uc0\u8594  Popup with explanation and suggestions:\

\f1\b For strong warnings (unsafe content):
\f0\b0\fs21 \uc0\u9888 
\f2  WARNING: Ability Praise Detected
\f0 \cf3 \uc0\u9888 
\f2  WARNING: Ability Praise Detected\
\cf2 This feedback contains "you're smart" which can create \cf3 This feedback contains "you're smart" which can create\
\cf2 fixed mindset beliefs. \cf3 fixed mindset beliefs.\
\cf2 [Edit] [Regenerate (uses 1 credit)] [Approve anyway] \cf3 [Edit] [Regenerate (uses 1 credit)] [Approve anyway]\

\f1\b\fs24 \cf2 For soft warnings (quality):\

\f0\b0\fs21 \uc0\u9888 
\f2  This comment may be too general
\f0 \cf3 \uc0\u9888 
\f2  This comment may be too general\
\cf2 "Add more detail" \cf3 "Add more detail"\
\cf2 Suggestions: \cf3 Suggestions:\

\f0 \cf2 \uc0\u9744 
\f2  "Add detail about environmental impact with one example" 
\f0 \cf3 \uc0\u9744 
\f2  "Add detail about environmental impact with one example"\

\f0 \cf2 \uc0\u9744 
\f2  [Edit manually] 
\f0 \cf3 \uc0\u9744 
\f2  [Edit manually]\
\cf2 [Use suggestion] [Keep as is] \cf3 [Use suggestion] [Keep as is]\

\f1\b\fs24 \cf2 Step 6: Approve or Edit\

\f2\b0 Teacher reviews, optionally edits.\
Click "Approve & Send to Student"\
Feedback released to student (WebSocket notification)\
If teacher clicks "Regenerate":\
Confirmation: "This will use 1 credit. Regenerate?"\
New AI call, restart from Step 3\

\f1\b Step 7: Session Summary Visible\

\f2\b0 Header updates:\

\fs21 Session: ABC123 \cf3 Session: ABC123\
\cf2 Students: 12 joined, 7 feedback approved, 5 ready for feedback \cf3 Students: 12 joined, 7 feedback approved, 5 ready for feedback\
\cf2 Feedbacks used this session: 7 \cf3 Feedbacks used this session: 7\
\cf2 Your plan: 793 of 800 feedbacks remaining \cf3 Your plan: 793 of 800 feedbacks remaining\

\fs24 \cf2 Teacher can generate more as students submit.
\f1\b Phase 4: End Session\
Steps 1-3:
\f2\b0  (Updated with credit-based language)\
1. Click "End Session"\
2. Confirmation shows:\

\fs21 This session generated feedback for 23 students. \cf3 This session generated feedback for 23 students.\
\cf2 Feedbacks used: 23 \cf3 Feedbacks used: 23\
\cf2 Your plan: 777 of 800 feedbacks remaining this month \cf3 Your plan: 777 of 800 feedbacks remaining this month\
\cf2 End session and save summary? \cf3 End session and save summary?\
\cf2 [Cancel] [End Session] \cf3 [Cancel] [End Session]\

\fs24 \cf2 3. End session, generate summary, schedule cleanup\

\f1\b\fs27 8.2 Student Flow - Detailed Steps (UPDATED FOR V3.1)\

\fs24 Phase 1: Join Session\
Steps 1-3:
\f2\b0  (Same as previous versions, no changes)\
1. Enter class code\
2. Validate code\
3. Generate session-scoped student ID\
4. Show task view with goal box\

\f1\b Phase 2: Submit Response (UPDATED)\
Step 1: Write Response\

\f2\b0 Student types in textarea\
Auto-save to browser sessionStorage every 30 seconds (no server calls)\

\f1\b Step 2: Submit\

\f2\b0 Click "Submit for Feedback"\
Frontend validation (not empty, \uc0\u8805 50 characters)\
Send to backend\
Response saved to Redis\
Student marked as "Ready for feedback"
\f1\b No AI call made
\f2\b0  (waiting for teacher)\

\f1\b Step 3: Waiting State (UPDATED - Accurate Messaging)\

\f0\b0\fs21 \cf3 \uc0\u10003 
\f2  Your response has been submitted\

\f0 \cf2 \uc0\u10003 
\f2  Your response has been submitted\
\cf3 Your teacher will prepare your feedback shortly.\
\cf2 Your teacher will prepare your feedback shortly.\

\f0 \cf3 \uc0\u55357 \u56481 
\f2  While you wait:\

\f0 \cf2 \uc0\u55357 \u56481 
\f2  While you wait:\
Review the task goals above and think about \cf3 Review the task goals above and think about\
\cf2 what you focused on in your response. \cf3 what you focused on in your response.\
\cf2 [Goal box remains visible at top] \cf3 [Goal box remains visible at top]\

\f1\b\fs24 \cf2 Key Change:
\f2\b0  Student doesn't see "Your assistant is preparing feedback" because no AI is running yet. Message\
is neutral and accurate.\

\f1\b Step 4: Backend State\

\f2\b0 Response stored in Redis with status: 
\fs21\fsmilli10800 "ready_\
for\
_\
feedback"\

\fs24 Teacher dashboard updates: "Ready for feedback: 5 students"\
Student waits (can close browser, come back later)\

\f1\b Step 5: After Teacher Generates (When Teacher Clicks Button)\

\f2\b0 AI generates feedback (teacher-initiated)\
Teacher reviews and approves\
Student receives WebSocket notification\
Screen updates to show feedback\

\f1\b Phase 3: Receive Feedback\
Steps 1-2:
\f2\b0  (Same as previous versions, no changes)\
1. WebSocket notification when approved\
2. Feedback displays in three-card layout:\
Goal (always visible first, non-collapsible)\
What's working well\
What needs attention\
Next steps (student must select one)
\f1\b Phase 4: Revise Response (UPDATED - NO COMPLETION DETECTION)\
Steps 1-2:
\f2\b0  (Same as previous versions)\
1. Select next step\
2. Continue button enables\
3. Revision editor opens with original response editable\

\f1\b Step 3: Edit and Save (UPDATED - NO COMPLETION SIGNALS)\

\f2\b0 Student makes changes\
Click "Save Revision"\
Response saved to backend\

\f1\b Step 4: Neutral Acknowledgment (UPDATED - NO EV ALUATION)\

\f2\b0\fs21 Thank you for revising your work. \cf3 Thank you for revising your work.\
\cf2 Your teacher has your responses. \cf3 Your teacher has your responses.\
\cf2 [Close] \cf3 [Close]\

\f1\b\fs24 \cf2 What's REMOVED in v3.1:\

\f0\b0 \uc0\u10060 
\f2  "
\f0 \uc0\u10003 
\f2  You completed your next step!" (evaluative)\

\f0 \uc0\u10060 
\f2  "
\f0 \uc0\u9888 
\f2  It looks like this step isn't visible yet" (failure signal)\

\f0 \uc0\u10060 
\f2  Tick marks or warning icons\

\f0 \uc0\u10060 
\f2  "Would you like feedback on revision?" (deferred to post-MVP1)\

\f0 \uc0\u10060 
\f2  Any completion detection shown to student\

\f1\b What Remains (Internal Only):\

\f2\b0 Completion heuristics may run for logging/teacher analysis\
Teacher dashboard may show subtle hints: "Student 7: Revised (may have addressed: Add example to\
\'b62)" - informational only, not judgmental\
Student never sees this assessment
\f1\b\fs33 9. Classroom Flow & The 25-Student Rush Scenario\

\fs27 9.1 The 25-Student Rush: Explicit Scenario Analysis\

\fs24 Scenario Definition:\

\f2\b0 During a live class period, 25 students submit their responses within a 60-second window. This creates peak\
demand for AI generation, teacher review, and classroom management.\

\f1\b Why This Is Critical for MVP1:\
Usage Exposure:
\f2\b0  If all 25 trigger automatic AI calls, teacher has no control over 25 credits spent\
instantly\

\f1\b Teacher Cognitive Load:
\f2\b0  Reviewing 25 feedbacks during active lesson is overwhelming\

\f1\b Student Wait Time:
\f2\b0  If teacher reviews sequentially, last students wait 10-15 minutes\

\f1\b System Stress:
\f2\b0  25 concurrent AI calls test latency, rate limits, WebSocket stability\

\f1\b Classroom Flow:
\f2\b0  Students waiting without clear activity become disengaged\

\f1\b\fs27 9.2 Options Considered for MVP1\

\fs24 Option 1: Automatic Generation on Every Submission (REJECTED)\
How It Works:\

\f2\b0 Student submits \uc0\u8594  AI call triggered immediately\
All 25 feedbacks generate simultaneously\
Teacher sees 25 "Ready for review" within 10-15 seconds\

\f1\b Pros:\

\f2\b0 Fast feedback generation\
Students don't wait long for AI processing\

\f1\b Cons:\

\f0\b0 \uc0\u10060 
\f2  Teacher has no control over AI usage (25 credits spent in 60 seconds)\

\f0 \uc0\u10060 
\f2  Violates "deliberate AI usage" principle\

\f0 \uc0\u10060 
\f2  Teacher faces 25 reviews at once (cognitive overload)\

\f0 \uc0\u10060 
\f2  Doesn't support tiered pricing (hard to cap automatic usage)\

\f0 \uc0\u10060 
\f2  Usage anxiety for teachers ("I can't afford to have all students submit at once")
\f1\b Verdict:
\f2\b0  Rejected. Conflicts with MVP1 core principles.\

\f1\b Option 2: Sequential Teacher-Initiated Generation (CONSIDERED)\
How It Works:\

\f2\b0 Students submit \uc0\u8594  Marked "Ready for feedback" (no AI yet)\
Teacher clicks "Generate" for one student at a time\
Teacher reviews \uc0\u8594  Approves \u8594  Moves to next student\

\f1\b Pros:\

\f0\b0 \uc0\u9989 
\f2  Full teacher control over pace and usage\

\f0 \uc0\u9989 
\f2  Deliberate AI usage (teacher clicks each time)\

\f0 \uc0\u9989 
\f2  Teacher can take breaks, manage classroom during review\

\f1\b Cons:\

\f0\b0 \uc0\u9888 
\f2  Slowest option (20-30 minutes to complete all 25)\

\f0 \uc0\u9888 
\f2  Students wait long periods (disengagement risk)\

\f0 \uc0\u9888 
\f2  Repetitive clicking (teacher may find tedious)\

\f1\b Verdict:
\f2\b0  Too slow for MVP1, but useful as fallback option.\

\f1\b Option 3: Batch Generation with Teacher Control (RECOMMENDED FOR MVP1)\
How It Works:\

\f2\b0 Students submit \uc0\u8594  Marked "Ready for feedback" (no AI yet)\
Teacher sees: "Ready for feedback: 25 students"\
Teacher chooses:\
Generate for selected students (e.g., 5 at a time)\
Generate all 25 at once (one-click batch)\
AI generates in sequence (not parallel to avoid rate limits)\
Progress shown: "Generating feedback... (7 of 25 complete)"\
Teacher reviews as they become ready (can start reviewing while others generate)\

\f1\b Pros:\

\f0\b0 \uc0\u9989 
\f2  Teacher controls when usage is incurred (clicks "Generate All" deliberately)\

\f0 \uc0\u9989 
\f2  Faster than sequential (teacher can batch)
\f0 \uc0\u9989 
\f2  Predictable usage (teacher sees "Generate All 25" knows it uses 25 credits)\

\f0 \uc0\u9989 
\f2  Supports tiered pricing (teacher aware of count before generation)\

\f0 \uc0\u9989 
\f2  Allows pacing (teacher can do 10 now, 15 later)\

\f1\b Cons:\

\f0\b0 \uc0\u9888 
\f2  Requires teacher decision (some may prefer automatic)\

\f0 \uc0\u9888 
\f2  Teacher must understand batch generation concept\

\f1\b Verdict:
\f2\b0  Recommended for MVP1. Balances control, speed, and usage predictability.\

\f1\b Option 4: Prioritized Generation with Flagging (ENHANCEMENT TO OPTION 3)\
How It Works:\

\f2\b0 Same as Option 3, but system flags certain students:\
Students whose responses are very short (<100 words)\
Students whose responses are very long (>500 words)\
Teacher sees: "Ready for feedback: 25 students (3 flagged for review)"\
Teacher can:\
Generate all 25\
Generate flagged 3 first, then batch the rest\
Generate in custom order\

\f1\b Pros:\

\f0\b0 \uc0\u9989 
\f2  All benefits of Option 3\

\f0 \uc0\u9989 
\f2  Helps teacher prioritize (who needs attention first)\

\f0 \uc0\u9989 
\f2  Supports differentiation\

\f1\b Cons:\

\f0\b0 \uc0\u9888 
\f2  Adds complexity (flagging logic)\

\f0 \uc0\u9888 
\f2  Requires student history (not available in MVP1 session-based model)\

\f0 \uc0\u9888 
\f2  Risk of biasing teacher attention\

\f1\b Verdict:
\f2\b0  Defer to post-MVP1. Good idea but adds complexity beyond MVP1 scope.\

\f1\b\fs27 9.3 Recommended Approach for MVP1\

\fs24 Selected: Option 3 - Batch Generation with Teacher ControlImplementation Details:\
Teacher Dashboard UI:\

\f2\b0\fs21 \uc0\u9484 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9488  \cf3 \uc0\u9484 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9488 \
\cf2 \uc0\u9474  Session: ABC123 \u9474  \cf3 \uc0\u9474  Session: ABC123 \u9474 \
\cf2 \uc0\u9474  Students: 25 joined, 25 submitted \u9474  \cf3 \uc0\u9474  Students: 25 joined, 25 submitted \u9474 \
\cf2 \uc0\u9474  Feedbacks used this session: 0 \u9474  \cf3 \uc0\u9474  Feedbacks used this session: 0 \u9474 \
\uc0\u9474  Your plan: 800 of 800 feedbacks remaining \u9474 \
\cf2 \uc0\u9474  Your plan: 800 of 800 feedbacks remaining \u9474 \
\uc0\u9474  \u9474  \cf3 \uc0\u9474  \u9474 \
\cf2 \uc0\u9474  Ready for feedback: 25 students \u9474  \cf3 \uc0\u9474  Ready for feedback: 25 students \u9474 \
\cf2 \uc0\u9474  \u9474  \cf3 \uc0\u9474  \u9474 \
\cf2 \uc0\u9474  [Generate All 25] (uses 25 feedbacks) \u9474  \cf3 \uc0\u9474  [Generate All 25] (uses 25 feedbacks) \u9474 \
\cf2 \uc0\u9474  [Select...] \u9474  \cf3 \uc0\u9474  [Select...] \u9474 \
\cf2 \uc0\u9492 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9496  \cf3 \uc0\u9492 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9496 \

\f1\b\fs24 \cf2 Teacher Workflow Options:\
Option A: Generate All at Once\

\f2\b0 1. Teacher sees 25 students ready\
2. Clicks "Generate All 25" (uses 25 feedbacks)\
3. Confirmation:\

\fs21 Generate feedback for 25 students? \cf3 Generate feedback for 25 students?\
\cf2 This will use 25 feedbacks. \cf3 This will use 25 feedbacks.\
\cf2 Your plan: 775 of 800 feedbacks remaining after \cf3 Your plan: 775 of 800 feedbacks remaining after\
\cf2 [Cancel] [Generate] \cf3 [Cancel] [Generate]\

\fs24 \cf2 4. Teacher confirms\
5. AI generates in sequence (5-8 seconds each, ~2-3 minutes total)\
6. Progress bar:\

\fs21 Generating feedback... (7 of 25 complete) \cf3 Generating feedback... (7 of 25 complete)\
\cf2 Feedbacks used this session: 7 \cf3 Feedbacks used this session: 7\

\fs24 \cf2 7. 8. 9. As each completes, it appears in review queue\
Teacher starts reviewing first feedbacks while others generate\
Total time: ~5-7 minutes (generation + review)
\f1\b Option B: Generate in Batches\

\f2\b0 1. Teacher sees 25 students ready\
2. Clicks "Select..." \uc0\u8594  Shows student list with checkboxes\
3. Teacher selects first 10 students\
4. Clicks "Generate for Selected (10)" (uses 10 feedbacks)\
5. Reviews those 10, approves\
6. Selects next 10, repeats\
7. Manages pacing based on classroom needs\

\f1\b Option C: Generate Individually (Fallback)\

\f2\b0 1. 2. 3. 4. Teacher sees list of 25 students\
Clicks "Generate" next to one student (uses 1 feedback)\
Reviews, approves, moves to next\
Useful if teacher wants to slow down or check in with class\

\f1\b Usage Communication (Credit-Based):\
Before clicking:\

\f2\b0\fs21 [Generate All 25] (uses 25 feedbacks) \cf3 [Generate All 25] (uses 25 feedbacks)\

\f1\b\fs24 \cf2 During:\

\f2\b0\fs21 Generating... (7 of 25) \cf3 Generating... (7 of 25)\
\cf2 Feedbacks used this session: 7 \cf3 Feedbacks used this session: 7\

\f1\b\fs24 \cf2 After:\

\f2\b0\fs21 Session: ABC123 \cf3 Session: ABC123\
\cf2 Feedbacks used this session: 25 \cf3 Feedbacks used this session: 25\
\cf2 Your plan: 775 of 800 feedbacks remaining \cf3 Your plan: 775 of 800 feedbacks remaining\

\f1\b\fs24 \cf2 Why This Works:\

\f2\b0 Teacher sees usage impact before committing\
Teacher chooses pace (all at once, batches, or one-by-one)\
Predictable behavior (no surprises)Supports future tiers (teacher learns to manage usage)\

\f1\b Classroom flow:
\f2\b0  Teacher can batch-generate during independent work time, review during monitoring\

\f1\b\fs27 9.4 Other Critical Scenarios (Updated for V3.1)\

\fs24 Scenario 2: Feedback Generation Takes 5-8 Seconds Per Student\
What Happens:\

\f2\b0 Teacher clicks "Generate All 25"\
System generates sequentially (to avoid API rate limits)\
Takes ~2-3 minutes total\
Teacher sees progress:\

\fs21 Generating... (7 of 25 complete) \cf3 Generating... (7 of 25 complete)\
\cf2 Feedbacks used this session: 7 \cf3 Feedbacks used this session: 7\

\f1\b\fs24 \cf2 Why Sequential, Not Parallel:\

\f2\b0 Avoids hitting Anthropic rate limits\
More predictable latency (no queue backups)\
Easier to show progress to teacher\
If failure occurs, can pause and retry\

\f1\b Teacher Experience:\

\f2\b0 Clear progress indicator\
Can start reviewing completed feedbacks while others generate\
Option to cancel if needed\

\f1\b Scenario 3: Teacher Reaches Monthly Limit Mid-Session\
What Happens:\

\f2\b0 Teacher has used 790 of 800 feedbacks (Classroom tier)\
Teacher clicks "Generate All 25"\
System checks: Only 10 remaining this month\
Shows warning:
\fs21 You have 10 of 800 feedbacks remaining this month. \cf3 You have 10 of 800 feedbacks remaining this month.\
\cf2 You can: \cf3 You can:\
\cf2 - Generate feedback for 10 students now \cf3 - Generate feedback for 10 students now\
\cf2 - Write feedback manually for the rest\cf3 - Write feedback manually for the rest\
\cf2 - Upgrade your plan to continue \cf3 - Upgrade your plan to continue\
[Generate 10] [Write Manually] [View Plans]\
\cf2 [Generate 10] [Write Manually] [View Plans]\

\f1\b\fs24 Teacher Chooses:\
Option A:
\f2\b0  Generate 10, write manually for 15\

\f1\b Option B:
\f2\b0  Upgrade plan (if available post-MVP1)\

\f1\b Option C:
\f2\b0  Write all 25 manually, save feedbacks for next session\

\f1\b Why This Works:\

\f2\b0 Teacher has agency\
No broken UI or errors\
Students see: "Your teacher is preparing feedback" (no panic)\
Manual fallback always available\

\f1\b Scenario 4: Student Submits, But Teacher Doesn't Generate for 20 Minutes\
Student Experience:\

\f2\b0 1. Student submits at 10:15 AM\
2. Sees:\

\f0\fs21 \cf3 \uc0\u10003 
\f2  Your response has been submitted\

\f0 \cf2 \uc0\u10003 
\f2  Your response has been submitted\
\cf3 Your teacher will prepare feedback shortly.\
\cf2 Your teacher will prepare feedback shortly.\

\fs24 3. 4. 5. Student can close browser or wait\
At 10:35 AM, teacher clicks "Generate"\
At 10:36 AM, student's screen updates (WebSocket): "Your feedback is ready!"\

\f1\b Why This Works:\

\f2\b0 Clear expectations (teacher will prepare, not "generating...")\
No anxiety from waiting (student knows teacher controls pace)Session state preserved (student can close browser, return anytime)\
WebSocket reconnection handles closed tabs\

\f1\b\fs33 10. Component Specifications\

\fs27 10.1 Teacher Components\

\fs24 SessionDashboard (UPDATED FOR V3.1)\
Purpose:
\f2\b0  Real-time monitoring of active session with credit-based usage visibility and teacher-initiated\
generation.\

\f1\b State:\

\f2\b0\fs21\fsmilli10800 session 
\fs24 : 
\fs21\fsmilli10800 \{ id, class\
code, task, status, feedbacks\
_\
_\
used \}\
students 
\fs24 : 
\fs21\fsmilli10800 [\{ id, display_\
name, submission\
_\
status, feedback\
_\
selectedStudentIds 
\fs24 : 
\fs21\fsmilli10800 [] 
\fs24 (for batch generation)\

\fs21\fsmilli10800 teacherPlan 
\fs24 : 
\fs21\fsmilli10800 \{ feedbacks\
_\
remaining, monthly_\
limit \}\
status \}]\

\f1\b\fs24 UI (Updated for Credits):\

\f2\b0\fs21 \uc0\u9484 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9488  \cf3 \uc0\u9484 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9488 \
\cf2 \uc0\u9474  Session ABC123 \u9474  \cf3 \uc0\u9474  Session ABC123 \u9474 \
\cf2 \uc0\u9474  Students: 25 joined, 25 submitted \u9474  \cf3 \uc0\u9474  Students: 25 joined, 25 submitted \u9474 \
\cf2 \uc0\u9474  Feedbacks used this session: 0 \u9474  \cf3 \uc0\u9474  Feedbacks used this session: 0 \u9474 \
\uc0\u9474  Your plan: 800 of 800 remaining \u9474 \
\cf2 \uc0\u9474  Your plan: 800 of 800 remaining \u9474 \
\uc0\u9474  \u9474  \cf3 \uc0\u9474  \u9474 \
\cf2 \uc0\u9474  Ready for feedback: 25 students \u9474  \cf3 \uc0\u9474  Ready for feedback: 25 students \u9474 \
\cf2 \uc0\u9474  [Generate All 25] (uses 25 feedbacks) \u9474  \cf3 \uc0\u9474  [Generate All 25] (uses 25 feedbacks) \u9474 \
\cf2 \uc0\u9474  \u9474  \cf3 \uc0\u9474  \u9474 \
\uc0\u9474  
\f0 \uc0\u9744 
\f2  Student 1 - Response submitted \uc0\u9474 \
\cf2 \uc0\u9474  
\f0 \uc0\u9744 
\f2  Student 1 - Response submitted \uc0\u9474 \
\cf3 \uc0\u9474  
\f0 \uc0\u9744 
\f2  Student 2 - Response submitted \uc0\u9474 \
\cf2 \uc0\u9474  
\f0 \uc0\u9744 
\f2  Student 2 - Response submitted \uc0\u9474 \
\uc0\u9474  ... \u9474  \cf3 \uc0\u9474  ... \u9474 \
\cf2 \uc0\u9474  [Generate Selected (0)] \u9474  \cf3 \uc0\u9474  [Generate Selected (0)] \u9474 \
\cf2 \uc0\u9492 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9496  \cf3 \uc0\u9492 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9496 \

\f1\b\fs24 \cf2 Methods:\

\f2\b0\fs21\fsmilli10800 generateForStudent(studentId) 
\fs24 : Single generation (uses 1 credit)\

\fs21\fsmilli10800 generateForSelected(studentIds[]) 
\fs24 : Batch generation (uses N credits)\

\fs21\fsmilli10800 generateAll() 
\fs24 : Generate for all ready students (uses N credits)
\fs21\fsmilli10800 checkUsageLimit() 
\fs24 : Before generation, verify teacher hasn't hit cap\

\f1\b WebSocket Listeners:\

\f2\b0\fs21\fsmilli10800 "student\
_joined" 
\fs24 \uc0\u8594  Add to students list\

\fs21\fsmilli10800 "student\
_\
submitted" 
\fs24 \uc0\u8594  Update to 
\fs21\fsmilli10800 "ready_\
for\
_\
"feedback\
_generated" 
\fs24 \uc0\u8594  Update to 
\fs21\fsmilli10800 "ready_\
for\
"feedback\
_\
approved" 
\fs24 \uc0\u8594  Update to 
\fs21\fsmilli10800 "feedback\
_\
feedback"\
_\
review" 
\fs24 , increment usage\

\fs21\fsmilli10800 sent"\

\f1\b\fs24 FeedbackReviewModal (UPDATED FOR V3.1)\
Purpose:
\f2\b0  Review AI-generated feedback with all warnings visible (none blocking).\

\f1\b Props:\

\f2\b0\fs21\fsmilli10800 studentId\
feedback 
\fs24 (with validation warnings attached)\

\fs21\fsmilli10800 studentResponse\
creditsUsed 
\fs24 (always 1)\

\f1\b State:\

\f2\b0\fs21\fsmilli10800 editedFeedback\
dismissedWarnings 
\fs24 : 
\fs21\fsmilli10800 []\

\f1\b\fs24 UI Additions for v3.1:\
Header:\

\f2\b0\fs21 Feedback for Student 7 \cf3 Feedback for Student 7\
\cf2 This feedback used 1 credit \cf3 This feedback used 1 credit\

\f1\b\fs24 \cf2 Validation Warnings (If Present):\

\f2\b0\fs21 \uc0\u9484 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9488  \cf3 \uc0\u9484 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9488 \
\uc0\u9474  
\f0 \uc0\u55357 \u56474 
\f2  What's working well \uc0\u9474 \
\cf2 \uc0\u9474  
\f0 \uc0\u55357 \u56474 
\f2  What's working well \uc0\u9474 \
\uc0\u9474  \u9474  \cf3 \uc0\u9474  \u9474 \
\uc0\u9474  \'95 "Good explanation" 
\f0 \uc0\u9888 
\f2  \uc0\u9474 \
\cf2 \uc0\u9474  \'95 "Good explanation" 
\f0 \uc0\u9888 
\f2  \uc0\u9474 \
\uc0\u9474  [Click to see suggestions] \u9474  \cf3 \uc0\u9474  [Click to see suggestions] \u9474 \
\cf2 \uc0\u9474  \u9474  \cf3 \uc0\u9474  \u9474 \
\cf2 \uc0\u9492 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9496  \cf3 \uc0\u9492 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9496 
\f1\b\fs24 \cf2 Clicking 
\f0\b0 \uc0\u9888 
\f1\b  opens popup:\
For strong warnings (unsafe content):\

\f0\b0\fs21 \uc0\u9888 
\f2  WARNING: Ability Praise Detected
\f0 \cf3 \uc0\u9888 
\f2  WARNING: Ability Praise Detected\
\cf2 This feedback contains "you're smart" which can create \cf3 This feedback contains "you're smart" which can create\
\cf2 fixed mindset beliefs. \cf3 fixed mindset beliefs.\
\cf2 [Edit] [Regenerate (uses 1 credit)] [Approve anyway] \cf3 [Edit] [Regenerate (uses 1 credit)] [Approve anyway]\

\f1\b\fs24 \cf2 For soft warnings (quality):\

\f0\b0\fs21 \uc0\u9888 
\f2  This comment may be too general
\f0 \cf3 \uc0\u9888 
\f2  This comment may be too general\
\cf2 Suggestions: \cf3 Suggestions:\

\f0 \cf2 \uc0\u9744 
\f2  "Good explanation using the diagram in paragraph 2" 
\f0 \cf3 \uc0\u9744 
\f2  "Good explanation using the diagram in paragraph 2"\

\f0 \cf2 \uc0\u9744 
\f2  "Clear explanation with logical steps" 
\f0 \cf3 \uc0\u9744 
\f2  "Clear explanation with logical steps"\
\cf2 [Use suggestion] [Edit manually] [Keep as is] \cf3 [Use suggestion] [Edit manually] [Keep as is]\

\f1\b\fs24 \cf2 Methods:\

\f2\b0\fs21\fsmilli10800 handleWarningClick(warning) 
\fs24 : Show suggestions popup\

\fs21\fsmilli10800 useSuggestion(suggestionText) 
\fs24 : Replace comment\

\fs21\fsmilli10800 dismissWarning(warningId) 
\fs24 : Keep original, log dismissal\

\fs21\fsmilli10800 regenerateFeedback() 
\fs24 : Trigger new AI call (teacher confirms credit use)\

\f1\b UsageIndicator (UPDATED FOR V3.1)\
Purpose:
\f2\b0  Display session-level AI usage in credit-based, non-anxiety-inducing format.\

\f1\b Props:\

\f2\b0\fs21\fsmilli10800 sessionFeedbacksUsed 
\fs24 : number\

\fs21\fsmilli10800 monthlyFeedbacksRemaining 
\fs24 : number\

\fs21\fsmilli10800 monthlyLimit 
\fs24 : number\

\f1\b UI (Session Dashboard Header):\

\f2\b0\fs21 Feedbacks used this session: 7 \cf3 Feedbacks used this session: 7\
\cf2 Your plan: 193 of 800 feedbacks remaining (24%) \cf3 Your plan: 193 of 800 feedbacks remaining (24%)
\f1\b\fs24 \cf2 Behavior:\

\f2\b0 Updates in real-time as feedback generated\
Shows whole numbers (7 feedbacks, not 7.3)\
No color coding (no red/yellow/green)\
Shows context (session + monthly)\
Calm, matter-of-fact tone\

\f1\b Warning States:\
At 80% of monthly limit:\

\f0\b0\fs21 \uc0\u8505 
\f2  FYI: 640 of 800 feedbacks used this month 
\f0 \cf3 \uc0\u8505 
\f2  FYI: 640 of 800 feedbacks used this month\
You can continue using LARA normally.\
\cf2 You can continue using LARA normally.\
We'll let you know before you reach the limit. \cf3 We'll let you know before you reach the limit.\

\f1\b\fs24 \cf2 At 100% of monthly limit:\

\f2\b0\fs21 Monthly limit reached (800 feedbacks) \cf3 Monthly limit reached (800 feedbacks)\
\cf2 To generate more feedback this month: \cf3 To generate more feedback this month:\
\cf2 - Upgrade your plan, or \cf3 - Upgrade your plan, or\
\cf2 - Wait until next month (resets on [date])\cf3 - Wait until next month (resets on [date])\
You can still review and write feedback manually.\
\cf2 You can still review and write feedback manually.\
[View Plan Options] \cf3 [View Plan Options]\

\f1\b\fs27 \cf2 10.2 Student Components (UPDATED FOR V3.1)\

\fs24 TaskResponseForm (UPDATED)\
Waiting State After Submit (CHANGED IN V3.1):
\f0\b0\fs21 \cf3 \uc0\u10003 
\f2  Your response has been submitted\

\f0 \cf2 \uc0\u10003 
\f2  Your response has been submitted\
\cf3 Your teacher will prepare your feedback shortly.\
\cf2 Your teacher will prepare your feedback shortly.\

\f0 \cf3 \uc0\u55357 \u56481 
\f2  While you wait:\

\f0 \cf2 \uc0\u55357 \u56481 
\f2  While you wait:\
Review the task goals above and think about \cf3 Review the task goals above and think about\
\cf2 what you focused on in your response. \cf3 what you focused on in your response.\

\f1\b\fs24 \cf2 Key Change:
\f2\b0  No mention of "assistant is preparing" or "generating feedback" because no AI is running yet.\
Accurate and calm.\

\f1\b RevisionEditor (UPDATED FOR V3.1)\
Completion Message After Revision Submit (CHANGED IN V3.1):\

\f2\b0\fs21 Thank you for revising your work. \cf3 Thank you for revising your work.\
\cf2 Your teacher has your responses. \cf3 Your teacher has your responses.\
\cf2 [Close] \cf3 [Close]\

\f1\b\fs24 \cf2 What's REMOVED:\

\f0\b0 \uc0\u10060 
\f2  All completion detection signals\

\f0 \uc0\u10060 
\f2  Success/failure language\

\f0 \uc0\u10060 
\f2  Tick marks or warnings\

\f0 \uc0\u10060 
\f2  "You completed your next step!"\

\f0 \uc0\u10060 
\f2  "Feedback on revision" option (deferred)\

\f1\b What Remains:\

\f0\b0 \uc0\u9989 
\f2  Neutral acknowledgment\

\f0 \uc0\u9989 
\f2  No evaluation of student performance\

\f0 \uc0\u9989 
\f2  Simple, calm closure
\f1\b\fs33 11. API Design\

\fs27 11.1 Authentication Endpoints\

\fs24 Teacher Registration\
POST /api/auth/register\
Request:\

\f2\b0\fs18 json\

\fs21 \{ \cf3 \{\
\cf2 "email" \cf7 "email"\cf2 : \cf6 :\cf2  "teacher@school.edu" \cf8 "teacher@school.edu"\cf2 , \cf3 ,\
\cf2 "password" \cf7 "password"\cf2 : \cf6 :\cf2  "securepassword" \cf8 "securepassword"\cf2 , \cf3 ,\
\cf2 "name" \cf7 "name"\cf2 : \cf6 :\cf2  "Jane Smith" \cf8 "Jane Smith"\
\cf2 \} \cf3 \}\

\f1\b\fs24 \cf2 Response:\

\f2\b0\fs18 json\

\fs21 \{ \cf3 \{\
\cf2 "access_token" \cf7 "access_token"\cf2 : \cf6 :\cf2  "jwt_token_here" \cf8 "jwt_token_here"\cf2 , \cf3 ,\
\cf2 "teacher" \cf7 "teacher"\cf2 : \cf6 :\cf2  \{ \cf3 \{\
\cf2 "id" \cf7 "id"\cf2 : \cf6 :\cf2  "teacher_123" \cf8 "teacher_123"\cf2 , \cf3 ,\
\cf2 "email" \cf7 "email"\cf2 : \cf6 :\cf2  "teacher@school.edu" \cf8 "teacher@school.edu"\cf2 , \cf3 ,\
\cf2 "name" \cf7 "name"\cf2 : \cf6 :\cf2  "Jane Smith" \cf8 "Jane Smith"\cf2 , \cf3 ,\
\cf2 "plan_tier" \cf7 "plan_tier"\cf2 : \cf6 :\cf2  "classroom" \cf8 "classroom"\cf2 , \cf3 ,\
\cf2 "monthly_limit" \cf7 "monthly_limit"\cf2 : \cf6 :\cf2  800 \cf5 800\cf2 , \cf3 ,\
\cf2 "feedbacks_used_this_month" \cf7 "feedbacks_used_this_month"\cf2 : \cf6 :\cf2  0 \cf5 0\cf2 , \cf3 ,\
\cf2 "feedbacks_remaining" \cf7 "feedbacks_remaining"\cf2 : \cf6 :\cf2  800 \cf5 800\
\cf2 \} \cf3 \}\
\cf2 \} \cf3 \}\

\f1\b\fs24 \cf2 Notes:\

\f2\b0 Default plan tier: 
\fs21\fsmilli10800 "classroom" 
\fs24 (800 feedbacks/month)\
Custom auth means you handle password reset, email verification manually\

\f1\b Teacher Login\
POST /api/auth/login\
Request:
\f2\b0\fs18 json\

\fs21 \{ \cf3 \{\
\cf2 "email" \cf7 "email"\cf2 : \cf6 :\cf2  "teacher@school.edu" \cf8 "teacher@school.edu"\cf2 , \cf3 ,\
\cf2 "password" \cf7 "password"\cf2 : \cf6 :\cf2  "securepassword" \cf8 "securepassword"\
\cf2 \} \cf3 \}\

\f1\b\fs24 \cf2 Response:\

\f2\b0\fs18 json\

\fs21 \{ \cf3 \{\
\cf2 "access_token" \cf7 "access_token"\cf2 : \cf6 :\cf2  "jwt_token_here" \cf8 "jwt_token_here"\cf2 , \cf3 ,\
\cf2 "teacher" \cf7 "teacher"\cf2 : \cf6 :\cf2  \{ \cf3 \{\
\cf2 "id" \cf7 "id"\cf2 : \cf6 :\cf2  "teacher_123" \cf8 "teacher_123"\cf2 , \cf3 ,\
\cf2 "plan_tier" \cf7 "plan_tier"\cf2 : \cf6 :\cf2  "classroom" \cf8 "classroom"\cf2 , \cf3 ,\
\cf2 "monthly_limit" \cf7 "monthly_limit"\cf2 : \cf6 :\cf2  800 \cf5 800\cf2 , \cf3 ,\
\cf2 "feedbacks_used_this_month" \cf7 "feedbacks_used_this_month"\cf2 : \cf6 :\cf2  32 \cf5 32\cf2 , \cf3 ,\
\cf2 "feedbacks_remaining" \cf7 "feedbacks_remaining"\cf2 : \cf6 :\cf2  768 \cf5 768\cf2 , \cf3 ,\
\cf2 "usage_percentage" \cf7 "usage_percentage"\cf2 : \cf6 :\cf2  4 \cf5 4\
\cf2 \} \cf3 \}\
\cf2 \} \cf3 \}\

\f1\b\fs27 \cf2 11.2 Task Management Endpoints\

\fs24 Create New Task\
POST /api/tasks\
Headers:
\f2\b0  
\fs21\fsmilli10800 Authorization: Bearer \{access\
_\

\f1\b\fs24 Request:\

\f2\b0\fs21\fsmilli10800 token\}\

\fs18 json\

\fs21 \{ \cf3 \{\
\cf2 "title" \cf7 "title"\cf2 : \cf6 :\cf2  "Coastal Erosion Analysis" \cf8 "Coastal Erosion Analysis"\cf2 , \cf3 ,\
\cf2 "prompt" \cf7 "prompt"\cf2 : \cf6 :\cf2  "Explain the causes and effects of coastal erosion, using specific examples." \cf8 "Explain the causes and effects of coastal erosion, using specific examples."\cf2 , \cf3 ,\
\cf2 "success_criteria" \cf7 "success_criteria"\cf2 : \cf6 :\cf2  [ \cf3 [\
\cf2 "Explains at least two causes of coastal erosion with scientific accuracy" \cf8 "Explains at least two causes of coastal erosion with scientific accuracy"\cf2 , \cf3 ,\
\cf2 "Provides a specific real-world example" \cf8 "Provides a specific real-world example"\cf2 , \cf3 ,\
\cf2 "Links causes to effects with clear reasoning" \cf8 "Links causes to effects with clear reasoning"\
\cf2 ] \cf3 ]\
\cf2 \} \cf3 \}
\f1\b\fs24 \cf2 Validation:\

\f2\b0\fs21\fsmilli10800 prompt 
\fs24 : required\

\fs21\fsmilli10800 success\
_\
criteria 
\fs24 : required, minimum 1 criterion\

\f1\b Response:\

\f2\b0\fs18 json\

\fs21 \{ \cf3 \{\
\cf2 "task_id" \cf7 "task_id"\cf2 : \cf6 :\cf2  "task_456" \cf8 "task_456"\cf2 , \cf3 ,\
\cf2 "title" \cf7 "title"\cf2 : \cf6 :\cf2  "Coastal Erosion Analysis" \cf8 "Coastal Erosion Analysis"\cf2 , \cf3 ,\
\cf2 "prompt" \cf7 "prompt"\cf2 : \cf6 :\cf2  "..." \cf8 "..."\cf2 , \cf3 ,\
\cf2 "success_criteria" \cf7 "success_criteria"\cf2 : \cf6 :\cf2  [ \cf3 [\cf2 ... \cf3 ...\cf2 ] \cf3 ]\cf2 , \cf3 ,\
\cf2 "created_at" \cf7 "created_at"\cf2 : \cf6 :\cf2  "2026-01-22T10:00:00Z" \cf8 "2026-01-22T10:00:00Z"\
\cf2 \} \cf3 \}\

\f1\b\fs24 \cf2 View All Tasks\
GET /api/tasks?page=1&limit=20\
Headers:
\f2\b0  
\fs21\fsmilli10800 Authorization: Bearer \{access\
_\

\f1\b\fs24 Response:\

\f2\b0\fs21\fsmilli10800 token\}\

\fs18 json\

\fs21 \{ \cf3 \{\
\cf2 "tasks" \cf7 "tasks"\cf2 : \cf6 :\cf2  [ \cf3 [\
\cf2 \{ \cf3 \{\
\cf2 "task_id" \cf7 "task_id"\cf2 : \cf6 :\cf2  "task_456" \cf8 "task_456"\cf2 , \cf3 ,\
\cf2 "title" \cf7 "title"\cf2 : \cf6 :\cf2  "Coastal Erosion Analysis" \cf8 "Coastal Erosion Analysis"\cf2 , \cf3 ,\
\cf2 "created_at" \cf7 "created_at"\cf2 : \cf6 :\cf2  "2026-01-22T10:00:00Z" \cf8 "2026-01-22T10:00:00Z"\
\cf2 \} \cf3 \}\
\cf2 ] \cf3 ]\cf2 , \cf3 ,\
\cf2 "total" \cf7 "total"\cf2 : \cf6 :\cf2  5 \cf5 5\cf2 , \cf3 ,\
\cf2 "page" \cf7 "page"\cf2 : \cf6 :\cf2  1 \cf5 1\cf2 , \cf3 ,\
\cf2 "limit" \cf7 "limit"\cf2 : \cf6 :\cf2  20 \cf5 20\
\cf2 \} \cf3 \}\

\f1\b\fs24 \cf2 View Single Task\
GET /api/tasks/\{task_id\}\
Response:
\f2\b0\fs18 json\

\fs21 \{ \cf3 \{\
\cf2 "task_id" \cf7 "task_id"\cf2 : \cf6 :\cf2  "task_456" \cf8 "task_456"\cf2 , \cf3 ,\
\cf2 "title" \cf7 "title"\cf2 : \cf6 :\cf2  "Coastal Erosion Analysis" \cf8 "Coastal Erosion Analysis"\cf2 , \cf3 ,\
\cf2 "prompt" \cf7 "prompt"\cf2 : \cf6 :\cf2  "..." \cf8 "..."\cf2 , \cf3 ,\
\cf2 "success_criteria" \cf7 "success_criteria"\cf2 : \cf6 :\cf2  [ \cf3 [\cf2 ... \cf3 ...\cf2 ] \cf3 ]\
\cf2 \} \cf3 \}\

\f1\b\fs24 \cf2 Update/Delete Task\
PUT /api/tasks/\{task_id\}
\f2\b0  - Edit task (same validation)\

\f1\b DELETE /api/tasks/\{task_id\}
\f2\b0  - Delete task\

\f1\b\fs27 11.3 Session Management Endpoints (UPDATED FOR V3.1)\

\fs24 Start New Session\
POST /api/sessions\
Headers:
\f2\b0  
\fs21\fsmilli10800 Authorization: Bearer \{access\
_\
token\}\

\f1\b\fs24 Request:\

\f2\b0\fs21 "task_id" \cf7 "task_id"\cf2 : \cf6 :\cf2  "task_456" \cf8 "task_456"\

\fs18 \cf2 json\

\fs21 \{ \cf3 \{\
\cf2 \} \cf3 \}\

\f1\b\fs24 \cf2 Response:\

\f2\b0\fs18 json
\fs21 \{ \cf3 \{\
\cf2 "session_id" \cf7 "session_id"\cf2 : \cf6 :\cf2  "session_789" \cf8 "session_789"\cf2 , \cf3 ,\
\cf2 "class_code" \cf7 "class_code"\cf2 : \cf6 :\cf2  "ABC123" \cf8 "ABC123"\cf2 , \cf3 ,\
\cf2 "qr_code_url" \cf7 "qr_code_url"\cf2 : \cf6 :\cf2  "https://cdn.lara.ai/qr/ABC123.png" \cf8 "https://cdn.lara.ai/qr/ABC123.png"\cf2 , \cf3 ,\
\cf2 "task" \cf7 "task"\cf2 : \cf6 :\cf2  \{ \cf3 \{\cf2  ... \cf3 ... \cf2 \} \cf3 \}\cf2 , \cf3 ,\
\cf2 "feedbacks_used_this_session" \cf7 "feedbacks_used_this_session"\cf2 : \cf6 :\cf2  0 \cf5 0\cf2 , \cf3 ,\
\cf2 "teacher_plan" \cf7 "teacher_plan"\cf2 : \cf6 :\cf2  \{ \cf3 \{\
\cf2 "feedbacks_remaining" \cf7 "feedbacks_remaining"\cf2 : \cf6 :\cf2  768 \cf5 768\cf2 , \cf3 ,\
\cf2 "monthly_limit" \cf7 "monthly_limit"\cf2 : \cf6 :\cf2  800 \cf5 800\
\cf2 \} \cf3 \}\cf2 , \cf3 ,\
\cf2 "created_at" \cf7 "created_at"\cf2 : \cf6 :\cf2  "2026-01-22T10:15:00Z" \cf8 "2026-01-22T10:15:00Z"\
\cf2 \} \cf3 \}\

\f1\b\fs24 \cf2 View Session Status\
GET /api/sessions/\{session_id\}\
Headers:
\f2\b0  
\fs21\fsmilli10800 Authorization: Bearer \{access\
_\
token\}\

\f1\b\fs24 Response:\

\f2\b0\fs18 json\

\fs21 \{ \cf3 \{\
\cf2 "session_id" \cf7 "session_id"\cf2 : \cf6 :\cf2  "session_789" \cf8 "session_789"\cf2 , \cf3 ,\
\cf2 "class_code" \cf7 "class_code"\cf2 : \cf6 :\cf2  "ABC123" \cf8 "ABC123"\cf2 , \cf3 ,\
\cf2 "status" \cf7 "status"\cf2 : \cf6 :\cf2  "active" \cf8 "active"\cf2 , \cf3 ,\
\cf2 "task" \cf7 "task"\cf2 : \cf6 :\cf2  \{ \cf3 \{\cf2  ... \cf3 ... \cf2 \} \cf3 \}\cf2 , \cf3 ,\
\cf2 "students" \cf7 "students"\cf2 : \cf6 :\cf2  [ \cf3 [\
\cf2 \{ \cf3 \{\
\cf2 "student_id" \cf7 "student_id"\cf2 : \cf6 :\cf2  "student_001" \cf8 "student_001"\cf2 , \cf3 ,\
\cf2 "display_name" \cf7 "display_name"\cf2 : \cf6 :\cf2  "Student 1" \cf8 "Student 1"\cf2 , \cf3 ,\
\cf2 "status" \cf7 "status"\cf2 : \cf6 :\cf2  "ready_for_feedback" \cf8 "ready_for_feedback"\cf2 , \cf3 ,\
\cf2 "submitted_at" \cf7 "submitted_at"\cf2 : \cf6 :\cf2  "2026-01-22T10:20:00Z" \cf8 "2026-01-22T10:20:00Z"\
\cf2 \} \cf3 \}\
\cf2 ] \cf3 ]\cf2 , \cf3 ,\
\cf2 "ready_for_feedback_count" \cf7 "ready_for_feedback_count"\cf2 : \cf6 :\cf2  "feedbacks_used_this_session" \cf7 "feedbacks_used_this_session"\cf2 : \cf6 :\cf2  5 \cf5 5\cf2 , \cf3 ,\
\cf2 3 \cf5 3\cf2 , \cf3 ,\
\cf2 "teacher_plan" \cf7 "teacher_plan"\cf2 : \cf6 :\cf2  \{ \cf3 \{\
\cf2 "feedbacks_remaining" \cf7 "feedbacks_remaining"\cf2 : \cf6 :\cf2  765 \cf5 765\cf2 , \cf3 ,\
\cf2 "monthly_limit" \cf7 "monthly_limit"\cf2 : \cf6 :\cf2  800 \cf5 800\
\cf2 \} \cf3 \}\
\cf2 \} \cf3 \}
\f1\b\fs24 \cf2 View Students Ready for Feedback (NEW)\
GET /api/sessions/\{session_id\}/ready\
Headers:
\f2\b0  
\fs21\fsmilli10800 Authorization: Bearer \{access\
_\
token\}\

\f1\b\fs24 Response:\

\f2\b0\fs18 json\

\fs21 \{ \cf3 \{\
\cf2 "ready_students" \cf7 "ready_students"\cf2 : \cf6 :\cf2  [ \cf3 [\
\cf2 \{ \cf3 \{\
\cf2 "student_id" \cf7 "student_id"\cf2 : \cf6 :\cf2  "student_001" \cf8 "student_001"\cf2 , \cf3 ,\
\cf2 "display_name" \cf7 "display_name"\cf2 : \cf6 :\cf2  "Student 1" \cf8 "Student 1"\cf2 , \cf3 ,\
\cf2 "submitted_at" \cf7 "submitted_at"\cf2 : \cf6 :\cf2  "2026-01-22T10:20:00Z" \cf8 "2026-01-22T10:20:00Z"\
\cf2 \} \cf3 \}\
\cf2 ] \cf3 ]\cf2 , \cf3 ,\
\cf2 "count" \cf7 "count"\cf2 : \cf6 :\cf2  5 \cf5 5\cf2 , \cf3 ,\
\cf2 "estimated_credits" \cf7 "estimated_credits"\cf2 : \cf6 :\cf2  5 \cf5 5\
\cf2 \} \cf3 \}\

\f1\b\fs24 \cf2 End Session\
POST /api/sessions/\{session_id\}/end\
Headers:
\f2\b0  
\fs21\fsmilli10800 Authorization: Bearer \{access\
_\

\f1\b\fs24 Response:\

\f2\b0\fs21\fsmilli10800 token\}\

\fs18 json\

\fs21 \{ \cf3 \{\
\cf2 "session_id" \cf7 "session_id"\cf2 : \cf6 :\cf2  "session_789" \cf8 "session_789"\cf2 , \cf3 ,\
\cf2 "status" \cf7 "status"\cf2 : \cf6 :\cf2  "ended" \cf8 "ended"\cf2 , \cf3 ,\
\cf2 "summary" \cf7 "summary"\cf2 : \cf6 :\cf2  \{ \cf3 \{\
\cf2 "students_joined" \cf7 "students_joined"\cf2 : \cf6 :\cf2  25 \cf5 25\cf2 , \cf3 ,\
\cf2 "feedbacks_generated" \cf7 "feedbacks_generated"\cf2 : \cf6 :\cf2  23 \cf5 23\cf2 , \cf3 ,\
\cf2 "feedbacks_used" \cf7 "feedbacks_used"\cf2 : \cf6 :\cf2  23 \cf5 23\cf2 , \cf3 ,\
\cf2 "teacher_plan" \cf7 "teacher_plan"\cf2 : \cf6 :\cf2  \{ \cf3 \{\
\cf2 "feedbacks_remaining" \cf7 "feedbacks_remaining"\cf2 : \cf6 :\cf2  745 \cf5 745\cf2 , \cf3 ,\
\cf2 "monthly_limit" \cf7 "monthly_limit"\cf2 : \cf6 :\cf2  800 \cf5 800\
\cf2 \} \cf3 \}\
\cf2 \} \cf3 \}\cf2 , \cf3 ,\
\cf2 "cleanup_scheduled_at" \cf7 "cleanup_scheduled_at"\cf2 : \cf6 :\cf2  "2026-01-22T12:00:00Z" \cf8 "2026-01-22T12:00:00Z"\
\cf2 \} \cf3 \}
\f1\b\fs24 \cf2 Real-Time Updates (WebSocket)\
Connect:
\f2\b0  
\fs21\fsmilli10800 wss://api.lara.edu/sessions/\{session\
_\

\f1\b\fs24 Events emitted:\

\f2\b0\fs21\fsmilli10800 id\}\
student\
_joined 
\fs24 : 
\fs21\fsmilli10800 \{ student\
_\
id, display_\
name \}\
student\
_\
submitted 
\fs24 : 
\fs21\fsmilli10800 \{ student\
_\
id, status: "ready_\
for\
_\
feedback" \}\
teacher\
_generating 
\fs24 : 
\fs21\fsmilli10800 \{ student\
_\
id, status: "generating" \}\
feedback\
_generated 
\fs24 : 
\fs21\fsmilli10800 \{ student\
_\
id, status: "ready_\
for\
_\
review" \}\
feedback\
_\
approved 
\fs24 : 
\fs21\fsmilli10800 \{ student\
id, status: "feedback\
_\
_\
sent" \}\
student\
_\
revised 
\fs24 : 
\fs21\fsmilli10800 \{ student\
id, revised\
_\
_\
at \}\

\f1\b\fs27 11.4 Feedback Generation Endpoints (UPDATED FOR V3.1)\

\fs24 Generate Feedback (Teacher-Initiated)\
POST /api/sessions/\{session_id\}/generate-feedback\
Headers:
\f2\b0  
\fs21\fsmilli10800 Authorization: Bearer \{access\
_\
token\}\

\f1\b\fs24 Request:\

\f2\b0\fs18 json\

\fs21 \{ \cf3 \{\
\cf2 "student_ids" \cf7 "student_ids"\cf2 : \cf6 :\cf2  [ \cf3 [\cf2 "student_001" \cf8 "student_001"\cf2 , \cf3 ,\cf2  "student_002" \cf8 "student_002"\cf2 ] \cf3 ]\cf2 , \cf3 ,\
\cf2 "teacher_action" \cf7 "teacher_action"\cf2 : \cf6 :\cf2  "batch_generation" \cf8 "batch_generation"\
\cf2 \} \cf3 \}\

\f1\b\fs24 \cf2 Process:\

\f2\b0 1. Check teacher's monthly usage vs. limit\
2. If under limit \uc0\u8594  Process generation requests\
3. For each student:\
Make AI call (Haiku 4.5)\
Run validation (all warnings, no blocks)\
Save feedback draft with validation results\
Increment teacher's monthly usage counter\
Update session usage\
Log AI call with teacher ID and timestamp4. 
\f1\b Response:\

\f2\b0 Return generated feedbacks with validation warnings attached\

\fs18 json\

\fs21 \{ \cf3 \{\
\cf2 "generated" \cf7 "generated"\cf2 : \cf6 :\cf2  [ \cf3 [\
\cf2 \{ \cf3 \{\
\cf2 "student_id" \cf7 "student_id"\cf2 : \cf6 :\cf2  "student_001" \cf8 "student_001"\cf2 , \cf3 ,\
\cf2 "feedback" \cf7 "feedback"\cf2 : \cf6 :\cf2  \{ \cf3 \{\
\cf2 "goal" \cf7 "goal"\cf2 : \cf6 :\cf2  "..." \cf8 "..."\cf2 , \cf3 ,\
\cf2 "strengths" \cf7 "strengths"\cf2 : \cf6 :\cf2  [ \cf3 [\cf2 ... \cf3 ...\cf2 ] \cf3 ]\cf2 , \cf3 ,\
\cf2 "growth_areas" \cf7 "growth_areas"\cf2 : \cf6 :\cf2  [ \cf3 [\cf2 ... \cf3 ...\cf2 ] \cf3 ]\cf2 , \cf3 ,\
\cf2 "next_steps" \cf7 "next_steps"\cf2 : \cf6 :\cf2  [ \cf3 [\cf2 ... \cf3 ...\cf2 ] \cf3 ]\
\cf2 \} \cf3 \}\cf2 , \cf3 ,\
\cf2 "validation_warnings" \cf7 "validation_warnings"\cf2 : \cf6 :\cf2  \{ \cf3 \{\
\cf2 "strong_warnings" \cf7 "strong_warnings"\cf2 : \cf6 :\cf2  [ \cf3 [\cf2 "ability_praise_detected" \cf8 "ability_praise_detected"\cf2 ] \cf3 ]\cf2 , \cf3 ,\
\cf2 "soft_warnings" \cf7 "soft_warnings"\cf2 : \cf6 :\cf2  [ \cf3 [\cf2 "vague_comment_in_strengths" \cf8 "vague_comment_in_strengths"\cf2 ] \cf3 ]\
\cf2 \} \cf3 \}\cf2 , \cf3 ,\
\cf2 "credits_used" \cf7 "credits_used"\cf2 : \cf6 :\cf2  1 \cf5 1\
\cf2 \} \cf3 \}\
\cf2 ] \cf3 ]\cf2 , \cf3 ,\
\cf2 "feedbacks_used_this_session" \cf7 "feedbacks_used_this_session"\cf2 : \cf6 :\cf2  2 \cf5 2\cf2 , \cf3 ,\
\cf2 "teacher_plan" \cf7 "teacher_plan"\cf2 : \cf6 :\cf2  \{ \cf3 \{\
\cf2 "feedbacks_remaining" \cf7 "feedbacks_remaining"\cf2 : \cf6 :\cf2  766 \cf5 766\cf2 , \cf3 ,\
\cf2 "monthly_limit" \cf7 "monthly_limit"\cf2 : \cf6 :\cf2  800 \cf5 800\
\cf2 \} \cf3 \}\
\cf2 \} \cf3 \}\

\f1\b\fs24 \cf2 CRITICAL:
\f2\b0  This endpoint only executes when teacher explicitly clicks button. No automatic triggers.\

\f1\b Get Feedback for Review\
GET /api/sessions/\{session_id\}/feedback/\{student_id\}\
Headers:
\f2\b0  
\fs21\fsmilli10800 Authorization: Bearer \{access\
_\
token\}\

\f1\b\fs24 Response:\

\f2\b0\fs18 json
\fs21 \{ \cf3 \{\
\cf2 "student_id" \cf7 "student_id"\cf2 : \cf6 :\cf2  "student_001" \cf8 "student_001"\cf2 , \cf3 ,\
\cf2 "student_response" \cf7 "student_response"\cf2 : \cf6 :\cf2  "..." \cf8 "..."\cf2 , \cf3 ,\
\cf2 "feedback" \cf7 "feedback"\cf2 : \cf6 :\cf2  \{ \cf3 \{\cf2  ... \cf3 ... \cf2 \} \cf3 \}\cf2 , \cf3 ,\
\cf2 "validation_warnings" \cf7 "validation_warnings"\cf2 : \cf6 :\cf2  \{ \cf3 \{\
\cf2 "strong_warnings" \cf7 "strong_warnings"\cf2 : \cf6 :\cf2  [ \cf3 [\cf2 "ability_praise_detected" \cf8 "ability_praise_detected"\cf2 ] \cf3 ]\cf2 , \cf3 ,\
\cf2 "soft_warnings" \cf7 "soft_warnings"\cf2 : \cf6 :\cf2  [ \cf3 [\cf2 "vague_comment_in_strengths" \cf8 "vague_comment_in_strengths"\cf2 ] \cf3 ]\
\cf2 \} \cf3 \}\cf2 , \cf3 ,\
\cf2 "credits_used" \cf7 "credits_used"\cf2 : \cf6 :\cf2  1 \cf5 1\
\cf2 \} \cf3 \}\

\f1\b\fs24 \cf2 Update Feedback\
PUT /api/sessions/\{session_id\}/feedback/\{student_id\}\
Headers:
\f2\b0  
\fs21\fsmilli10800 Authorization: Bearer \{access\
_\
token\}\

\f1\b\fs24 Request:\

\f2\b0\fs18 json\

\fs21 \{ \cf3 \{\
\cf2 "feedback" \cf7 "feedback"\cf2 : \cf6 :\cf2  \{ \cf3 \{\
\cf2 "strengths" \cf7 "strengths"\cf2 : \cf6 :\cf2  [ \cf3 [\cf2 "Updated strength comment" \cf8 "Updated strength comment"\cf2 ] \cf3 ]\cf2 , \cf3 ,\
\cf2 "growth_areas" \cf7 "growth_areas"\cf2 : \cf6 :\cf2  [ \cf3 [\cf2 "Updated growth area" \cf8 "Updated growth area"\cf2 ] \cf3 ]\cf2 , \cf3 ,\
\cf2 "next_steps" \cf7 "next_steps"\cf2 : \cf6 :\cf2  [ \cf3 [\cf2 ... \cf3 ...\cf2 ] \cf3 ]\
\cf2 \} \cf3 \}\
\cf2 \} \cf3 \}\

\f1\b\fs24 \cf2 Process:\

\f2\b0 Re-run soft validation checks on edited content\
Return any new warnings\

\f1\b Response:\

\f2\b0\fs18 json\

\fs21 \{ \cf3 \{\
\cf2 "updated_feedback" \cf7 "updated_feedback"\cf2 : \cf6 :\cf2  \{ \cf3 \{\cf2  ... \cf3 ... \cf2 \} \cf3 \}\cf2 , \cf3 ,\
\cf2 "new_warnings" \cf7 "new_warnings"\cf2 : \cf6 :\cf2  \{ \cf3 \{\
\cf2 "soft_warnings" \cf7 "soft_warnings"\cf2 : \cf6 :\cf2  [ \cf3 [\cf2 ] \cf3 ]\
\cf2 \} \cf3 \}\
\cf2 \} \cf3 \}
\f1\b\fs24 \cf2 Approve Feedback\
POST /api/sessions/\{session_id\}/feedback/\{student_id\}/approve\
Headers:
\f2\b0  
\fs21\fsmilli10800 Authorization: Bearer \{access\
_\
token\}\

\f1\b\fs24 Request:\

\f2\b0\fs21 "dismissed_warnings" \cf7 "dismissed_warnings"\cf2 : \cf6 :\cf2  [ \cf3 [\cf2 "vague_comment_in_strengths" \cf8 "vague_comment_in_strengths"\cf2 ] \cf3 ]\

\fs18 \cf2 json\

\fs21 \{ \cf3 \{\
\cf2 \} \cf3 \}\

\f1\b\fs24 \cf2 Process:\

\f2\b0 Mark feedback as approved\
Log which warnings were dismissed\
Trigger WebSocket notification to student\
Make feedback visible to student\

\f1\b Response:\

\f2\b0\fs18 json\

\fs21 \{ \cf3 \{\
\cf2 "approved" \cf7 "approved"\cf2 : \cf6 :\cf2  true \cf5 true\cf2 , \cf3 ,\
\cf2 "student_notified" \cf7 "student_notified"\cf2 : \cf6 :\cf2  true \cf5 true\
\cf2 \} \cf3 \}\

\f1\b\fs24 \cf2 Regenerate Feedback (Teacher-Initiated)\
POST /api/sessions/\{session_id\}/feedback/\{student_id\}/regenerate\
Headers:
\f2\b0  
\fs21\fsmilli10800 Authorization: Bearer \{access\
_\
token\}\

\f1\b\fs24 Request:\

\f2\b0\fs21 "reason" \cf7 "reason"\cf2 : \cf6 :\cf2  "teacher_regeneration" \cf8 "teacher_regeneration"\

\fs18 \cf2 json\

\fs21 \{ \cf3 \{\
\cf2 \} \cf3 \}\

\f1\b\fs24 \cf2 Process:
\f2\b0 Check usage limit\
Make new AI call if under limit (uses 1 credit)\
Increment usage\
Log as 
\fs21\fsmilli10800 "teacher\
_\
regeneration"\

\fs24 Return new feedback for review\

\f1\b Response:\

\f2\b0\fs18 json\

\fs21 \{ \cf3 \{\
\cf2 "regenerated_feedback" \cf7 "regenerated_feedback"\cf2 : \cf6 :\cf2  \{ \cf3 \{\cf2  ... \cf3 ... \cf2 \} \cf3 \}\cf2 , \cf3 ,\
\cf2 "validation_warnings" \cf7 "validation_warnings"\cf2 : \cf6 :\cf2  \{ \cf3 \{\cf2  ... \cf3 ... \cf2 \} \cf3 \}\cf2 , \cf3 ,\
\cf2 "credits_used" \cf7 "credits_used"\cf2 : \cf6 :\cf2  1 \cf5 1\cf2 , \cf3 ,\
\cf2 "teacher_plan" \cf7 "teacher_plan"\cf2 : \cf6 :\cf2  \{ \cf3 \{\
\cf2 "feedbacks_remaining" \cf7 "feedbacks_remaining"\cf2 : \cf6 :\cf2  765 \cf5 765\cf2 , \cf3 ,\
\cf2 "monthly_limit" \cf7 "monthly_limit"\cf2 : \cf6 :\cf2  800 \cf5 800\
\cf2 \} \cf3 \}\
\cf2 \} \cf3 \}\

\f1\b\fs27 \cf2 11.5 Student Session Endpoints (UPDATED FOR V3.1)\

\fs24 Join Session\
POST /api/student/join\
Request:\

\f2\b0\fs18 json\

\fs21 \{ \cf3 \{\
\cf2 "class_code" \cf7 "class_code"\cf2 : \cf6 :\cf2  "ABC123" \cf8 "ABC123"\
\cf2 \} \cf3 \}\

\f1\b\fs24 \cf2 Response:\

\f2\b0\fs18 json
\fs21 \{ \cf3 \{\
\cf2 "session_id" \cf7 "session_id"\cf2 : \cf6 :\cf2  "session_789" \cf8 "session_789"\cf2 , \cf3 ,\
\cf2 "student_id" \cf7 "student_id"\cf2 : \cf6 :\cf2  "student_001" \cf8 "student_001"\cf2 , \cf3 ,\
\cf2 "display_name" \cf7 "display_name"\cf2 : \cf6 :\cf2  "Student 1" \cf8 "Student 1"\cf2 , \cf3 ,\
\cf2 "task" \cf7 "task"\cf2 : \cf6 :\cf2  \{ \cf3 \{\
\cf2 "prompt" \cf7 "prompt"\cf2 : \cf6 :\cf2  "..." \cf8 "..."\cf2 , \cf3 ,\
\cf2 "success_criteria" \cf7 "success_criteria"\cf2 : \cf6 :\cf2  [ \cf3 [\cf2 ... \cf3 ...\cf2 ] \cf3 ]\
\cf2 \} \cf3 \}\
\cf2 \} \cf3 \}\

\f1\b\fs24 \cf2 Process:\

\f2\b0 Validate class code\
Generate unique session-scoped student ID (UUID)\
Assign incremental display name\
Return session ID and task details\

\f1\b View Task and Status\
GET /api/student/session/\{session_id\}\
Headers:
\f2\b0  
\fs21\fsmilli10800 X-Student-ID: \{student\
_\

\f1\b\fs24 Response:\

\f2\b0\fs21\fsmilli10800 id\} 
\fs24 (from sessionStorage)\

\fs18 json\

\fs21 \{ \cf3 \{\
\cf2 "session_id" \cf7 "session_id"\cf2 : \cf6 :\cf2  "session_789" \cf8 "session_789"\cf2 , \cf3 ,\
\cf2 "task" \cf7 "task"\cf2 : \cf6 :\cf2  \{ \cf3 \{\cf2  ... \cf3 ... \cf2 \} \cf3 \}\cf2 , \cf3 ,\
\cf2 "student_status" \cf7 "student_status"\cf2 : \cf6 :\cf2  "submitted" \cf8 "submitted"\cf2 , \cf3 ,\
\cf2 "feedback_ready" \cf7 "feedback_ready"\cf2 : \cf6 :\cf2  false \cf5 false\
\cf2 \} \cf3 \}\

\f1\b\fs24 \cf2 Submit Response (UPDATED FOR V3.1)\
POST /api/student/session/\{session_id\}/submit\
Headers:
\f2\b0  
\fs21\fsmilli10800 X-Student-ID: \{student\
_\
id\}\

\f1\b\fs24 Request:\

\f2\b0\fs18 json
\fs21 \{ \cf3 \{\
\cf2 "response_text" \cf7 "response_text"\cf2 : \cf6 :\cf2  "Student's written response here..." \cf8 "Student's written response here..."\
\cf2 \} \cf3 \}\

\f1\b\fs24 \cf2 Process:\

\f2\b0 Validate response (not empty, \uc0\u8805 50 characters)\
Save to Redis\
Mark student as 
\fs21\fsmilli10800 "ready_\
for\
_\
feedback" 
\fs24 status\
Update teacher dashboard via WebSocket\

\f1\b No AI call is made\
Response:\

\f2\b0\fs18 json\

\fs21 \{ \cf3 \{\
\cf2 "submitted" \cf7 "submitted"\cf2 : \cf6 :\cf2  true \cf5 true\cf2 , \cf3 ,\
\cf2 "status" \cf7 "status"\cf2 : \cf6 :\cf2  "ready_for_feedback" \cf8 "ready_for_feedback"\cf2 , \cf3 ,\
\cf8 "Your response has been submitted. Your teacher will prepare feedback shortly."\
\cf2 "message" \cf7 "message"\cf2 : \cf6 :\cf2  "Your response has been submitted. Your teacher will prepare feedback shortly."\
\} \cf3 \}\

\f1\b\fs24 \cf2 CRITICAL CHANGE:
\f2\b0  This endpoint no longer triggers AI generation. It only queues the student as ready.\

\f1\b Get Feedback\
GET /api/student/session/\{session_id\}/feedback\
Headers:
\f2\b0  
\fs21\fsmilli10800 X-Student-ID: \{student\
_\
id\}\

\f1\b\fs24 Response (if approved):\

\f2\b0\fs18 json\

\fs21 \{ \cf3 \{\
\cf2 "feedback_ready" \cf7 "feedback_ready"\cf2 : \cf6 :\cf2  true \cf5 true\cf2 , \cf3 ,\
\cf2 "feedback" \cf7 "feedback"\cf2 : \cf6 :\cf2  \{ \cf3 \{\
\cf2 "goal" \cf7 "goal"\cf2 : \cf6 :\cf2  "..." \cf8 "..."\cf2 , \cf3 ,\
\cf2 "strengths" \cf7 "strengths"\cf2 : \cf6 :\cf2  [ \cf3 [\cf2 ... \cf3 ...\cf2 ] \cf3 ]\cf2 , \cf3 ,\
\cf2 "growth_areas" \cf7 "growth_areas"\cf2 : \cf6 :\cf2  [ \cf3 [\cf2 ... \cf3 ...\cf2 ] \cf3 ]\cf2 , \cf3 ,\
\cf2 "next_steps" \cf7 "next_steps"\cf2 : \cf6 :\cf2  [ \cf3 [\cf2 ... \cf3 ...\cf2 ] \cf3 ]\
\cf2 \} \cf3 \}\
\cf2 \} \cf3 \}
\f1\b\fs24 \cf2 Response (if pending):\

\f2\b0\fs18 json\

\fs21 \{ \cf3 \{\
\cf2 "feedback_ready" \cf7 "feedback_ready"\cf2 : \cf6 :\cf2  false \cf5 false\cf2 , \cf3 ,\
\cf2 "message" \cf7 "message"\cf2 : \cf6 :\cf2  "Your teacher is preparing your feedback" \cf8 "Your teacher is preparing your feedback"\
\cf2 \} \cf3 \}\

\f1\b\fs24 \cf2 Select Next Step\
POST /api/student/session/\{session_id\}/select-next-step\
Headers:
\f2\b0  
\fs21\fsmilli10800 X-Student-ID: \{student\
_\
id\}\

\f1\b\fs24 Request:\

\f2\b0\fs21 "selected_next_step" \cf7 "selected_next_step"\cf2 : \cf6 :\cf2  "Add one example to paragraph 2 showing environmental impact" \cf8 "Add one example to paragraph 2 showing environmental impact"\

\fs18 \cf2 json\

\fs21 \{ \cf3 \{\
\cf2 \} \cf3 \}\

\f1\b\fs24 \cf2 Response:\

\f2\b0\fs18 json\

\fs21 \{ \cf3 \{\
\cf2 "next_step_selected" \cf7 "next_step_selected"\cf2 : \cf6 :\cf2  true \cf5 true\
\cf2 \} \cf3 \}\

\f1\b\fs24 \cf2 Submit Revision (UPDATED FOR V3.1)\
POST /api/student/session/\{session_id\}/revise\
Headers:
\f2\b0  
\fs21\fsmilli10800 X-Student-ID: \{student\
_\
id\}\

\f1\b\fs24 Request:\

\f2\b0\fs21 "revised_text" \cf7 "revised_text"\cf2 : \cf6 :\cf2  "Student's revised response..." \cf8 "Student's revised response..."\

\fs18 \cf2 json\

\fs21 \{ \cf3 \{\
\cf2 \} \cf3 \}\

\f1\b\fs24 \cf2 Process:
\f2\b0 Save revised response\

\f1\b No completion detection shown to student\
Response:\

\f2\b0\fs18 json\

\fs21 \{ \cf3 \{\
\cf2 "revised" \cf7 "revised"\cf2 : \cf6 :\cf2  true \cf5 true\cf2 , \cf3 ,\
\cf8 "Thank you for revising your work. Your teacher has your responses."\
\cf2 "message" \cf7 "message"\cf2 : \cf6 :\cf2  "Thank you for revising your work. Your teacher has your responses."\
\} \cf3 \}\

\f1\b\fs24 \cf2 CRITICAL CHANGE:
\f2\b0  No evaluative language, no completion signals, no "would you like feedback on\
revision" prompt.\

\f1\b\fs27 11.6 AI Usage & Plan Management (UPDATED FOR V3.1)\

\fs24 Get Usage Summary\
GET /api/teacher/usage\
Headers:
\f2\b0  
\fs21\fsmilli10800 Authorization: Bearer \{access\
_\
token\}\

\f1\b\fs24 Response:\

\f2\b0\fs18 json\

\fs21 \{ \cf3 \{\
\cf2 "plan_tier" \cf7 "plan_tier"\cf2 : \cf6 :\cf2  "classroom" \cf8 "classroom"\cf2 , \cf3 ,\
\cf2 "monthly_limit" \cf7 "monthly_limit"\cf2 : \cf6 :\cf2  800 \cf5 800\cf2 , \cf3 ,\
\cf2 "feedbacks_used_this_month" \cf7 "feedbacks_used_this_month"\cf2 : \cf6 :\cf2  32 \cf5 32\cf2 , \cf3 ,\
\cf2 "feedbacks_remaining" \cf7 "feedbacks_remaining"\cf2 : \cf6 :\cf2  768 \cf5 768\cf2 , \cf3 ,\
\cf2 "usage_percentage" \cf7 "usage_percentage"\cf2 : \cf6 :\cf2  4 \cf5 4\cf2 , \cf3 ,\
\cf2 "billing_cycle_start" \cf7 "billing_cycle_start"\cf2 : \cf6 :\cf2  "2026-01-01" \cf8 "2026-01-01"\cf2 , \cf3 ,\
\cf2 "billing_cycle_end" \cf7 "billing_cycle_end"\cf2 : \cf6 :\cf2  "2026-01-31" \cf8 "2026-01-31"\
\cf2 \} \cf3 \}\

\f1\b\fs24 \cf2 Backend also tracks (not shown to teacher):\

\f2\b0\fs18 json\

\fs21 \{ \cf3 \{\
\cf2 "estimated_cost_this_month_usd" \cf7 "estimated_cost_this_month_usd"\cf2 : \cf6 :\cf2  0.42 \cf5 0.42\cf2 , \cf3 ,\
\cf2 "average_cost_per_feedback_usd" \cf7 "average_cost_per_feedback_usd"\cf2 : \cf6 :\cf2  0.013125 \cf5 0.013125\
\cf2 \} \cf3 \}
\f1\b\fs24 \cf2 Check Usage Before Generation (NEW)\
POST /api/teacher/check-usage\
Headers:
\f2\b0  
\fs21\fsmilli10800 Authorization: Bearer \{access\
_\
token\}\

\f1\b\fs24 Request:\

\f2\b0\fs18 json\

\fs21 \{ \cf3 \{\
\cf2 "requested_count" \cf7 "requested_count"\cf2 : \cf6 :\cf2  25 \cf5 25\
\cf2 \} \cf3 \}\

\f1\b\fs24 \cf2 Response:\

\f2\b0\fs18 json\

\fs21 \{ \cf3 \{\
\cf2 "can_generate" \cf7 "can_generate"\cf2 : \cf6 :\cf2  true \cf5 true\cf2 , \cf3 ,\
\cf2 "feedbacks_remaining" \cf7 "feedbacks_remaining"\cf2 : \cf6 :\cf2  768 \cf5 768\cf2 , \cf3 ,\
\cf2 "would_exceed_limit" \cf7 "would_exceed_limit"\cf2 : \cf6 :\cf2  false \cf5 false\
\cf2 \} \cf3 \}\

\f1\b\fs24 \cf2 Or if would exceed:\

\f2\b0\fs18 json\

\fs21 \{ \cf3 \{\
\cf2 "can_generate" \cf7 "can_generate"\cf2 : \cf6 :\cf2  false \cf5 false\cf2 , \cf3 ,\
\cf2 "feedbacks_remaining" \cf7 "feedbacks_remaining"\cf2 : \cf6 :\cf2  10 \cf5 10\cf2 , \cf3 ,\
\cf2 "requested_count" \cf7 "requested_count"\cf2 : \cf6 :\cf2  25 \cf5 25\cf2 , \cf3 ,\
\cf2 "would_exceed_limit" \cf7 "would_exceed_limit"\cf2 : \cf6 :\cf2  true \cf5 true\cf2 , \cf3 ,\
\cf8 "You have 10 feedbacks remaining this month. You can generate 10 now, or upgrade your plan."\
\cf2 "message" \cf7 "message"\cf2 : \cf6 :\cf2  "You have 10 feedbacks remaining this month. You can generate 10 now, or upgrade your plan."\
\} \cf3 \}\

\f1\b\fs24 \cf2 Get Session History with Credits\
GET /api/teacher/sessions?start_date=2026-01-01&end_date=2026-01-31\
Headers:
\f2\b0  
\fs21\fsmilli10800 Authorization: Bearer \{access\
_\
token\}\

\f1\b\fs24 Response:\

\f2\b0\fs18 json
\fs21 \{ \cf3 \{\
\cf2 "sessions" \cf7 "sessions"\cf2 : \cf6 :\cf2  [ \cf3 [\
\cf2 \{ \cf3 \{\
\cf2 "session_id" \cf7 "session_id"\cf2 : \cf6 :\cf2  "session_789" \cf8 "session_789"\cf2 , \cf3 ,\
\cf2 "date" \cf7 "date"\cf2 : \cf6 :\cf2  "2026-01-22" \cf8 "2026-01-22"\cf2 , \cf3 ,\
\cf2 "feedbacks_generated" \cf7 "feedbacks_generated"\cf2 : \cf6 :\cf2  23 \cf5 23\cf2 , \cf3 ,\
\cf2 "students_joined" \cf7 "students_joined"\cf2 : \cf6 :\cf2  25 \cf5 25\
\cf2 \} \cf3 \}\
\cf2 ] \cf3 ]\cf2 , \cf3 ,\
\cf2 "total_feedbacks_used" \cf7 "total_feedbacks_used"\cf2 : \cf6 :\cf2  65 \cf5 65\
\cf2 \} \cf3 \}\

\f1\b\fs24 \cf2 Backend tracking (not shown to teacher):\

\f2\b0\fs18 json\

\fs21 \{ \cf3 \{\
\cf2 "total_cost_usd" \cf7 "total_cost_usd"\cf2 : \cf6 :\cf2  0.85 \cf5 0.85\cf2 , \cf3 ,\
\cf2 "average_cost_per_feedback_usd" \cf7 "average_cost_per_feedback_usd"\cf2 : \cf6 :\cf2  0.013077 \cf5 0.013077\
\cf2 \} \cf3 \}\

\f1\b\fs33 \cf2 12. UI/UX Requirements\

\fs27 12.1 Design Principles\

\fs24 Mobile-First:\

\f2\b0 All screens designed for mobile devices first\
Touch targets minimum 44x44 pixels\
CTA buttons maximum 30 characters\

\f1\b Accessibility:\

\f2\b0 WCAG 2.1 AA compliance\
Semantic HTML\
ARIA labels\
Keyboard navigation
\f1\b Clarity Over Cleverness:\

\f2\b0 Plain language, no jargon\
One primary action per screen\
Avoid overwhelming students\

\f1\b Consistency:\

\f2\b0 Three-question structure always visible\
Color coding for feedback types (task=blue, process=green, self-reg=purple)\
Fixed goal box position\
"Assistant" metaphor throughout (not "system" or "engine")\

\f1\b Credit Transparency (NEW in v3.1):\

\f2\b0 Credit usage visible to teachers before and after actions\
Simple language ("feedbacks" not "tokens" or "dollars")\
Calm, matter-of-fact presentation\
No anxiety-inducing warnings unless truly at limit\
Always contextualized (per session, vs. monthly limit)\

\f1\b Teacher Agency (Maintained from v3.0):\

\f2\b0 Teacher controls when AI is invoked (explicit button clicks)\
Clear credit communication before commitment\
No hidden or automatic spend\

\f1\b Teacher decides on all warnings
\f2\b0  (no blocks)\

\f1\b\fs27 12.2 Teacher Interface Requirements (UPDATED FOR V3.1)\

\fs24 Session Dashboard\
Credit Usage Display:
\f2\b0\fs21 \uc0\u9484 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9488  \cf3 \uc0\u9484 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9488 \
\cf2 \uc0\u9474  Session: ABC123 \u9474  \cf3 \uc0\u9474  Session: ABC123 \u9474 \
\cf2 \uc0\u9474  Students: 12 joined, 7 submitted \u9474  \cf3 \uc0\u9474  Students: 12 joined, 7 submitted \u9474 \
\cf2 \uc0\u9474  Feedbacks used this session: 0 \u9474  \cf3 \uc0\u9474  Feedbacks used this session: 0 \u9474 \
\uc0\u9474  Your plan: 800 of 800 remaining \u9474 \
\cf2 \uc0\u9474  Your plan: 800 of 800 remaining \u9474 \
\uc0\u9474  \u9474  \cf3 \uc0\u9474  \u9474 \
\cf2 \uc0\u9474  Ready for feedback: 7 students \u9474  \cf3 \uc0\u9474  Ready for feedback: 7 students \u9474 \
\cf2 \uc0\u9474  [Generate All 7] (uses 7 feedbacks) \u9474  \cf3 \uc0\u9474  [Generate All 7] (uses 7 feedbacks) \u9474 \
\cf2 \uc0\u9492 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9496  \cf3 \uc0\u9492 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9496 \

\f1\b\fs24 \cf2 Student List with Generation Controls:\

\f0\b0\fs21 \uc0\u9744 
\f2  Student 1 Response submitted [Generate] (uses 1) 
\f0 \cf3 \uc0\u9744 
\f2  Student 1 Response submitted [Generate] (uses 1)\

\f0 \cf2 \uc0\u9744 
\f2  Student 2 Response submitted [Generate] (uses 1) 
\f0 \cf3 \uc0\u9744 
\f2  Student 2 Response submitted [Generate] (uses 1)\

\f0 \uc0\u9744 
\f2  Student 3 Feedback approved 
\f0 \uc0\u10003 \
\cf2 \uc0\u9744 
\f2  Student 3 Feedback approved 
\f0 \uc0\u10003 \
\uc0\u9744 
\f2  Student 4 Response submitted [Generate] (uses 1) 
\f0 \cf3 \uc0\u9744 
\f2  Student 4 Response submitted [Generate] (uses 1)\
\cf2 ... \cf3 ...\
\cf2 [Generate Selected (0)] [Generate All 7] (uses 7 feedbacks) \cf3 [Generate Selected (0)] [Generate All 7] (uses 7 feedbacks)\

\f1\b\fs24 \cf2 Batch Generation Progress:\

\f2\b0\fs21 Generating feedback... (3 of 7 complete) \cf3 Generating feedback... (3 of 7 complete)\
\cf2 Feedbacks used this session: 3 \cf3 Feedbacks used this session: 3\
\cf2 [Cancel remaining] \cf3 [Cancel remaining]\

\f1\b\fs24 \cf2 End Session Confirmation:\

\f2\b0\fs21 This session generated feedback for 23 students. \cf3 This session generated feedback for 23 students.\
\cf2 Feedbacks used: 23 \cf3 Feedbacks used: 23\
\cf2 Your plan: 777 of 800 feedbacks remaining (3%) \cf3 Your plan: 777 of 800 feedbacks remaining (3%)\
\cf2 End session and save summary? \cf3 End session and save summary?\
\cf2 [Cancel] [End Session] \cf3 [Cancel] [End Session]\

\f1\b\fs24 \cf2 Feedback Review Modal with Warnings\
Header:
\f2\b0\fs21 Feedback for Student 7 \cf3 Feedback for Student 7\
\cf2 This feedback used 1 credit \cf3 This feedback used 1 credit\

\f1\b\fs24 \cf2 Body with Warning Badges:\

\f2\b0\fs21 \uc0\u9484 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9488  \cf3 \uc0\u9484 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9488 \
\uc0\u9474  
\f0 \uc0\u55357 \u56474 
\f2  What's working well \uc0\u9474 \
\cf2 \uc0\u9474  
\f0 \uc0\u55357 \u56474 
\f2  What's working well \uc0\u9474 \
\uc0\u9474  \u9474  \cf3 \uc0\u9474  \u9474 \
\uc0\u9474  \'95 "You're smart at explaining" 
\f0 \uc0\u9888 
\f2  \uc0\u9474 \
\cf2 \uc0\u9474  \'95 "You're smart at explaining" 
\f0 \uc0\u9888 
\f2  \uc0\u9474 \
\uc0\u9474  [Click for details] \u9474  \cf3 \uc0\u9474  [Click for details] \u9474 \
\cf2 \uc0\u9474  \u9474  \cf3 \uc0\u9474  \u9474 \
\cf2 \uc0\u9492 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9496  \cf3 \uc0\u9492 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9472 \u9496 \

\f1\b\fs24 \cf2 Warning Popup (Strong Warning):\

\f0\b0\fs21 \uc0\u9888 
\f2  WARNING: Ability Praise Detected
\f0 \cf3 \uc0\u9888 
\f2  WARNING: Ability Praise Detected\
\cf2 This feedback contains "you're smart" which research shows \cf3 This feedback contains "you're smart" which research shows\
\cf2 can create fixed mindset beliefs and reduce student resilience. \cf3 can create fixed mindset beliefs and reduce student resilience.\
\cf2 Suggested alternatives: \cf3 Suggested alternatives:\

\f0 \uc0\u9744 
\f2  "Your explanation shows clear logical thinking"\

\f0 \cf2 \uc0\u9744 
\f2  "Your explanation shows clear logical thinking"\

\f0 \cf3 \uc0\u9744 
\f2  "You've structured this argument effectively"\

\f0 \cf2 \uc0\u9744 
\f2  "You've structured this argument effectively"\

\f0 \uc0\u9744 
\f2  [Edit manually] 
\f0 \cf3 \uc0\u9744 
\f2  [Edit manually]\
\cf2 [Use suggestion] [Edit] [Regenerate (uses 1 credit)] [Approve anyway] \cf3 [Use suggestion] [Edit] [Regenerate (uses 1 credit)] [Approve anyway]\

\f1\b\fs24 \cf2 Warning Popup (Soft Warning):\

\f0\b0\fs21 \uc0\u9888 
\f2  This comment may be too general
\f0 \cf3 \uc0\u9888 
\f2  This comment may be too general\
\cf2 "Add more detail" \cf3 "Add more detail"\
\cf2 Consider making it more specific: \cf3 Consider making it more specific:\

\f0 \cf2 \uc0\u9744 
\f2  "Add more detail about environmental impact with one example" 
\f0 \cf3 \uc0\u9744 
\f2  "Add more detail about environmental impact with one example"\

\f0 \cf2 \uc0\u9744 
\f2  "Add more detail to paragraph 2 using evidence from the text" 
\f0 \cf3 \uc0\u9744 
\f2  "Add more detail to paragraph 2 using evidence from the text"\

\f0 \cf2 \uc0\u9744 
\f2  [Edit manually] 
\f0 \cf3 \uc0\u9744 
\f2  [Edit manually]\
\cf2 [Use suggestion] [Keep as is] \cf3 [Use suggestion] [Keep as is]
\f1\b\fs27 \cf2 12.3 Student Interface Requirements (UPDATED FOR V3.1)\

\fs24 Waiting States (Non-Evaluative, Accurate)\
After Submit (UPDATED):\

\f0\b0\fs21 \cf3 \uc0\u10003 
\f2  Your response has been submitted\

\f0 \cf2 \uc0\u10003 
\f2  Your response has been submitted\
\cf3 Your teacher will prepare your feedback shortly.\
\cf2 Your teacher will prepare your feedback shortly.\

\f0 \cf3 \uc0\u55357 \u56481 
\f2  While you wait:\

\f0 \cf2 \uc0\u55357 \u56481 
\f2  While you wait:\
Review the task goals above and think about \cf3 Review the task goals above and think about\
\cf2 what you focused on in your response. \cf3 what you focused on in your response.\

\f1\b\fs24 \cf2 Key Change:
\f2\b0  No mention of "generating" or "preparing feedback automatically" because no AI is running.\
Message is truthful and calm.\

\f1\b After Revision Submit (UPDATED):\

\f2\b0\fs21 Thank you for revising your work. \cf3 Thank you for revising your work.\
\cf2 Your teacher has your responses. \cf3 Your teacher has your responses.\
\cf2 [Close] \cf3 [Close]\

\f1\b\fs24 \cf2 Key Changes:\

\f0\b0 \uc0\u10060 
\f2  No completion detection shown\

\f0 \uc0\u10060 
\f2  No success/failure language\

\f0 \uc0\u10060 
\f2  No ticks or warnings\

\f0 \uc0\u9989 
\f2  Simple, neutral acknowledgment\

\f1\b\fs27 12.4 Voice & Metaphor Consistency\

\fs24 Language Rules:\

\f0\b0 \uc0\u9989 
\f1\b  Use:\

\f2\b0 "Your teacher will prepare feedback"\
"Your assistant suggests..."\
"Feedback is ready"\
"Thank you for revising""This session used 7 feedbacks"\
"You have 193 feedbacks remaining"\

\f0 \uc0\u10060 
\f1\b  Avoid:\

\f2\b0 "System is processing"\
"Generating feedback" (unless teacher actually clicked generate)\
"You completed your next step"\
"Success!" or "Not yet complete"\
Dollar amounts in teacher UI ("$0.09")\
Technical jargon ("tokens", "API calls")\

\f1\b Consistency Across:\

\f2\b0 Error messages\
Waiting states\
Completion messages\
Button labels\
Help text\
Usage indicators\

\f1\b\fs33 13. Session Management\

\fs27 13.1 Session Lifecycle\

\fs24 Creation:\

\f2\b0 Teacher clicks "Start Session"\
Backend generates 6-digit class code\
Initializes usage tracking:\

\fs18 javascript
\fs21 \{ \cf3 \{\
\cf2 session_id \cf3 session_id\cf2 , \cf3 ,\
\cf2 feedbacks_used \cf7 feedbacks_used\cf2 : \cf6 :\cf2  0 \cf5 0\cf2 , \cf3 ,\
\cf2 ready_for_feedback_count \cf7 ready_for_feedback_count\cf2 : \cf6 :\cf2  0 \cf5 0\
\cf2 \} \cf3 \}\

\f1\b\fs24 \cf2 Active:\

\f2\b0 Students join, submit responses\
Students marked "ready for feedback" (no AI yet)\
Teacher initiates AI generation (deliberate button click)\
AI generates feedback, usage tracked (in credits)\
Teacher reviews and approves\
Real-time WebSocket updates\

\f1\b Ending:\

\f2\b0 Teacher clicks "End Session"\
Confirmation shows:\

\fs21 This session generated feedback for 23 students. \cf3 This session generated feedback for 23 students.\
\cf2 Feedbacks used: 23 \cf3 Feedbacks used: 23\
\cf2 Your plan: 777 of 800 feedbacks remaining \cf3 Your plan: 777 of 800 feedbacks remaining\
\cf2 End session and save summary? \cf3 End session and save summary?\

\fs24 \cf2 Session status \uc0\u8594  
\fs21\fsmilli10800 "ended"\

\fs24 Summary saved\
Redis TTL set (1 hour grace period for recovery)\

\f1\b\fs27 13.2 Class Code Generation\

\fs24 Requirements:\

\f2\b0 6 characters, alphanumeric\
Easy to type (exclude 0/O, 1/I/l)\
Unique among active sessions
\f1\b Charset:
\f2\b0  
\fs21\fsmilli10800 ABCDEFGHJKLMNPQRSTUVWXYZ23456789\

\f1\b\fs24 Collision handling:
\f2\b0  Check existing active sessions, regenerate if duplicate\

\f1\b TTL:
\f2\b0  24 hours (automatically expires if session not ended)\

\f1\b\fs27 13.3 Session-Scoped Student IDs\

\fs24 Purpose:\

\f2\b0 No persistent student accounts, no PII.\

\f1\b Implementation:\

\f2\b0 Generate UUID on join\
Store in browser 
\fs21\fsmilli10800 sessionStorage 
\fs24 (not 
\fs21\fsmilli10800 localStorage 
\fs24 - clears when tab closes)\
Assign display name ("Student 1", "Student 2", incremental)\
Used in 
\fs21\fsmilli10800 X-Student-ID 
\fs24 header for all API calls\

\f1\b Privacy:
\f2\b0  No cross-session tracking possible. Teacher maintains external ID-to-name mapping.\

\f1\b\fs27 13.4 Data Cleanup\

\fs24 Ephemeral Data (Redis):\

\f2\b0 Student responses, feedback drafts, session state\
Auto-deleted when TTL expires\
TTL = session end + 1 hour grace period\

\f1\b Persistent Data (PostgreSQL):\

\f2\b0 Session summaries remain (with credits used, generation counts)\
Teacher can view/export historical sessions\

\f1\b No student names or PII stored by LARA\

\f2\b0 Backend tracking of actual costs (for business intelligence, not shown to teachers)\

\f1\b\fs33 14. Feedback Generation System\

\fs27 14.1 AI Model Integration\

\fs24 Provider:
\f2\b0  Anthropic Claude API
\f1\b Model:
\f2\b0  Claude Haiku 4.5 ( 
\fs21\fsmilli10800 claude-haiku-4-5-20251001 
\fs24 )\

\f1\b Configuration:\

\f2\b0 Max tokens: 1000\
Temperature: 0.3 (consistent output with slight variability)\
Timeout: 30 seconds\
No automatic retries (teacher decides to regenerate if needed)\

\f1\b\fs27 14.2 System Prompt Construction\

\fs24 Components:\

\f2\b0 1. 
\f1\b Role:
\f2\b0  "You are LARA, a formative feedback assistant."\
2. 
\f1\b Principles:
\f2\b0  Abbreviated 10 feedback principles\
3. 
\f1\b Success Criteria:
\f2\b0  Teacher's criteria OR Universal Expectations\
4. 
\f1\b Task Prompt:
\f2\b0  Student-facing question\
5. 
\f1\b Output Requirements:
\f2\b0  JSON schema, type balance encouraged, specificity encouraged\
6. 
\f1\b Warnings (not blocks):
\f2\b0  Vague praise, ability judgments, invented criteria\
7. 
\f1\b Reminder:
\f2\b0  Teacher will review before student sees\

\f1\b Template Structure:
\f2\b0\fs21 You are LARA, a formative feedback assistant. \cf3 You are LARA, a formative feedback assistant.\
\cf2 [Abbreviated principles] \cf3 [Abbreviated principles]\
\cf2 SUCCESS CRITERIA: \cf3 SUCCESS CRITERIA:\
\cf2 \{teacher_criteria OR universal_expectations\} \cf3 \{teacher_criteria OR universal_expectations\}\
TASK PROMPT:\
\cf2 TASK PROMPT:\
\{task.prompt\} \cf3 \{task.prompt\}\
\cf2 STUDENT RESPONSE: \cf3 STUDENT RESPONSE:\
\cf2 \{student_response\} \cf3 \{student_response\}\
IMPORTANT NOTES (these will trigger warnings, not block your output):\
\cf2 IMPORTANT NOTES (these will trigger warnings, not block your output):\
- Avoid ability praise ("you're smart") - triggers strong warning\cf3 - Avoid ability praise ("you're smart") - triggers strong warning\
\cf2 - Avoid peer comparisons ("better than others") - triggers strong warning\cf3 - Avoid peer comparisons ("better than others") - triggers strong warning\
\cf2 - Do not invent content-specific criteria - triggers strong warning \cf3 - Do not invent content-specific criteria - triggers strong warning\
\cf2 - Aim for specific references to student work\cf3 - Aim for specific references to student work\
\cf2 - Balance task/process/self-reg feedback types if possible \cf3 - Balance task/process/self-reg feedback types if possible\
REMEMBER: A teacher will review your feedback before the student sees it.\
\cf2 REMEMBER: A teacher will review your feedback before the student sees it.\
Your job is to provide a helpful first draft. \cf3 Your job is to provide a helpful first draft.\
\cf2 RESPOND IN JSON: \cf3 RESPOND IN JSON:\
\cf2 \{schema\} \cf3 \{schema\}\

\f1\b\fs27 \cf2 14.3 Usage Tracking & Cost Calculation (UPDATED FOR V3.1)\

\fs24 Before Teacher Clicks "Generate":\

\f2\b0 System checks teacher's current monthly usage against their plan limit.\
If at or over limit:\
"Generate" button is disabled\
Message: "Monthly limit reached. [View Plans] or write manually."\
If under limit:\
Button is enabled\

\f1\b After Teacher Clicks "Generate" (Per Student):\

\f2\b0 1. System makes AI call2. Receives response with token counts\
3. 
\f1\b Calculates exact cost
\f2\b0  using Haiku 4.5 pricing:\
Input: $0.50 per million tokens\
Output: $2.00 per million tokens\
4. 
\f1\b Credits tracking
\f2\b0  (teacher-facing):\
Increments teacher's monthly usage counter by 1\
Adds 1 to current session's total\
5. 
\f1\b Cost tracking
\f2\b0  (backend only, not shown to teacher):\
Stores actual dollar cost\
Tracks token counts\
6. 
\f1\b Creates audit log entry:\

\f2\b0\fs18 javascript\

\fs21 \{ \cf3 \{\
\cf2 teacher_id \cf3 teacher_id\cf2 , \cf3 ,\
\cf2 session_id \cf3 session_id\cf2 , \cf3 ,\
\cf2 student_id \cf3 student_id\cf2 , \cf3 ,\
\cf2 timestamp \cf3 timestamp\cf2 , \cf3 ,\
\cf2 model \cf7 model\cf2 : \cf6 :\cf2  "haiku-4.5" \cf8 "haiku-4.5"\cf2 , \cf3 ,\
\cf2 input_tokens \cf3 input_tokens\cf2 , \cf3 ,\
\cf2 output_tokens \cf3 output_tokens\cf2 , \cf3 ,\
\cf2 cost_usd \cf3 cost_usd\cf2 , \cf3 ,\cf2  
\f3\i // backend only \cf9 // backend only\

\f2\i0 \cf2 credits_used \cf7 credits_used\cf2 : \cf6 :\cf2  1 \cf5 1\cf2 , \cf3 ,\cf2  
\f3\i // teacher sees this \cf9 // teacher sees this\

\f2\i0 \cf2 initiator \cf7 initiator\cf2 : \cf6 :\cf2  "teacher" \cf8 "teacher"\cf2 , \cf3 ,\
\cf2 action_type \cf7 action_type\cf2 : \cf6 :\cf2  "generate_feedback" \cf8 "generate_feedback"\cf2  |\cf6 |\cf2  "regenerate_feedback" \cf8 "regenerate_feedback"\
\cf2 \} \cf3 \}\

\f1\b\fs24 \cf2 Audit Trail:\

\f2\b0 Every AI call is logged with full attribution.\
Teacher can later review (in credit terms):\

\fs21 On Jan 10, 2026 at 10:23 AM, you generated feedback \cf3 On Jan 10, 2026 at 10:23 AM, you generated feedback\
\cf2 for Student 7 in Session ABC123. \cf3 for Student 7 in Session ABC123.\
\cf2 Credits used: 1 \cf3 Credits used: 1\

\fs24 \cf2 Backend can review (with cost details):
\fs21 teacher_123 | session_789 | student_7 | 2026-01-10T10:23:00Z \cf3 teacher_123 | session_789 | student_7 | 2026-01-10T10:23:00Z\
Model: haiku-4.5 | Tokens: 450 in, 180 out | Cost: $0.0013\
\cf2 Model: haiku-4.5 | Tokens: 450 in, 180 out | Cost: $0.0013\
Credits: 1 \cf3 Credits: 1\

\f1\b\fs27 \cf2 14.4 CTA Generation Algorithm\

\fs24 Input:
\f2\b0  Full next step text\

\f1\b Process:\

\f2\b0 1. Extract action verb\
2. Strip success indicators ("so that...", "to show...", "because...")\
3. Replace "paragraph" with "\'b6"\
4. Remove filler words (your, the, this, that, some)\
5. Truncate to \uc0\u8804 30 characters\
6. Validate: must begin with action verb, reflect same intent\

\f1\b Examples:\

\f2\b0 "Add one example to paragraph 2 so your idea is clearer" \uc0\u8594  "Add example to \'b62" (19 chars)\
"Define 'migration' before using it so the reader understands" \uc0\u8594  "Define 'migration'" (18 chars)\
"Check that paragraph 1 answers the question" \uc0\u8594  "Check \'b61 answers Q" (19 chars)\

\f1\b\fs33 15. Logging & Debuggability Strategy\

\fs27 15.1 Philosophy\

\fs24 Core Principle:
\f2\b0  Separate signals to enable fast diagnosis in live classrooms.\
For MVP1, debuggability is as important as functionality. When something goes wrong mid-lesson, teacher and\
support team need to quickly identify:\
Is it the AI model?\
Is it validation logic?\
Is it the UI or WebSocket?\
Is it classroom behavior (e.g., student lost connection)?\
Was it a deliberate teacher action or an unexpected trigger?\
Three-Tier Logging prevents "black box" confusion.
\f1\b\fs27 15.2 Three-Tier Logging\

\fs24 Tier 1: User Actions (Always Logged)\
Purpose:
\f2\b0  Track what humans did\

\f1\b Events:\

\f2\b0 Student submitted response\

\f1\b Teacher clicked "Generate Feedback"
\f2\b0  (CRITICAL for v3.1)\

\f1\b Teacher clicked "Generate All"\

\f2\b0 Teacher approved feedback\
Teacher edited feedback\
Teacher regenerated feedback\

\f1\b Teacher dismissed warning\

\f2\b0 Student selected next step\
Student submitted revision\

\f1\b What Gets Logged:\

\f2\b0 Each user action records:\

\fs21\fsmilli10800 logging_\
tier 
\fs24 : 
\fs21\fsmilli10800 "user\
_\
action"\
timestamp 
\fs24 (exact)\

\fs21\fsmilli10800 session\
id\
_\
actor\
_\
type 
\fs24 : 
\fs21\fsmilli10800 "teacher" | "student"\
actor\
id\
_\
action 
\fs24 : 
\fs21\fsmilli10800 "student\
_\
submit" | "teacher\
_generate\
_\
feedback" | "teacher\
_generate\
_\
all" | "teacher\
_\
approve" |\
"teacher\
dismiss\
_\
_\
warning" | ...\
details 
\fs24 : object (e.g., 
\fs21\fsmilli10800 \{ student\
_\
ids: [...], batch\
_\
size: 25 \} 
\fs24 )\

\f1\b Tier 2: System Behavior (Always Logged)\
Purpose:
\f2\b0  Track what system did in response to user actions\

\f1\b Events:\

\f2\b0 AI API called (with 
\fs21\fsmilli10800 initiator = teacher\
_\

\fs24 AI API response received\
WebSocket event sent\

\fs21\fsmilli10800 id 
\fs24 )Validation run completed\

\f1\b Usage limit checked\
Generation batch processed\
What Gets Logged:\

\f2\b0 Each system event records:\

\fs21\fsmilli10800 logging_\
tier 
\fs24 : 
\fs21\fsmilli10800 "system\
_\
behavior"\
timestamp\
session\
id\
_\
event\
_\
type 
\fs24 : 
\fs21\fsmilli10800 "ai\
_\
call" | "websocket\
_\
send" | "validation\
_\
run" | "usage\
limit\
_\
_\
check"\
details 
\fs24 : object\

\f1\b For AI calls specifically:\

\f2\b0\fs21\fsmilli10800 model 
\fs24 : 
\fs21\fsmilli10800 "haiku-4.5"\
input\
_\
tokens 
\fs24 , 
\fs21\fsmilli10800 output\
_\
tokens\
latency_\
ms\
cost\
_\
usd 
\fs24 (backend only)\

\fs21\fsmilli10800 credits\
_\
used 
\fs24 (1)\

\f1\b\fs21\fsmilli10800 initiator\
teacher\
_\
_\
id 
\f2\b0\fs24 (crucial for audit)\

\f1\b Tier 3: Validation Results (Logged, Not Enforced)\
Purpose:
\f2\b0  Track validation patterns for post-session tuning\

\f1\b Events:\

\f2\b0 Strong warnings triggered (unsafe content detected)\
Soft warnings triggered (vague comments, missing types, low specificity)\
Silent observations (word overlap, response lengths)\

\f1\b Teacher actions on warnings
\f2\b0  (dismissed, used suggestion, edited manually)\

\f1\b What Gets Logged:\

\f2\b0 Each validation check records:\

\fs21\fsmilli10800 logging_\
tier 
\fs24 : 
\fs21\fsmilli10800 "validation\
_\
results"\
timestamp\
session\
id 
\fs24 , 
\fs21\fsmilli10800 student\
_\
_\
idstrong_\
warnings\
_\
triggered 
\fs24 : array (ability_praise, peer_comparison, invented_criteria,\
incomplete_structure)\

\fs21\fsmilli10800 soft\
_\
warnings\
_\
shown 
\fs24 : array (vague_comment, missing_type, low_specificity, atq_mismatch)\

\fs21\fsmilli10800 silent\
_\
observations 
\fs24 : object (word_overlap_score, response_length, feedback_length)\

\fs21\fsmilli10800 teacher\
_\
action 
\fs24 : 
\fs21\fsmilli10800 "approved\
with\
_\
_\
warnings" | "edited" | "regenerated" | "dismissed\
all\
_\
_\
warnings"\
warnings\
_\
dismissed 
\fs24 : array (which specific warnings teacher dismissed)\

\f1\b\fs27 15.3 Teacher-Visible Diagnostic Mode (Optional)\

\fs24 Optional Toggle in Session Dashboard:\

\f0\b0\fs21 \uc0\u9745 
\f2  Show diagnostic info 
\f0 \cf3 \uc0\u9745 
\f2  Show diagnostic info\

\f1\b\fs24 \cf2 When enabled:\

\f0\b0\fs21 \uc0\u9744 
\f2  Student 1 Response submitted [Generate] [AI: --] [WS: Connected] 
\f0 \cf3 \uc0\u9744 
\f2  Student 1 Response submitted [Generate] [AI: --] [WS: Connected]\

\f0 \cf2 \uc0\u9744 
\f2  Student 2 Feedback approved [AI: 4.2s] [WS: Connected] 
\f0 \cf3 \uc0\u9744 
\f2  Student 2 Feedback approved [AI: 4.2s] [WS: Connected]\

\f0 \cf2 \uc0\u9744 
\f2  Student 3 Response submitted [Generate] [AI: --] [WS: Disconnected] 
\f0 \cf3 \uc0\u9744 
\f2  Student 3 Response submitted [Generate] [AI: --] [WS: Disconnected]\

\f1\b\fs24 \cf2 Why Helpful:\

\f2\b0 Teacher sees AI latency (is review slow because of AI or teacher time?)\
WebSocket status visible (did Student 3 lose connection?)\
Faster triage: "Student 3 never got notification \uc0\u8594  WebSocket disconnected"\

\f1\b NEW for v3.1:\

\f2\b0 Shows 
\fs21\fsmilli10800 "\
--\
" 
\fs24 if feedback not yet generated (teacher hasn't clicked button)\
Shows latency only after teacher initiates generation\

\f1\b\fs27 15.4 Session Timeline (Post-Session Analysis)\

\f2\b0\fs24 After session ends, generate timeline:
\fs21 \cf3 Session Timeline: ABC123 (2026-01-22)\
\cf2 Session Timeline: ABC123 (2026-01-22)\
10:05 AM - Session started \cf3 10:05 AM - Session started\
\cf2 10:06 AM - Student 1 joined \cf3 10:06 AM - Student 1 joined\
\cf2 10:07 AM - Student 2 joined \cf3 10:07 AM - Student 2 joined\
\cf2 ... \cf3 ...\
\cf2 10:15 AM - Student 1 submitted response \uc0\u8594  Marked "Ready for feedback" \cf3 10:15 AM - Student 1 submitted response \uc0\u8594  Marked "Ready for feedback"\
10:17 AM - Teacher clicked "Generate All 3" \uc0\u8594  AI calls started\
\cf2 10:17 AM - Teacher clicked "Generate All 3" \uc0\u8594  AI calls started\
10:17 AM - Student 1 feedback generated (4.2s) \uc0\u8594  Ready for review \cf3 10:17 AM - Student 1 feedback generated (4.2s) \uc0\u8594  Ready for review\
\cf2 10:17 AM - Student 2 feedback generated (5.1s) \uc0\u8594  Ready for review \cf3 10:17 AM - Student 2 feedback generated (5.1s) \uc0\u8594  Ready for review\
\cf2 10:17 AM - Student 3 feedback generated (4.8s) \uc0\u8594  Ready for review \cf3 10:17 AM - Student 3 feedback generated (4.8s) \uc0\u8594  Ready for review\
10:18 AM - Teacher approved Student 1 feedback\
\cf2 10:18 AM - Teacher approved Student 1 feedback\
10:19 AM - Student 1 received feedback \uc0\u8594  Selected next step \cf3 10:19 AM - Student 1 received feedback \uc0\u8594  Selected next step\
\cf2 10:20 AM - Student 2 submitted response \uc0\u8594  Marked "Ready for feedback" \cf3 10:20 AM - Student 2 submitted response \uc0\u8594  Marked "Ready for feedback"\
10:22 AM - Teacher clicked "Generate" for Student 2\
\cf2 10:22 AM - Teacher clicked "Generate" for Student 2\
10:22 AM - Student 2 feedback generated (5.3s) \uc0\u8594  Ready for review \cf3 10:22 AM - Student 2 feedback generated (5.3s) \uc0\u8594  Ready for review\
\cf2 ... \cf3 ...\
\cf2 10:45 AM - Session ended \cf3 10:45 AM - Session ended\
\cf2 Credits used: 23 (23 teacher-initiated generations, 0 regenerations) \cf3 Credits used: 23 (23 teacher-initiated generations, 0 regenerations)\
Average AI latency: 4.8 seconds\
\cf2 Average AI latency: 4.8 seconds\
Teacher initiated 3 batch generations, 5 individual generations \cf3 Teacher initiated 3 batch generations, 5 individual generations\

\f1\b\fs24 \cf2 NEW for v3.1:\

\f2\b0 Clearly shows when teacher initiated generation vs. when AI completed\
Distinguishes batch from individual generations\
Emphasizes teacher agency in usage\
Shows credits used (not dollars)\

\f1\b\fs27 15.5 Error Categorization\

\fs24 Simple Taxonomy for Fast Triage:\

\f2\b0\fs21\fsmilli10800 AI\
_\
TIMEOUT 
\fs24 \uc0\u8594  Anthropic API didn't respond in 30s\

\fs21\fsmilli10800 AI\
MALFORMED\
JSON 
\fs24 \uc0\u8594  Model returned invalid JSON\

\fs21\fsmilli10800 _\
_\
AI\
LIMIT\
_\
_\
REACHED 
\fs24 \uc0\u8594  Teacher's monthly limit hit (soft block)\

\fs21\fsmilli10800 WEBSOCKET\
DISCONNECT 
\fs24 \uc0\u8594  Student lost connection\

\fs21\fsmilli10800 _\
VALIDATION\
STRONG\
_\
_\
WARNING 
\fs24 \uc0\u8594  Unsafe content detected (ability praise, peer comparison,\
invented criteria)
\fs21\fsmilli10800 VALIDATION\
SOFT\
_\
_\
WARNING 
\fs24 \uc0\u8594  Quality issue flagged for teacher\

\fs21\fsmilli10800 TEACHER\
_\
REGENERATION 
\fs24 \uc0\u8594  Teacher clicked regenerate after reviewing\

\fs21\fsmilli10800 USAGE\
CAP\
PREVENTED\
_\
_\
_\
GENERATION 
\fs24 \uc0\u8594  Teacher tried to generate but at limit\

\f1\b Why This Helps:\

\f2\b0 Clear triage path\
Easy log filtering: "Show all AI_LIMIT_REACHED events this week"\
Identifies patterns: "WEBSOCKET_DISCONNECT spike during Period 3 \uc0\u8594  network issue in that\
classroom?"\

\f1\b\fs27 15.6 Post-Pilot Analysis Questions\

\fs24 After 5-10 Pilot Sessions, Review Logs to Answer:\
Teacher Behavior:\

\f2\b0 1. How often did teachers use batch generation vs. individual?\
2. What was average time between student submit and teacher clicking "Generate"?\
3. Did any teachers hit usage limits? At what point in the month?\
4. How often did teachers regenerate feedback?\
5. Which warnings did teachers dismiss vs. act on?\
6. 
\f1\b NEW:
\f2\b0  Did teachers approve feedbacks with strong warnings? If so, why?\

\f1\b AI Performance:\

\f2\b0 7. Average latency per generation?\
8. Malformed JSON rate?\
9. Strong warning frequency (ability praise, peer comparison, invented criteria)?\
10. Soft warning frequency (vague comments, missing types, low specificity)?\

\f1\b Student Behavior:\

\f2\b0 11. 12. 13. Average time from feedback receipt to next step selection?\
Did students refresh frequently (connection issues)?\
How many students submitted revisions?\

\f1\b Cost Predictability:\

\f2\b0 14. Actual cost per student vs. estimated?15. 16. Variance in cost across different tasks?\
Did batch generation cost differ from individual?\

\f1\b Actions Based on Evidence:\

\f2\b0 If teachers rarely batch generate \uc0\u8594  simplify UI, remove complexity\
If warnings dismissed 80%+ \uc0\u8594  remove noisy warnings OR keep as education/reminder\
If latency >10s frequently \uc0\u8594  investigate model or API issues\
If teachers consistently hit limits \uc0\u8594  adjust tier thresholds\

\f1\b If strong warnings frequently approved
\f2\b0  \uc0\u8594  investigate: false positives? teacher context? need better\
messaging?\

\f1\b Evidence-Based Decisions:\

\f2\b0 Don't guess what to optimize. Let classroom data guide all refinements.\

\f1\b\fs33 16. Success Criteria\

\fs27 16.1 MVP1 is Complete When:\

\fs24 MVP1 Core Rule:\

\f0\b0 \uc0\u9744 
\f2  
\f1\b For MVP1, if the system can do something without a teacher clicking a button, that capability\
does not exist at all.\

\f0\b0 \uc0\u9744 
\f2  This means no enforcement, automation, or completion judgment present in the architecture, not\
"present but disabled".\

\f1\b Teacher Functionality:\

\f0\b0 \uc0\u9744 
\f2  Teacher can create task with \uc0\u8805 1 success criterion\

\f0 \uc0\u9744 
\f2  Teacher cannot save task without criteria (validation enforced)\

\f0 \uc0\u9744 
\f2  Teacher can start session and generate class code with QR\

\f0 \uc0\u9744 
\f2  Teacher can view live student submission list (real-time via WebSocket)\

\f0 \uc0\u9744 
\f2  Teacher sees students marked "Ready for feedback" (no AI generated yet)\

\f0 \uc0\u9744 
\f2  
\f1\b Teacher can click "Generate Feedback" for one student
\f2\b0  (deliberate action, uses 1 credit)\

\f0 \uc0\u9744 
\f2  
\f1\b Teacher can click "Generate All" for batch
\f2\b0  (shows estimated credits before clicking)\

\f0 \uc0\u9744 
\f2  
\f1\b Teacher sees credit usage indicator
\f2\b0  (session-level, non-anxiety-inducing: "7 feedbacks used this\
session")
\f0 \uc0\u9744 
\f2  
\f1\b Teacher sees monthly credit progress
\f2\b0  ("193 of 800 feedbacks remaining this month")\

\f0 \uc0\u9744 
\f2  Teacher can review AI-generated feedback with 
\f1\b all warnings visible
\f2\b0  (none blocking)\

\f0 \uc0\u9744 
\f2  Teacher can see warning badges, click for suggestions/explanations, 
\f1\b dismiss or approve all warnings\

\f0\b0 \uc0\u9744 
\f2  Teacher can edit feedback manually\

\f0 \uc0\u9744 
\f2  Teacher can approve feedback (warnings can be dismissed)\

\f0 \uc0\u9744 
\f2  
\f1\b Teacher can regenerate feedback
\f2\b0  (deliberate click, credits shown: "uses 1 credit")\

\f0 \uc0\u9744 
\f2  Teacher can view one basic class summary (most common next steps)\

\f0 \uc0\u9744 
\f2  
\f1\b Teacher sees credit summary when ending session
\f2\b0  ("Feedbacks used: 23")\

\f0 \uc0\u9744 
\f2  Teacher can download CSV with session data and credits used\

\f1\b Student Functionality:\

\f0\b0 \uc0\u9744 
\f2  Student can join session with 6-digit class code\

\f0 \uc0\u9744 
\f2  Student can see task prompt and success criteria (fixed goal box)\

\f0 \uc0\u9744 
\f2  Student can submit response (auto-save to browser only)\

\f0 \uc0\u9744 
\f2  
\f1\b Student sees accurate waiting message
\f2\b0  (no "generating" if teacher hasn't clicked yet)\

\f0 \uc0\u9744 
\f2  Student receives feedback after teacher approval (WebSocket notification)\

\f0 \uc0\u9744 
\f2  Student sees feedback in three-question format (goal always visible first)\

\f0 \uc0\u9744 
\f2  Student must select one next step before proceeding\

\f0 \uc0\u9744 
\f2  Student can view optional model examples (generic)\

\f0 \uc0\u9744 
\f2  Student can submit one revision\

\f0 \uc0\u9744 
\f2  
\f1\b Student sees neutral acknowledgment
\f2\b0  (no completion detection, no success/failure language)\

\f0 \uc0\u9744 
\f2  Student completes session (no persistent data)\

\f1\b System Requirements:\

\f0\b0 \uc0\u9744 
\f2  No feedback appears without goal being shown first\

\f0 \uc0\u9744 
\f2  
\f1\b All AI calls are teacher-initiated
\f2\b0  (no automatic triggers)\

\f0 \uc0\u9744 
\f2  
\f1\b Every AI call logged with teacher ID
\f2\b0  (full audit trail)\

\f0 \uc0\u9744 
\f2  
\f1\b Usage limit checked before generation
\f2\b0  (soft block at limit)\

\f0 \uc0\u9744 
\f2  
\f1\b All validation surfaces as warnings only
\f2\b0  (no blocks, even for unsafe content)\

\f0 \uc0\u9744 
\f2  Strong warnings for unsafe content (ability praise, peer comparison, invented criteria) - 
\f1\b teacher can\
dismiss\

\f0\b0 \uc0\u9744 
\f2  Soft warnings for pedagogical quality (vague comments, missing types, low specificity) - 
\f1\b teacher can\
dismiss
\f0\b0 \uc0\u9744 
\f2  
\f1\b No automatic regeneration
\f2\b0  (teacher decides)\

\f0 \uc0\u9744 
\f2  All next steps have CTAs \uc0\u8804 30 characters\

\f0 \uc0\u9744 
\f2  Student cannot proceed without selecting next step\

\f0 \uc0\u9744 
\f2  
\f1\b No completion detection in student UI
\f2\b0  (no evaluative language)\

\f0 \uc0\u9744 
\f2  Session data is ephemeral (auto-deleted after session + grace period)\

\f0 \uc0\u9744 
\f2  Teacher maintains authority over all feedback\

\f1\b AI Usage Management (Credit-Based):\

\f0\b0 \uc0\u9744 
\f2  
\f1\b No hidden or automatic usage
\f2\b0  (every call deliberate)\

\f0 \uc0\u9744 
\f2  
\f1\b Teacher sees credits before batch generation
\f2\b0  ("Generate All 25" shows "uses 25 feedbacks")\

\f0 \uc0\u9744 
\f2  
\f1\b Teacher sees credits during generation
\f2\b0  ("Generating... (7 of 25) 7 feedbacks used")\

\f0 \uc0\u9744 
\f2  
\f1\b Teacher sees credits after session
\f2\b0  ("Feedbacks used this session: 23")\

\f0 \uc0\u9744 
\f2  
\f1\b Usage tracked per teacher, checked against monthly limit\

\f0\b0 \uc0\u9744 
\f2  
\f1\b Configurable usage caps in credits
\f2\b0  (tier-ready in backend)\

\f0 \uc0\u9744 
\f2  
\f1\b Safe failure when limit reached
\f2\b0  (soft block, manual fallback available)\

\f0 \uc0\u9744 
\f2  
\f1\b All AI calls logged with:
\f2\b0  model, tokens, cost (backend), credits (teacher-facing), teacher ID,\
timestamp, action type\

\f1\b Validation & Quality:\

\f0\b0 \uc0\u9744 
\f2  
\f1\b Strong warnings for unsafe content only
\f2\b0  (ability praise, peer comparison, invented criteria)\

\f0 \uc0\u9744 
\f2  
\f1\b Soft warnings for quality
\f2\b0  (vague comments, missing types, low specificity)\

\f0 \uc0\u9744 
\f2  
\f1\b Teacher sees all warnings, can approve/dismiss/edit/regenerate\

\f0\b0 \uc0\u9744 
\f2  
\f1\b No hard blocks
\f2\b0  (teacher decides on everything)\

\f0 \uc0\u9744 
\f2  Silent logging for patterns (word overlap, response length)\

\f1\b Logging & Debuggability:\

\f0\b0 \uc0\u9744 
\f2  Three-tier logging implemented (user actions, system behavior, validation results)\

\f0 \uc0\u9744 
\f2  
\f1\b All teacher "Generate" clicks logged
\f2\b0  (distinguishes batch vs. individual)\

\f0 \uc0\u9744 
\f2  Session timeline generated post-session\

\f0 \uc0\u9744 
\f2  Error categorization taxonomy used\

\f0 \uc0\u9744 
\f2  Optional teacher diagnostic mode available
\f1\b Infrastructure:\

\f0\b0 \uc0\u9744 
\f2  Backend hosted on Railway (Node.js/TypeScript/Express)\

\f0 \uc0\u9744 
\f2  PostgreSQL database on Railway (teacher accounts, usage tracking, session summaries)\

\f0 \uc0\u9744 
\f2  Redis on Railway (ephemeral session storage)\

\f0 \uc0\u9744 
\f2  Frontend hosted on Netlify (React/TypeScript)\

\f0 \uc0\u9744 
\f2  Custom authentication (password reset, email verification handled manually)\

\f0 \uc0\u9744 
\f2  Stripe integration (subscriptions, webhooks for plan updates)\

\f0 \uc0\u9744 
\f2  WebSocket real-time updates (Socket.io)\

\f1\b\fs33 END OF IMPLEMENTATION PLAN v3.1\

\fs24 Document Status:
\f2\b0  Ready for Development\

\f1\b Next Steps:\

\f2\b0 1. Confirm v3.1 spec with all stakeholders\
2. Begin backend setup on Railway\
3. Implement custom authentication\
4. Build session management with credit tracking\
5. Integrate Claude Haiku 4.5 API\
6. Implement validation system (warnings only, no blocks)\
7. Build teacher dashboard with credit-based UI\
8. Build student interface with accurate, non-evaluative messaging\
9. Integrate Stripe subscriptions\
10. Test 25-student rush scenario\
11. Conduct 5-10 pilot sessions\
12. Analyze logs and iterate\

\f1\b Version Control:\

\f2\b0 v3.0: Teacher-initiated AI, validation warnings\
v3.1: Credit-based UI, no hard blocks (all warnings teacher-dismissible)}